function defclass(prototype){var constructor=prototype.hasOwnProperty('constructor')?prototype.constructor:function(){prototype.constructor.apply(this,arguments);};constructor.prototype=prototype;return constructor;}
function extend(constructor,keys){var prototype=Object.create(constructor.prototype);for(var key in keys){prototype[key]=keys[key];}
prototype.super=constructor.prototype;return defclass(prototype);}
var AufBid=window.AufBid||{};AufBid.AufAdapter=(function(){var SKIN_MIN_HEIGHT=1000;var SKIN_MIN_WIDTH=1000;var SKIN_OFFSET=220;return defclass({debug:false,bidTTL:60,constructor:function(manager,params){this.manager=manager;this.options=params||{};this.name=params.name;this.bidder=params.bidder;this.currency=params.currency.toUpperCase();this.callbacks={};this.placements={};this.log('Initialize bidder');if(this.debug&&location.host.indexOf('local')<0){this.logError('Adapter in debug mode in production');this.debug=false;}
if(this.manager.getConfig('hb_debug')==='true'){this.debug=true;}
if(this.debug){this.log('Adapter in debug mode','warn');}},log:function(message,logType){this.manager.logger.logConsole('['+this.name+'] '+message,logType);},logError:function(message,consoleOnly){this.manager.logger.logError(message,'account '+this.name,consoleOnly);},disable:function(){this.disabled=true;this.logError('SDK not loaded');},requestBids:function(){throw'adapter.requestBids() function not implemented yet';},getBidsFromResponse:function(){throw'adapter.getBidsFromResponse() function not implemented yet';},render:function(bid){if(bid.trackingPixel){if(!this.manager.utils.loadPixel(bid.trackingPixel)){this.logError('Failed calling tracking pixel');return;}}
if(bid.placementWidth>=SKIN_MIN_WIDTH&&bid.placementHeight>=SKIN_MIN_HEIGHT){return this.renderSkin(bid);}else{return this.renderIframe(bid);}},renderSkin:function(bid){if(!window.aufSkin){this.logError('Failed rendering - skin template not available');return;}
if(!bid.creativeHTML&&!bid.creativeURL){this.logError('Failed rendering - skin creative not available');return;}
return aufSkin.render({creativeWidth:bid.placementWidth,creativeHeight:bid.placementHeight,contentVerticalOffset:SKIN_OFFSET,isHTML5:true,creativeHTML:(bid.creativeHTML?bid.creativeHTML:''),creativeURL:(bid.creativeURL?bid.creativeURL:'')});},renderIframe:function(bid){var container=document.getElementById(bid.containerId);if(!container){this.logError('Failed rendering - container not available - '+bid.containerId);return;}
var iframeParameters={src:(bid.creativeURL?bid.creativeURL:''),html:(bid.creativeHTML?bid.creativeHTML:''),empty:(!bid.creativeHTML&&!bid.creativeURL)};var iframe=this.manager.utils.loadIframe(container,bid.placementWidth,bid.placementHeight,iframeParameters);if(!iframe){this.logError('Failed rendering - error in loading iframe');return;}
return iframe;},hasPlacements:function(){return Object.keys(this.placements).length>0;},setPlacements:function(formatIds){this.placements=this.getActivePlacements(this.options.placements,formatIds);},getActivePlacements:function(placements,formatIds){var activePlacements={};formatIds.forEach(function(formatId){if(placements[formatId]){activePlacements[formatId]=placements[formatId];}});return activePlacements;},createCallback:function(formatId,placementId,size){var fnName='callback_'+this.name
+'_n'+this.manager.callId
+(formatId?'_f'+formatId:'')
+(placementId?'_p'+placementId:'')
+(size?'_s'+size:'');fnName=fnName.replace(/[-, ]+/gi,'_');var that=this;this.callbacks[fnName]=function(response){that.log('Get bids from response - '
+(formatId?'formatid '+formatId:'all formats')
+' - '
+(placementId?'placement '+placementId+(size?' ('+size+')':''):'all placements'));that.getBidsFromResponse(response,formatId,placementId);that.callbacks[fnName]=function(){that.logError('Callback already called '+fnName);};};return{name:'aufbidjs.accounts.'+this.name+'.callbacks.'+fnName,func:this.callbacks[fnName]};}});})();
var AufBid=window.AufBid||{};AufBid.Logger=(function(){var SAMPLE_RATE_ERRORS=0;var SAMPLE_RATE_ANALYTICS=10;var SAMPLE_RATE_RENDER=10;var logger=function(options){this.verbose=options.verbose||false;this.initLogger();};logger.prototype={sampleRateAnalytics:10,constructor:logger,logmaticKeys:{'HEADER_BIDDING':'6maF6Z-rRW2rV2wr8o3AIQ','HEADER_BIDDING_RENDER':'z0H3qFj-QFu2cRbMgZTRUw','HEADER_BIDDING_EXPIRED':'X5jVcm3lRoS2Y9hDkhpPjA','HEADER_BIDDING_ERRORS':'jRDof5FVQnipLGUg48qkoA'},initLogger:function(){this.logger=window.afLogger;this.logger.logmaticInitKeys(this.logmaticKeys);},logConsole:function(log,logType){if(!this.verbose){return;}
this.logger.logConsole(log,logType,'HB');},logError:function(message,category,consoleOnly){if(SAMPLE_RATE_ERRORS&&Math.floor((Math.random()*100))>SAMPLE_RATE_ERRORS){return;}
this.logger.logError(message,'HB'+(category?':'+category:''),consoleOnly);},logAnalytics:function(message,bid,applySample){if(applySample&&SAMPLE_RATE_ANALYTICS&&Math.floor((Math.random()*100))>SAMPLE_RATE_ANALYTICS){return;}
this.logger.logAnalytics({message:message,context:{headerBidding:this.getBidData(bid)}});},logRenderedBid:function(bid){if(SAMPLE_RATE_RENDER&&Math.floor((Math.random()*100))>SAMPLE_RATE_RENDER){return;}
this.logAnalytics('HEADER_BIDDING_RENDER',bid);},logLateBid:function(bid){return;this.logAnalytics('HEADER_BIDDING_EXPIRED',bid,true);},logAvailableBids:function(bidsBuckets){return;for(var bidder in bidsBuckets){if(bidsBuckets.hasOwnProperty(bidder)){for(var formatId in bidsBuckets[bidder]){if(bidsBuckets[bidder].hasOwnProperty(formatId)){bidsBuckets[bidder][formatId].forEach(function(bid){if(bid.logged)return;bid.logged=true;this.logAnalytics('HEADER_BIDDING',bid,true);},this);}}}}},getBidData:function(bid){return{id:bid.id,account:bid.accountName,bidder:bid.bidderName,format:bid.formatName,cpm:bid.cpmNet,cpmAdjusted:bid.cpmAdjusted,placement:bid.placementId,size:bid.placementSize,booked:bid.booked,rendered:bid.rendered,late:bid.late,expired:bid.expired};},setVerbose:function(enabled){this.verbose=(enabled?true:false);localStorage.setItem('hb_verbose',(enabled?'1':''));}};return logger;})();
(function(root,factory){'use strict';if(typeof define==='function'&&define.amd){define(['exports'],factory);}else if(typeof exports==='object'){factory(exports);}else{if(root.PubSub)return;root.PubSub={};factory(root.PubSub);}}((typeof window==='object'&&window)||this,function(PubSub){'use strict';var messages={},lastUid=-1;function hasKeys(obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){return true;}}
return false;}
function throwException(ex){return function reThrowException(){throw ex;};}
function callSubscriberWithDelayedExceptions(subscriber,message,data){try{subscriber(message,data);}catch(ex){setTimeout(throwException(ex),0);}}
function callSubscriberWithImmediateExceptions(subscriber,message,data){subscriber(message,data);}
function deliverMessage(originalMessage,matchedMessage,data,immediateExceptions){var subscribers=messages[matchedMessage],callSubscriber=immediateExceptions?callSubscriberWithImmediateExceptions:callSubscriberWithDelayedExceptions,s;if(!messages.hasOwnProperty(matchedMessage)){return;}
for(s in subscribers){if(subscribers.hasOwnProperty(s)){callSubscriber(subscribers[s],originalMessage,data);}}}
function createDeliveryFunction(message,data,immediateExceptions){return function deliverNamespaced(){var topic=String(message),position=topic.lastIndexOf('.');deliverMessage(message,message,data,immediateExceptions);while(position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');deliverMessage(message,topic,data,immediateExceptions);}};}
function messageHasSubscribers(message){var topic=String(message),found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic])),position=topic.lastIndexOf('.');while(!found&&position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic]));}
return found;}
function publish(message,data,sync,immediateExceptions){var deliver=createDeliveryFunction(message,data,immediateExceptions),hasSubscribers=messageHasSubscribers(message);if(!hasSubscribers){return false;}
if(sync===true){deliver();}else{setTimeout(deliver,0);}
return true;}
PubSub.publish=function(message,data){return publish(message,data,false,PubSub.immediateExceptions);};PubSub.publishSync=function(message,data){return publish(message,data,true,PubSub.immediateExceptions);};PubSub.subscribe=function(message,func){if(typeof func!=='function'){return false;}
if(!messages.hasOwnProperty(message)){messages[message]={};}
var token='uid_'+String(++lastUid);messages[message][token]=func;return token;};PubSub.clearAllSubscriptions=function clearAllSubscriptions(){messages={};};PubSub.clearSubscriptions=function clearSubscriptions(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){delete messages[m];}}};PubSub.unsubscribe=function(value){var isTopic=typeof value==='string'&&messages.hasOwnProperty(value),isToken=!isTopic&&typeof value==='string',isFunction=typeof value==='function',result=false,m,message,t;if(isTopic){delete messages[value];return;}
for(m in messages){if(messages.hasOwnProperty(m)){message=messages[m];if(isToken&&message[value]){delete message[value];result=value;break;}
if(isFunction){for(t in message){if(message.hasOwnProperty(t)&&message[t]===value){delete message[t];result=true;}}}}}
return result;};}));
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){var b={};b.MODE={IMMEDIATE:0,LINGER:1,ERROR:2};var c=500,d=3e4,e=null,f=b.MODE.LINGER,g=0,h=a;return b.reset=function(){b.isScheduled()&&clearTimeout(e),e=null},b.isScheduled=function(){return null!==e},b.setMode=function(a){f=a,f!==b.MODE.ERROR&&(g=0)},b.postpone=function(a){var i;switch(b.reset(),f){case b.MODE.IMMEDIATE:i=0;break;case b.MODE.LINGER:i=h;break;case b.MODE.ERROR:var j=c*Math.pow(2,g);g++,i=Math.min(j,d)}e=setTimeout(a,i)},b}function c(a){a&&(j=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;j&&(a={},a[j]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");t(b,a),d.apply?d.apply(console,arguments):d(b)}})}function d(a){if(a){var b=window.TraceKit;if(b)b.report.subscribe(function(b){var c={};c[a]=b,j&&(c[j]="error"),t(b.message,c)});else{var c=window.onerror;window.onerror=function(b,d,e,f){var g={};g[a]={mode:"JSException",url:d,line:e,column:f},j&&(g[j]="error"),t(b,g),c&&"function"==typeof c&&c.apply(window,arguments)}}}}var e,f,g,h,i="https://api.logmatic.io/v1/input/",j="severity",k=500,l=10,m=-1,n=[],o=204800,p=b(k),q=function(a){i+=a},r=function(a){i=a},s=function(a){a=a||{},null!=a.lingerMs&&a.lingerMs>=0&&(k=a.lingerMs),null!=a.maxPostCount&&(a.maxPostCount<1&&(a.maxPostCount=1),l=a.maxPostCount),null!=a.maxWaitingCount&&(m=a.maxWaitingCount),null!=a.maxContentSize&&(o=a.maxContentSize)},t=function(b,c){if(i){var d={message:b};j&&(d[j]="info"),a(c,d),u(d)}},u=function(b){a(e,b),h&&(b[h]=window.location.href),n=n||[],n.push(JSON.stringify(b)),m>=0&&n.length>m&&n.shift(),v()},v=function(){p.isScheduled()||p.postpone(w)},w=function(){function b(a){200===a||0===a?n.length>0?p.setMode(p.MODE.IMMEDIATE):p.setMode(p.MODE.LINGER):p.setMode(p.MODE.ERROR),p.reset(),0!==n.length&&v()}for(var c=[],d=0;n.length>0&&c.length<l;){var j=n.shift();if(d+=j.length,d>o){if(j.length>o){var k={severity:"warn",message:"Message dropped as its size exceeded the hard limit of 200 kBytes"};a(e,k),JSON.stringify(k).length>o&&(k={severity:"error",message:"Message dropped because the context size provided exceeded the hard limit of 200 kBytes"}),k[h]=window.location.href,j=JSON.stringify(k)}n.unshift(j);break}c.push(j)}if(0===c.length)return void b(0);var m,q="["+c.join(",")+"]";m="undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest,m.open("POST",i,!0),"undefined"==typeof XDomainRequest&&(m.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&m.setRequestHeader("X-Logmatic-Add-IP",f),g&&m.setRequestHeader("X-Logmatic-Add-UserAgent",g)),m.onerror=function(a){b(a.target.status)},m.onload=function(a){b(a.target.status)},m.send(q)},x=function(a){e=a},y=function(a){h=a},z=function(a){f=a},A=function(a){g=a};return{init:q,log:t,forceEndpoint:r,setMetas:x,setSendErrors:d,setSendConsoleErrors:d,setSendConsoleLogs:c,setIPTracking:z,setUserAgentTracking:A,setURLTracking:y,setBulkOptions:s}});
function af_logError(message,category,domain){af_logError.img=new Image();af_logError.img.src=(domain?'//'+domain:'')
+'/world/js_errpix.asp'
+'?d='+encodeURIComponent(message)
+'&t='+Math.round(Math.random()*99999)
+(category?'&c='+category:'');}
function af_getHashParams(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;}
function af_isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop))
return false;}
return true;}
function af_getCookie(name){var i,x,y;var cookiesTab=document.cookie.split(';');for(i=0;i<cookiesTab.length;i++){x=cookiesTab[i].substr(0,cookiesTab[i].indexOf('='));y=cookiesTab[i].substr(cookiesTab[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x=='afperso'||x=='afpperso'){var j,a,cookiesValuesTab=y.split('&');for(j=0;j<cookiesValuesTab.length;j++){a=cookiesValuesTab[j].substr(0,cookiesValuesTab[j].indexOf('='));if(a==name){return unescape(cookiesValuesTab[j].substr(cookiesValuesTab[j].indexOf('=')+1));}}}else if(x==name){return y;}}
return'';}
function af_setCookie(name,value,minutes){minutes=minutes||15;var date=new Date();date.setTime(date.getTime()+minutes*60*1000);document.cookie=name+'='+encodeURIComponent(value)+'; expires='+date.toUTCString()+'; domain='+location.hostname.substr(location.hostname.indexOf('.'))+'; path=/';}
function af_setSessionCookie(name,value){af_setCookie(name,value,15);}
function af_setPermCookie(name,value){af_setCookie(name,value,365*24*60);}
function af_cleanCookie(name){af_setCookie(name,'',-1);}
function af_guid(){return Date.now()+''+Math.floor(Math.random()*1000);}
function af_bind(o,m){var args=[];for(var i=2;i<arguments.length;++i){args.push(arguments[i]);}
return function(){var tmp=args.slice(0,args.length);for(var i=0;i<arguments.length;++i){tmp.push(arguments[i]);}
return m.apply(o,tmp);};}
function af_push(object,path,varName,value){var subpaths=path.split('.');if(subpaths.length>0){if(typeof object[subpaths[0]]=='undefined'){object[subpaths[0]]={};}
var context=object[subpaths[0]];for(i=1;i<subpaths.length;i++){if(typeof context[subpaths[i]]=='undefined'){context[subpaths[i]]={};}else{context=context[subpaths[i]];}}
context[varName]=value;}}
function af_clone(obj){if(obj===null||typeof obj!=='object'){return obj;}
var temp=obj.constructor();for(var key in obj){temp[key]=af_clone(obj[key]);}
return temp;}
function af_addEvent(elt,event,listener,capture){if(elt&&elt.addEventListener){elt.addEventListener(event,listener,capture);return true;}else if(elt&&elt.attachEvent){return elt.attachEvent('on'+event,listener);}else if(elt){var oldListener=elt['on'+event];elt['on'+event]=function(e){if(oldListener){oldListener(e);}
return listener(e);};return oldListener;}}
function af_windowSize(){var i=window,e=document.documentElement,b=document.body;var w=(i.innerWidth?i.innerWidth:(e&&e.clientWidth?e.clientWidth:(b&&b.clientWidth?b.clientWidth:0)));var h=(i.innerHeight?i.innerHeight:(e&&e.clientHeight?e.clientHeight:(b&&b.clientHeight?b.clientHeight:0)));var l=(i.pageXOffset?i.pageXOffset:(e&&e.scrollLeft?e.scrollLeft:(b&&b.scrollLeft?b.scrollLeft:0)));var t=(i.pageYOffset?i.pageYOffset:(e&&e.scrollTop?e.scrollTop:(b&&b.scrollTop?b.scrollTop:0)));return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
function af_findPos(o){if(!o||o==document.body){return{l:0,t:0};}
var l=0,t=0,b=document.body,w=o.offsetWidth,h=o.offsetHeight;if(o.offsetParent){l=o.offsetLeft-o.scrollLeft;t=o.offsetTop-o.scrollTop;while(o=o.offsetParent){l+=o.offsetLeft-(o!=b?o.scrollLeft:0);t+=o.offsetTop-(o!=b?o.scrollTop:0);}}
return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
function af_percentInViewport(el){if(!el){return 0;}
var rect=el.getBoundingClientRect();var wSize=af_windowSize();var visibleHeight=rect.height;var visibleWidth=rect.width;var totalSize=visibleHeight*visibleWidth;if(rect.top<0&&rect.bottom>0){visibleHeight+=rect.top;}
if(rect.bottom>wSize.h&&rect.top<wSize.h){visibleHeight+=(wSize.h-rect.bottom);}
if((Math.max(rect.top,rect.bottom)<0)||(Math.min(rect.bottom,rect.top)>wSize.h)){visibleHeight=0;}
if(rect.left<0&&rect.right>0){visibleWidth+=rect.left;}
if(rect.right>wSize.w&&rect.left<wSize.w){visibleWidth+=(wSize.w-rect.right);}
if((Math.max(rect.left,rect.right)<0)||(Math.min(rect.left,rect.right)>wSize.w)){visibleWidth=0;}
return((visibleHeight*visibleWidth)/totalSize);}
function af_isInViewport(el,percent){if(!el){return false;}
if(typeof percent!=='number'){percent=1;}
return(af_percentInViewport(el)>=percent);}
var _isIOS;function af_isIOS(){if(typeof _isIOS==='undefined'){_isIOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)!==null;}
return _isIOS;}
function af_findAncestor(el,cls){while((el=el.parentElement)&&!el.classList.contains(cls));return el;}
function af_getDFPFormattedKeywords(keywords){var formattedKeywords='';var cleanedKeywords=keywords.replace(/^\W/,'').replace(/;/g,'&').replace(/&+/g,'&');cleanedKeywords.split('&').forEach(function(keyValue){var keyValueArr=keyValue.split('=');var key=keyValueArr[0];var value=keyValueArr[1];if(!key||typeof value==='undefined'){return;}
var keyQS='&'+key+'=';var keyQSPos=formattedKeywords.indexOf(keyQS);if(keyQSPos!==-1){var keyValues=formattedKeywords.substr(keyQSPos+keyQS.length);if(keyValues.indexOf('&')!==-1){keyValues=keyValues.substr(0,keyValues.indexOf('&'));}
if(keyValues.indexOf(value)!==-1){return;}
formattedKeywords=formattedKeywords.substr(0,keyQSPos+keyQS.length)+value+','+formattedKeywords.substr(keyQSPos+keyQS.length);}else{formattedKeywords+=keyQS+value;}});if(formattedKeywords.indexOf('&')===0){formattedKeywords=formattedKeywords.substr(1);}
return formattedKeywords;}
var Aflog=window.Aflog||{};Aflog.Logger=Aflog.Logger||(function(){var logger=function(options){this.initLogger(options);this.initLogs();};logger.prototype={constructor:logger,enabled:true,logmaticEndpoint:'https://api.logmatic.io/v1/input/',logmaticKeys:{'PAGE_VISIT':'4K2CgF19Q-aJ2b0pNTV48g'},initLogger:function(data){this.logmaticInit();this.datalayer=(data&&data.datalayer?data.datalayer:(window.af_dataLayer?af_dataLayer[0]:null));this.analyticsInit();},initLogs:function(){this.logs={logmatic:{},console:{}};},getFilteredDatalayer:function(){if(this.datalayer){return{userInfo:{du:this.datalayer.userInfo.du,device:this.datalayer.userInfo.device,adblocker:this.datalayer.userInfo.adblocker,screenResolution:this.datalayer.userInfo.screenResolution},pageInfo:{version:this.datalayer.pageInfo.version,contentType:this.datalayer.pageInfo.contentType,section:this.datalayer.pageInfo.section,subsection:this.datalayer.pageInfo.subsection,tag:this.datalayer.pageInfo.tag,category:this.datalayer.pageInfo.category,ads:this.datalayer.pageInfo.ads},campaignInfo:this.datalayer.campaignInfo,siteInfo:{platform:this.datalayer.siteInfo.platform,isMobile:this.datalayer.siteInfo.isMobile},vuid:this.datalayer.userInfo.vuid};}else{return{siteInfo:{platform:document.domain}};}},setDataLayer:function(datalayer){this.datalayer=datalayer;},logConsole:function(log,logType,category){if(!window.console){return;}
logType=logType||'log';if(typeof log==='object'){logType='table';}else if(typeof log==='string'&&category){log='['+category+'] '+log;}
if(logType==='table'){console.table(log);}else{console[logType].apply(console,[log]);}},logError:function(message,category,consoleOnly){this.logConsole('['+category+'] '+message,'error');if(consoleOnly!==true){var img=new Image();img.src='https://www.aufeminin.com/world/errpix.asp'
+'?s=10'
+'&d='+encodeURIComponent(message.split('').reverse().join(''))
+'&t='+Math.round(Math.random()*99999)
+(category?'&c='+encodeURIComponent(category):'');}},logAnalytics:function(log){log.context=log.context||{};log.context.datalayer=this.getFilteredDatalayer();this.logmaticPost(log.message,log.context);},analyticsInit:function(){if(!window.PubSub)return;var that=this;PubSub.subscribe('datalayer.ready',function(){that.analyticsLog();});PubSub.subscribe('tracking.call',function(){that.analyticsLog();});},analyticsLog:function(){if(!this.datalayer)return;if(Math.floor((Math.random()*100))>10)return;this.logAnalytics({message:'PAGE_VISIT',context:{datalayer:this.datalayer}});},logmaticInit:function(){logmatic.init();logmatic.setIPTracking('client.IP');logmatic.setUserAgentTracking('client.user-agent');logmatic.setBulkOptions({lingerMs:0,maxPostCount:1,maxWaitingCount:-1});},logmaticForceKey:function(logmaticKey){logmatic.forceEndpoint('https://api.logmatic.io/v1/input/'+logmaticKey);},logmaticInitKeys:function(keys){for(var message in keys){this.logmaticKeys[message]=keys[message];}},logmaticGetKey:function(logStackName){return this.logmaticKeys[logStackName];},logmaticLog:function(message,context){logmatic.log(message,context);},logmaticPost:function(message,log){var logmaticKey=this.logmaticGetKey(message);if(!logmaticKey)return;log.message=message;log.severity='info';log.url=window.location.href;var request=window.XDomainRequest?new XDomainRequest():new XMLHttpRequest();var url=this.logmaticEndpoint+logmaticKey;request.open('POST',url,true);if(!window.XDomainRequest){request.setRequestHeader('Content-Type','application/json; charset=UTF-8');request.setRequestHeader('X-Logmatic-Add-IP','client.IP');request.setRequestHeader('X-Logmatic-Add-UserAgent','client.user-agent');}
request.onerror=function(response){};request.onload=function(response){};request.send(JSON.stringify([log]));}};return logger;})();
var AufSession=window.AufSession||(function(){var COOKIE_NAME='af_session';var SESSION_TTL_MINUTES=30;var session=function(){if(!window.JSON)return;this.init();};session.prototype={constructor:session,init:function(){var rawCookie=af_getCookie(COOKIE_NAME);if(!rawCookie){this.cookie={visitorId:this.getGuid(),sessionId:1,sessionStartTime:this.getTime(),sessionUtm:this.getUtmFromUrl(),pageviewId:1,waveId:0,rankId:0};this.save();}else{this.cookie=JSON.parse(decodeURIComponent(rawCookie));if(typeof this.cookie.rankId==='undefined'){this.cookie.rankId=this.cookie.waveId;}
this.updatePageview();}},save:function(){this.updateAdTargetingKeywords();af_setPermCookie(COOKIE_NAME,JSON.stringify(this.cookie));},getVisitorId:function(){return this.cookie.visitorId;},getSessionId:function(){return this.cookie.sessionId;},getPageviewId:function(){return this.cookie.pageviewId;},getWaveId:function(){return this.cookie.waveId;},getRankId:function(){return this.cookie.rankId;},getUtm:function(){return{source:this.getUtmSource(),medium:this.getUtmMedium(),campaign:this.getUtmCampaign()};},getUtmQuerystring:function(){var keywords=this.getUtm();var arr=[];for(var key in keywords){if(keywords[key]){arr.push('utm_'+key+'='+keywords[key]);}}
return arr.join('&');},getUtmSource:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.source?this.cookie.sessionUtm.source:'';},getUtmMedium:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.medium?this.cookie.sessionUtm.medium:'';},getUtmCampaign:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.campaign?this.cookie.sessionUtm.campaign:'';},isPaid:function(){return this.getUtmMedium()==='partner'&&this.getUtmSource().indexOf('cm-')===0||this.getUtmMedium()==='cpc';},updateSession:function(){if(this.isSessionExpired()){this.newSession();this.newPageview(true);this.newWave(true);this.newRank(true);}
this.cookie.sessionStartTime=this.getTime();this.save();},updatePageview:function(){this.newPageview();this.newWave(true);this.updateSession();},updateWave:function(){this.newWave();this.newRank();this.updateSession();},isSessionExpired:function(){var now=new Date();var sessionStartDateString=new Date(this.cookie.sessionStartTime).toDateString();var sessionEndTime=this.cookie.sessionStartTime+SESSION_TTL_MINUTES*60*1000;var utmFromUrl=this.getUtmFromUrl();return(now.getTime()>sessionEndTime||now.toDateString()!==sessionStartDateString||utmFromUrl&&utmFromUrl.source&&utmFromUrl.source!==this.getUtmSource());},newSession:function(){this.cookie.sessionId=(this.cookie.sessionId>=1000?1:(this.cookie.sessionId+1)%1000);this.cookie.sessionUtm=this.getUtmFromUrl();},newPageview:function(reset){this.cookie.pageviewId=((reset||this.cookie.pageviewId>=1000)?1:(this.cookie.pageviewId+1)%1000);},newWave:function(reset){this.cookie.waveId=((reset||this.cookie.waveId>=1000)?0:(this.cookie.waveId+1)%1000);},newRank:function(reset){this.cookie.rankId=((reset||this.cookie.rankId>=1000)?0:(this.cookie.rankId+1)%1000);},getAdTargetingKeywords:function(){return{'visitor':this.getVisitorId(),'session':this.getSessionId(),'pageview':this.getPageviewId(),'wave':this.getWaveId(),'rank':this.getRankId(),'utm_source':this.getUtmSource(),'utm_medium':this.getUtmMedium(),'utm_campaign':this.getUtmCampaign()};},getAdTargetingKeywordsFormatted:function(){var keywords=this.getAdTargetingKeywords();var arr=[];for(var key in keywords){if(keywords[key]){arr.push(key+'='+keywords[key]);}}
return';'+arr.join(';')+';';},updateAdTargetingKeywords:function(){var keywords=this.getAdTargetingKeywords();window.sas_target=window.sas_target||'';for(var key in keywords){if(window.afAd){afAd.updateKeyword(key,keywords[key]);}else{var regex=new RegExp(';'+key+'[^;]*;','gi');sas_target=sas_target.replace(regex,';');sas_target+=';'+key+'='+keywords[key]+';';sas_target=sas_target.replace(/;+/g,';');}}},getTime:function(){return(new Date()).getTime();},getGuid:function(){return Date.now().toString()+Math.floor(Math.random()*1000).toString();},getUtmFromUrl:function(){if(document.referrer.indexOf(document.domain)===-1){var hash=document.location.hash.substring(1);if(hash){var hashArray=hash.replace(/&|#/g,'|').split('|');var hashValue,key,value,qmPos,utm={};for(var i=0,l=hashArray.length;i<l;i++){hashValue=hashArray[i].split('=');key=hashValue[0];value=hashValue[1];if(key&&value){qmPos=value.indexOf('?');if(qmPos>=0){value=value.substr(0,qmPos);}
switch(key){case'utm_source':utm.source=value;break;case'utm_medium':utm.medium=value;break;case'utm_campaign':utm.campaign=value;break;}}}
return utm;}}
return null;},debug:function(){console.table(this);}};return session;})();
AufBid.InvibesAdapter=(function(){var ENDPOINT='https://k.r66net.com/GetLink';return extend(AufBid.AufAdapter,{requestBids:function(){var placementIds=[];for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){placementIds.push(placement.tag);},this);}}
var query={placementIds:placementIds};var bidParams=encodeURIComponent(JSON.stringify(query));var callback=this.createCallback();window.invibes=window.invibes||{};window.invibes.iv_bidParams=bidParams;window.invibes.iv_async_callback_fn=callback.func;var src=ENDPOINT+'?'+bidParams;this.manager.utils.loadScript(src);},getBidsFromResponse:function(response){if(!response){this.logError('Empty response');return;}
if(response&&response.bid===0||response.bidstatus!=='1'){this.log('No bid');return;}
var placementFound=false;for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){if(response.placementId!==placement.tag){return;}
placementFound=true;this.manager.addBid({account:this,formatId:formatId,placementId:placement.tag,placementSize:placement.size,cpmRaw:response.bid},{creativeHTML:response.creative_tag,trackingPixel:response.tracking_url?decodeURIComponent(response.tracking_url).replace('http://','https://'):null});},this);}}
if(!placementFound){this.logError('Incorrect placement id. The expected request was for placementId: '+response.placementId);}}});})();
var AufBid=window.AufBid||{};AufBid.PubmaticAdapter=(function(){return extend(AufBid.AufAdapter,{requestBids:function(){var adSlots=[];for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){adSlots.push(placement.tag);},this);}}
var callback=this.createCallback();window.pm_async_callback_fn=callback.name;window.pm_optimize_adslots=adSlots;window.pm_pub_id=this.options.accountId;this.manager.utils.loadScript('https://ads.pubmatic.com/AdServer/js/gshowad.js');},getBidsFromResponse:function(){var bidDetailsMap=window.bidDetailsMap;var progKeyValueMap=window.progKeyValueMap;if(!bidDetailsMap||!progKeyValueMap){this.logError('Empty response');}
for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var bidDetail=bidDetailsMap[placement.tag];var progKeyValue=progKeyValueMap[placement.tag];if(progKeyValue&&progKeyValue.indexOf('=')===-1){progKeyValue=progKeyValue.replace(/([a-z]+);(.[^;]*)/ig,'$1=$2');}
var adUnitInfo=(progKeyValue||'').split(';').reduce(function(result,pair){var parts=pair.split('=');result[parts[0]]=parts[1];return result;},{});if(!bidDetail||adUnitInfo.bidstatus!=='1'){this.log('No bid');return;}
var dimensions=adUnitInfo.bidid.split('@')[1].split('x');this.manager.addBid({account:this,formatId:formatId,placementId:placement.tag,placementSize:dimensions[0]+'x'+dimensions[1],cpmRaw:Number(adUnitInfo.bid),placementHeight:dimensions[1],placementWidth:dimensions[0]},{creativeHTML:unescape(bidDetail.creative_tag),trackingPixel:decodeURIComponent(bidDetail.tracking_url).replace('http://','https://')});},this);}}}});})();
!function(){"use strict";function tryGetLocalStorage(a){try{return a.localStorage}catch(a){return}}function tryParseJson(a){try{return JSON.parse(a)}catch(a){return}}function extractExtraData(a){var b,c=[""],d=0;return void 0!==a.exd&&(void 0!==a.exd.genimpids&&a.exd.genimpids.length>0&&(c=a.exd.genimpids),void 0!==a.exd.bidcachedurationseconds&&(d=a.exd.bidcachedurationseconds),b=a.exd.slots,delete a.exd),{genimpids:c,slots:b,bidcachedurationseconds:d}}function getPreciseRequestDuration(a){if(window.performance&&window.performance.getEntries)for(var b=window.performance.getEntries(),c=b.length-1;c>=0;--c){var d=b[c];if(d.name===a&&d.duration)return Math.round(d.duration)}}function parse(a){switch(a.toLowerCase()){case"amp":return IntegrationMode.AMP;default:return IntegrationMode.Unspecified}}function SetLogLevel(a){Log.LOGLEVEL=a}function RequestBids(a,b,c){RequestBidsWithProfileId(a,standaloneProfileId,b,c)}function RequestBidsWithProfileId(a,b,c,d){var e=!1,f=new StandaloneInputParameters(a);if(checkInputParameters(f)){var g=function(a){var b=tryParseJson(a);if(void 0!==b&&void 0!==b.slots)for(var d=0,e=b.slots;d<e.length;d++){for(var g=e[d],h=void 0,i=0,j=f.placements;i<j.length;i++){var k=j[i];if(k.nativeCallback&&k.impId===g.impid){h=k.nativeCallback;break}}var l=GenerateBidResponseSlot(g.impid,g.cpm,g.width,g.height,g.zoneid,h,g.native,g.displayurl,g.creative);void 0!==l&&(window.criteo_pubtag.standaloneBidder.bids[l.id]=l)}void 0!==c&&c(GetBids())},h=function(){void 0!==c&&c([])},i=new DirectBiddingEventWithCaching(b,new DirectBiddingUrlBuilder(e),f.placements,g,h,h,d||3e3,f.networkId,f.integrationMode);window.criteo_pubtag.push(i)}}function SetLineItemRanges(a){var b=LineItemRange.createLineItemRangesFromString(a);window.criteo_pubtag.standaloneBidder.lineItemRanges=b}function SetDFPKeyValueTargeting(){var a=new DFPKeyValueTargeter,b=window.criteo_pubtag.standaloneBidder.lineItemRanges,c=GetImpressionIdToBestBid();for(var d in c){var e=c[d],f=ComputeDFPTargeting(e,b);void 0!==f&&a.setKeyValuePerSlot(d,f)}}function ComputeStandaloneDFPTargeting(a,b){var c=LineItemRange.createLineItemRangesFromString(b);return ComputeDFPTargeting(a,c)}function ComputeDFPTargeting(a,b){var c=LineItemRange.computeLineItemPricebandValue(a.cpm,b);return void 0===c?void 0:{crt_pb:[c],crt_bidid:[a.id]}}function RenderAd(a,b){var c,d="string"==typeof a?{bidId:a,document:b}:a,e=new RenderAdInputParameters(d);c=void 0!==e.containerId?new BidEventContainerTarget(e.document,e.containerId):new BidEventDocumentTarget(e.document),RenderAdOnTarget(e.bidId,c)}function RenderAdOnTarget(a,b){var c=window.criteo_pubtag.standaloneBidder.bids;if(c.hasOwnProperty(a)){var d=c[a],e=d.GenerateEvent(b);window.criteo_pubtag.push(e),delete c[a]}else Log.Error("Could not render bid with id: "+a)}function GetBids(){var a=window.criteo_pubtag.standaloneBidder.bids;if(null===a)return[];var b=window.criteo_pubtag.standaloneBidder.lineItemRanges,c=[];for(var d in a){var e=a[d];if(b.length>0){var f=LineItemRange.computeLineItemPricebandValue(e.cpm,b);e.cpm_bucket=f}c.push(e)}return c}function GetBidsForAdUnit(a,b){void 0===b&&(b=1);var c=GetBids(),d=[];for(var e in c){var f=c[e];f.impressionId===a&&d.push(f)}return d.sort(function(a,b){return b.cpm-a.cpm}).slice(0,Math.min(Math.max(b,0),d.length))}function checkInputParameters(a){if(void 0===a.placements)return Log.Error("Missing 'placements' parameter"),!1;if(0===a.placements.length)return Log.Error("'placements' parameter is empty"),!1;for(var b=0,c=a.placements;b<c.length;b++){var d=c[b];if(IsEmptyOrUndefined(d.impId))return Log.Error("Missing 'slotId' parameter in placements object"),!1;if(IsEmptyOrUndefined(d.zoneId)&&(IsEmptyOrUndefined(d.sizes)||IsEmptyOrUndefined(a.networkId)))return Log.Error("Missing zone information: specify either a zoneId or a networkId and a zone size"),!1;if(void 0!==d.nativeCallback&&"function"!=typeof d.nativeCallback)return Log.Error("'nativeCallback' parameter is not a function in placements object"),!1}return!0}function GetImpressionIdToBestBid(){var a={},b=window.criteo_pubtag.standaloneBidder.bids;for(var c in b){var d=b[c];if(a.hasOwnProperty(d.impressionId)){var e=a[d.impressionId];e.cpm<d.cpm&&(a[d.impressionId]=d)}else a[d.impressionId]=d}return a}function GenerateBidResponseSlot(a,b,c,d,e,f,g,h,i){return void 0!==f&&void 0!==g?new NativeBidResponseSlot(a,b,c,d,e,f,g):void 0===h||void 0!==i&&"<script"!==i.substr(0,7)?void 0!==i?new HtmlCreativeBidResponseSlot(a,b,c,d,e,i):void 0:new DisplayUrlBidResponseSlot(a,b,c,d,e,h)}function IsEmptyOrUndefined(a){return void 0===a||a+""==""}function GetIdfs(){return window.criteo_pubtag.context.getIdfs()}function SetIdfs(a){window.criteo_pubtag.context.setIdfs(a)}function DisplayAd(a){var b=new DisplayInputParameters(a);if(b.async=b.async!==!1,void 0===b.zoneid)return void Log.Error("missing parameter 'zoneid'");if(void 0!==b.layout&&b.async===!1)return void Log.Error("Criteo hosted ads only work in async mode");if(b.async===!0&&(void 0===b.containerid||""===b.containerid))return void Log.Error("Missing parameter 'containerid' for an async display");if(b.async===!1&&void 0!==b.passbackCode&&(Log.Error("Criteo.DisplayAd does not support synchronous local passback"),b.passbackCode=void 0),b.adFormat!==AdFormatType.Classic){var c=new AdvancedAdFormats(b.adFormat,b.containerid);if(c.IsUserOptout())return void Log.Debug("The user has opted-out for 1 day when closing the sticky footer.");b.containerid=c.CreateAdvancedAdFormatContainer()}var d;d=b.async?new DisplayEventAsync(new DisplayUrlBuilder,b):new DisplayEventSync(new DisplayUrlBuilder,b),window.criteo_pubtag.push(d)}function DisplayAcceptableAdIfAdblocked(a){var b=new DisplayInputParameters(a);if(void 0===b.zoneid)return void Log.Error("missing parameter 'zoneid'");if(void 0===b.containerid||""===b.containerid)return void Log.Error("missing parameter 'containerid' to display acceptable ads");if(!isVisible(document.getElementById(b.containerid)))return void Log.Error("can't display acceptable ad : the container \""+b.containerid+'" is not visible');window.criteo_pubtag.checkAdblocker();var c,d=new EyeoDealValidator;c=new DisplayEventAFR(new DisplayUrlBuilder,b,d.respectsEyeoDeal(b.containerid));var e;e=new Custom(function(){if(b.collapseContainerIfNotAdblocked){var a=document.getElementById(b.containerid);a.style.display="none"}void 0!==b.callIfNotAdblocked&&b.callIfNotAdblocked()});var f,g=function(){return window.criteo_pubtag.context.isAdBlocked===!0};f=new ConditionalEvent(g,c,e),window.criteo_pubtag.push(f)}function isVisible(a){if(a===document)return!0;if(!a)return!1;if(!a.parentNode)return!1;if(a.style){if("none"===a.style.display)return!1;if("hidden"===a.style.visibility)return!1}var b=window;if(b.getComputedStyle){var c=b.getComputedStyle(a,"");if("none"===c.display)return!1;if("hidden"===c.visibility)return!1}var d=a.currentStyle;if(d){if("none"===d.display)return!1;if("hidden"===d.visibility)return!1}return isVisible(a.parentNode)}function generateUuid(){var a=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)})}function tryDecodeURIComponent(a,b){try{return decodeURIComponent(a)}catch(c){return void 0!==b?b:a}}function createEventProcessor(a){var b={push:function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if("undefined"!=typeof a)for(var c=0,d=a;c<d.length;c++){var e=d[c];"function"==typeof e&&e()}}};return a&&Array.isArray(a)&&b.push.apply(b,a),b}function ExtractKeyValuesFromRtaResponse(a){if(void 0===a||""===a)return{};for(var b=a.split(";"),c={},d=0,e=b;d<e.length;d++){var f=e[d];if(""!==f){var g=f.split("=");if(2===g.length){var h=g[0],i=g[1];c[h]=c[h]||[],c[h].push(""+i)}}}return c}function CallRTA(a){var b=new RtaInputParameters(a);if(void 0===b.networkId)return void Log.Error("missing parameter 'networkid'");var c=b.crtgContentName?b.crtgContentName:DefaultCrtgContentName,d=b.crtgRtaCookieName?b.crtgRtaCookieName:DefaultCrtgRtaCookieName;window[c]=CookieHelper.GetCookie(d)||"";var e=new RtaEvent(new RtaUrlBuilder,b);window.criteo_pubtag.push(e)}function SetTargeting(a){var b=new RtaInputParameters(a);if(void 0===b.adserver)return void Log.Error("missing parameter 'adserver'");var c=[];if(void 0!==b.crtgContentName)c.push(b.crtgContentName);else if(window.criteo_pubtag.context.rtaVarNames.length>0)for(var d=0,e=window.criteo_pubtag.context.rtaVarNames;d<e.length;d++){var f=e[d];c.push(f)}else c.push(DefaultCrtgContentName);for(var g=0,h=c;g<h.length;g++){var i=h[g],j=window[i],k=ExtractKeyValuesFromRtaResponse(j),l=new RtaTargetingEvent(b.adserver,k);window.criteo_pubtag.push(l),RemoveCrtgContentNameFromPublisherTagContext(i)}}function ComputeDFPTargetingForAMP(a,b){var c=CookieHelper.GetCookie(a),d=ExtractKeyValuesFromRtaResponse(c);return RemoveCrtgContentNameFromPublisherTagContext(b),d}function RemoveCrtgContentNameFromPublisherTagContext(a){var b=window.criteo_pubtag.context.rtaVarNames.indexOf(a,0);b>-1&&window.criteo_pubtag.context.rtaVarNames.splice(b,1)}function SetupPassbackEventQueue(){window.Criteo.passbackEvents=createEventProcessor(window.Criteo.passbackEvents)}function RequestBidsPassback(a,b){RequestBidsWithProfileId(a,passbackProfileId,SetupPassbackEventQueue,b)}function RenderAdPassback(a,b,c,d){var e;return"string"==typeof a?e=a:(e=getParam(a,"adUnit","string"),b=getParam(a,"passback","function"),c=getParam(a,"customRenderFunction","function"),d=getParam(a,"minimumBidPrice","number")),void 0===e?void Log.Error("An adUnit string parameter should be provided"):void 0===b?void Log.Error("A passback callback should be provided"):("function"!=typeof c&&(c=function(a){RenderAd({bidId:a.id,containerId:e})}),window.Criteo.passbackEvents=window.Criteo.passbackEvents||[],void window.Criteo.passbackEvents.push(function(){var a=GetBidsForAdUnit(e)[0];a&&(void 0===d||a.cpm>d)?c(a):b(e)}))}function getParam(a,b,c){return typeof a[b]===c?a[b]:void 0}var AbstractEvent=function(){function a(a){this.name=a}return a.prototype.eval=function(a){},a}(),LocalStorageHelper=function(){function a(a){this.EXPIRE_SUFFIX="_expires",this.CHECK_STORAGE_KEY="criteo_localstorage_check",this.localStorage=tryGetLocalStorage(a||window)}return a.prototype.checkLocalStorage=function(){var a=this.CHECK_STORAGE_KEY;try{return this.localStorage.setItem(a,a),this.localStorage.removeItem(a),!0}catch(a){return!1}},a.prototype.removeItem=function(a){this.localStorage.removeItem(a),this.localStorage.removeItem(a+this.EXPIRE_SUFFIX)},a.prototype.getItem=function(a,b){var c=(new Date).getTime(),d=this.localStorage.getItem(a+this.EXPIRE_SUFFIX),e=d?parseInt(d,10):-1,f=e!==-1&&e<c,g=b&&(e===-1||e-c>b);return f||g?(this.removeItem(a),null):this.localStorage.getItem(a)},a.prototype.setItem=function(a,b,c){if(this.localStorage.setItem(a,b),c){var d=(new Date).getTime(),e=d+c;this.localStorage.setItem(a+this.EXPIRE_SUFFIX,e.toString())}},a}(),Size=function(){function a(a,b){this.width=a,this.height=b}return a.prototype.toString=function(){return this.width+"x"+this.height},a}(),BidStorageKey=function(){function a(){}return a.BID_STORAGE_KEY_PREFIX="criteo_pt_cdb_bidcache",a}(),__extends$1=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),BidStorageKeyWithSize=function(a){function b(b){var c=a.call(this)||this;return c.size=b,c}return __extends$1(b,a),b.prototype.toString=function(){return BidStorageKey.BID_STORAGE_KEY_PREFIX+"_Size"+this.size},b}(BidStorageKey),__extends$2=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),BidStorageKeyWithZoneId=function(a){function b(b){var c=a.call(this)||this;return c.zoneId=b,c}return __extends$2(b,a),b.prototype.toString=function(){return BidStorageKey.BID_STORAGE_KEY_PREFIX+"_ZoneId"+this.zoneId},b}(BidStorageKey),BidStorageKeyFactory=function(){function a(a){this.useZoneIdIntegration=a}return a.prototype.createKeysFromSlotRequest=function(a){if(this.useZoneIdIntegration)return[new BidStorageKeyWithZoneId(a.zoneId)];for(var b=[],c=0,d=a.sizes;c<d.length;c++){var e=d[c];b.push(new BidStorageKeyWithSize(e))}return b},a.prototype.createKeyFromSlotResponse=function(a){return this.useZoneIdIntegration?new BidStorageKeyWithZoneId(a.zoneid):new BidStorageKeyWithSize(new Size(a.width,a.height))},a}(),DirectBiddingBidManager=function(){function a(a){this.localStorageHelper=new LocalStorageHelper,this.localStorageEnabled=this.localStorageHelper.checkLocalStorage(),this.bidStorageKeyFactory=new BidStorageKeyFactory(a)}return a.prototype.getRequestCachedBids=function(a){for(var b=[],c=0,d=a;c<d.length;c++)for(var e=d[c],f=0,g=this.bidStorageKeyFactory.createKeysFromSlotRequest(e);f<g.length;f++){var h=g[f],i=this.getBid(h);void 0!==i&&b.push(i)}return b},a.prototype.getBid=function(a){if(this.localStorageEnabled){var b=this.localStorageHelper.getItem(a.toString());return this.localStorageHelper.removeItem(a.toString()),b?tryParseJson(b):void 0}},a.prototype.storeResponseBids=function(a,b){if(void 0!==a.slots&&0!==a.slots.length)for(var c=0,d=a.slots;c<d.length;c++){var e=d[c],f=this.bidStorageKeyFactory.createKeyFromSlotResponse(e);this.storeBid(f,e,b)}},a.prototype.storeBid=function(a,b,c){this.localStorageEnabled&&this.localStorageHelper.setItem(a.toString(),JSON.stringify(b),1e3*c)},a}(),AsyncRequest=function(){function a(a,b,c,d){void 0===d&&(d=!0),this.url=a,this.data=b,this.contentType=c,this.withCredentials=d}return a.prototype.send=function(a,b,c,d){var e=void 0!==this.data?"POST":"GET",f=this.getXMLHttpRequest(e,a,b,c,d);if(void 0!==f)f.send(this.data);else{var g=this.getXDomainRequest(e,a,b,c,d);void 0!==g&&g.send(this.data)}},a.prototype.getXMLHttpRequest=function(b,c,d,e,f){var g=new XMLHttpRequest;if("withCredentials"in g)return g.open(b,this.url,!0),g.timeout=f?f:a.LOCAL_PASSBACK_TIMEOUT,this.contentType?g.setRequestHeader("Content-type",this.contentType):"POST"===b&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.withCredentials=this.withCredentials,g.onload=function(){4===g.readyState&&200===g.status?c(g.responseText):d(g.readyState,g.status)},g.onerror=function(){d(void 0,void 0)},g.ontimeout=e,g},a.prototype.getXDomainRequest=function(b,c,d,e,f){if("undefined"!=typeof XDomainRequest){var g=new XDomainRequest;return g.timeout=f?f:a.LOCAL_PASSBACK_TIMEOUT,g.open(b,this.url),g.onload=function(){void 0!==g.responseText?c(g.responseText):d(void 0,void 0)},g.onerror&&(g.onerror=function(){d(void 0,void 0)}),g.ontimeout&&(g.ontimeout=e),g}},a.LOCAL_PASSBACK_TIMEOUT=3e4,a}(),DirectBiddingMetricsManager=function(){function a(){this.localStorageHelper=new LocalStorageHelper,this.localStorageEnabled=this.localStorageHelper.checkLocalStorage()}return a.prototype.getMetrics=function(b){if(this.localStorageEnabled){var c=a.METRICS_STORAGE_KEY,d=this.localStorageHelper.getItem(c),e=d?tryParseJson(d):[];return b&&this.localStorageHelper.removeItem(c),e}return[]},a.prototype.storeMetric=function(b){if(this.localStorageEnabled){var c=a.METRICS_STORAGE_KEY,d=this.localStorageHelper.getItem(c),e=d?tryParseJson(d):[];e.push(b),this.localStorageHelper.setItem(c,JSON.stringify(e),36e5)}},a.METRICS_STORAGE_KEY="criteo_pt_cdb_metrics",a}(),DirectBiddingRequestBuilder=function(){function a(a,b,c,d,e,f,g,h){this.slots=a,this.context=b,this.metricsManager=c,this.urlBuilder=d,this.profileId=e,this.integrationMode=f,this.networkId=g,this.adapterVersion=h}return a.prototype.isValid=function(){return this.slots.length>0},a.prototype.getRequest=function(){for(var a=[],b=0,c=this.slots;b<c.length;b++){var d=c[b],e={impid:d.impId};if(void 0!==d.zoneId&&(e.zoneid=d.zoneId),void 0!==d.nativeCallback&&(e.native=!0),void 0!==d.transactionId&&(e.transactionid=d.transactionId),void 0!==d.publisherSubId&&(e.publishersubid=d.publisherSubId),void 0!==d.sizes){for(var f=[],g=0,h=d.sizes;g<h.length;g++){var i=h[g];f.push(i.width+"x"+i.height)}e.sizes=f}a.push(e)}var j={publisher:{url:this.context.highestAccessibleUrl},slots:a};void 0!==this.networkId&&(j.publisher.networkid=this.networkId);var k=this.metricsManager.getMetrics(!0);return k.length&&(j.previousBidFeedback=k),j},a.prototype.getUrl=function(){return this.urlBuilder.buildUrl(this.profileId,this.context,this.integrationMode,this.adapterVersion)},a}(),TimeMeasurer=function(){function a(a){void 0===a&&(a=!0),a&&window.performance&&window.performance.now?this.now=window.performance.now.bind(window.performance):Date.now?this.now=Date.now:this.now=function(){return(new Date).getTime()}}return a.CreateRunning=function(){var b=new a;return b.start(),b},a.CreateWithStartTime=function(b){var c=new a(!1);return c.startTime=b,c},a.TimeSincePageLoad=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.timing&&window.performance.timing.navigationStart)return(new Date).getTime()-performance.timing.navigationStart}return 0},a.prototype.start=function(){this.startTime=this.now()},a.prototype.elapsed=function(){var a=this.now();return a-this.startTime},a}(),DirectBiddingMetric=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.impressionId=a,this.elapsed=b,this.isTimeout=c,this.pageLoadElapsed=d,this.adapterStartElapsed=e,this.cdbCallStartElapsed=f,this.cdbCallEndElapsed=g,this.adapterEndElapsed=h,this.adapterTimeout=i,this.adapterIsTimeout=j,this.zoneId=k}return a}(),DirectBiddingMetricBuilder=function(){function a(){this.elapsed=0,this.isTimeout=!1,this.pageLoadElapsed=0,this.adapterStartElapsed=0,this.cdbCallStartElapsed=0,this.cdbCallEndElapsed=0,this.adapterEndElapsed=0}return a.prototype.withElapsed=function(a){return this.elapsed=a,this},a.prototype.withIsTimeout=function(a){return this.isTimeout=a,this},a.prototype.withPageLoadElapsed=function(a){return this.pageLoadElapsed=a,this},a.prototype.withAdapterStartElapsed=function(a){return this.adapterStartElapsed=a,this},a.prototype.withCdbCallStartElapsed=function(a){return this.cdbCallStartElapsed=a,this},a.prototype.withCdbCallEndElapsed=function(a){return this.cdbCallEndElapsed=a,this},a.prototype.withAdapterEndElapsed=function(a){return this.adapterEndElapsed=a,this},a.prototype.withAdapterTimeout=function(a){return this.adapterTimeout=a,this},a.prototype.withZoneId=function(a){return this.zoneId=a,this},a.prototype.build=function(a){var b;return void 0!==this.adapterTimeout&&(b=this.adapterEndElapsed>this.adapterTimeout),new DirectBiddingMetric(a,this.elapsed,this.isTimeout,this.pageLoadElapsed,this.adapterStartElapsed,this.cdbCallStartElapsed,this.cdbCallEndElapsed,this.adapterEndElapsed,this.adapterTimeout,b,this.zoneId)},a}(),DirectBiddingTimer=function(){function a(a,b){this.builder=new DirectBiddingMetricBuilder,void 0!==a?this.timer=TimeMeasurer.CreateWithStartTime(a):this.timer=TimeMeasurer.CreateRunning();var c=this.timer.elapsed();this.builder.withAdapterStartElapsed(c),this.builder.withPageLoadElapsed(TimeMeasurer.TimeSincePageLoad()-c),void 0!==b&&this.builder.withAdapterTimeout(b)}return a.prototype.sendRequest=function(a){this.url=a,this.sendTime=TimeMeasurer.CreateRunning(),this.builder.withCdbCallStartElapsed(this.timer.elapsed())},a.prototype.requestReceived=function(a){void 0===a&&(a=!1),this.builder.withElapsed(getPreciseRequestDuration(this.url)||this.sendTime.elapsed()),this.builder.withCdbCallEndElapsed(this.timer.elapsed()),this.builder.withIsTimeout(a)},a.prototype.finish=function(a,b){this.builder.withAdapterEndElapsed(this.timer.elapsed()),b&&0!==b.length||(b=[""]);for(var c=0,d=b;c<d.length;c++){var e=d[c],f=void 0,g=void 0;"string"==typeof e?(f=e,g=void 0):(f=e.imp_id,g=e.zone_id),this.builder.withZoneId(g),a.storeMetric(this.builder.build(f))}},a}(),__extends$3=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DirectBiddingEvent=function(a){function b(c,d,e,f,g,h,i,j,k,l){var m=a.call(this,b.NAME)||this;return m.profileId=c,m.urlBuilder=d,m.slots=e,m.metricsManager=new DirectBiddingMetricsManager,m.callbackSuccess=f,m.callbackError=g,m.callbackTimeout=h,m.timeout=i,m.networkId=j,m.integrationMode=k,m.adapterVersion=l,m}return __extends$3(b,a),b.useZoneIdIntegration=function(a,b){return void 0===b||0===a.filter(function(a){return void 0!==a.sizes&&a.sizes.length>0}).length},b.prototype.eval=function(a){var c=this,d=b.getCriteoAdapterBidRequest(),e=b.getRequestAuctionStart(d),f=b.getAdapterTimeout(d),g=new DirectBiddingTimer(e,f),h=new DirectBiddingRequestBuilder(this.slots,a.context,this.metricsManager,this.urlBuilder,this.profileId,this.integrationMode,this.networkId,this.adapterVersion);if(!h.isValid()||"undefined"==typeof JSON)return void this.callbackError(void 0,void 0);var i=h.getRequest(),j=JSON.stringify(i),k=h.getUrl(),l=new AsyncRequest(k,j,"application/x-www-form-urlencoded");g.sendRequest(k),l.send(function(a){g.requestReceived();var b=tryParseJson(a)||{},d=extractExtraData(b);void 0!==c.callbackSuccess&&c.callbackSuccess(JSON.stringify(b),d);var e=d.slots||d.genimpids;g.finish(c.metricsManager,e)},function(a,b){g.requestReceived(),void 0!==c.callbackError&&c.callbackError(a,b),g.finish(c.metricsManager)},function(){g.requestReceived(!0),void 0!==c.callbackTimeout&&c.callbackTimeout(),g.finish(c.metricsManager)},this.timeout)},b.getCriteoAdapterBidRequest=function(){try{return window.pbjs._bidsRequested.find(function(a){return"criteo"===a.bidderCode})}catch(a){return}},b.getRequestAuctionStart=function(a){return a&&a.auctionStart},b.getAdapterTimeout=function(a){return a&&a.timeout},b.NAME="directbidding",b}(AbstractEvent),__extends=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DirectBiddingEventWithCaching=function(a){function b(c,d,e,f,g,h,i,j,k,l){var m=a.call(this,b.NAME)||this;return m.bidManager=new DirectBiddingBidManager(DirectBiddingEvent.useZoneIdIntegration(e,j)),m.directBiddingEvent=new DirectBiddingEvent(c,d,e,function(a,b){return m.onSuccess(a,b)},function(a,b){return m.onError(a,b)},function(){return m.onTimeout()},10*i,j,k,l),m.slots=e,m.callbackSuccess=f,m.callbackError=g,m.callbackTimeout=h,m.timeout=i,m.hasTimeouted=!1,m.hasResponded=!1,m}return __extends(b,a),b.prototype.eval=function(a){var b=this;setTimeout(function(){return b.onTimeout()},this.timeout),this.directBiddingEvent.eval(a)},b.prototype.onSuccess=function(a,b){if(this.hasResponded=!0,void 0!==b){var c=b.bidcachedurationseconds;if(this.hasTimeouted&&c>0){var d=JSON.parse(a);return void this.bidManager.storeResponseBids(d,c)}}this.hasTimeouted||this.callbackSuccess(a,b)},b.prototype.onError=function(a,b){this.hasResponded=!0,this.hasTimeouted||this.callbackError(a,b)},b.prototype.onHttpTimeout=function(){this.hasResponded=!0,this.hasTimeouted||this.callbackTimeout()},b.prototype.onTimeout=function(){if(!this.hasResponded){this.hasTimeouted=!0;var a=this.bidManager.getRequestCachedBids(this.slots);0===a.length?this.callbackTimeout():this.callbackSuccess(JSON.stringify({slots:a}),void 0)}},b.NAME="directbidding",b}(AbstractEvent),CacheBusterGenerator=function(){function a(){}return a.generateCacheBuster=function(){return Math.floor(99999999999*Math.random())},a}(),IntegrationMode;!function(a){a[a.Unspecified=0]="Unspecified",a[a.AMP=1]="AMP"}(IntegrationMode||(IntegrationMode={}));var PublisherTagVersion=43,DirectBiddingUrlBuilder=function(){function a(a){void 0===a&&(a=!1),this.auditMode=a}return a.prototype.buildUrl=function(b,c,d,e){void 0===d&&(d=IntegrationMode.Unspecified);var f="https:"===c.protocol?"https:":"http:",g=f+a.CRITEO_BIDDER_URL+this.getHandlerPath()+"?ptv="+PublisherTagVersion;return g+="&profileId="+String(b),g+=c.ctoIdOnPublisherDomain?"&idcpy="+c.ctoIdOnPublisherDomain:"",g+=c.idfs?"&idfs="+c.idfs:"",g+=c.secureId?"&sid="+c.secureId:"",g+=c.isOptOut?"&optout=1":"",d!==IntegrationMode.Unspecified&&(g+="&im="+d),void 0!==e&&(g+="&av="+String(e)),g+="&cb="+String(CacheBusterGenerator.generateCacheBuster()),g+=c.getContextFlags()},a.prototype.getHandlerPath=function(){return this.auditMode?a.CRITEO_BIDDER_AUDIT_HANDLER:a.CRITEO_BIDDER_HANDLER},a.CRITEO_BIDDER_URL="//bidder.criteo.com/",a.CRITEO_BIDDER_HANDLER="cdb",a.CRITEO_BIDDER_AUDIT_HANDLER="prebid/audit",a}(),LogLevel;!function(a){a[a.Error=0]="Error",a[a.Warning=1]="Warning",a[a.Debug=2]="Debug"}(LogLevel||(LogLevel={}));var Log=function(){function a(){}return a.Debug=function(b){window.console&&a.LOGLEVEL>=LogLevel.Debug&&console.log("PubTag [DEBUG]:"+b)},a.Warning=function(b){window.console&&a.LOGLEVEL>=LogLevel.Warning&&console.log("PubTag [WARNING]:"+b)},a.Error=function(b){a.LOGLEVEL>=LogLevel.Error&&(window.console?console.log("PubTag [ERROR]:"+b):alert("PubTag [ERROR]:"+b))},a.LOGLEVEL=LogLevel.Error,a}(),DFPKeyValueTargeter=function(){function a(){void 0===window.googletag&&(window.googletag={}),this.googletag=window.googletag,this.googletag.cmd=this.googletag.cmd||[]}return a.prototype.setKeyValuesForAllSlots=function(a){var b=this;this.googletag.cmd.push(function(){for(var c in a)b.googletag.pubads().clearTargeting(c),b.googletag.pubads().setTargeting(c,a[c]+"")})},a.prototype.setKeyValuePerSlot=function(a,b){var c=this.googletag.pubads().getSlots().filter(function(b){return b.getSlotElementId()===a});0===c.length?Log.Warning("No googletag slot found for slotId: "+a):c.length>1?Log.Warning("More than one googletag slot found for slotId: "+a):this.googletag.cmd.push(function(){for(var a in b)c[0].clearTargeting(a),c[0].setTargeting(a,b[a]+"")})},a}(),BidEventTarget=function(){function a(){}return a}(),__extends$4=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),BidEventContainerTarget=function(_super){function BidEventContainerTarget(a,b){var c=_super.call(this)||this;return c.containerId=b,c.element=a.getElementById(b),void 0===c.element&&Log.Error("Target element '"+b+"' not found in the document"),c}return __extends$4(BidEventContainerTarget,_super),BidEventContainerTarget.prototype.ResizeFrame=function(a,b){},BidEventContainerTarget.prototype.Write=function(a){this.element.innerHTML=a},BidEventContainerTarget.prototype.LoadScript=function(url){url+=url.indexOf("?")===-1?"?":"&",url+="containerid="+encodeURIComponent(this.containerId);var request=new AsyncRequest(url);request.send(function(responseText){eval(responseText)},function(a,b){},function(){})},BidEventContainerTarget}(BidEventTarget),__extends$5=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),BidEventDocumentTarget=function(a){function b(b){var c=a.call(this)||this;return c.document=b,c}return __extends$5(b,a),b.prototype.ResizeFrame=function(a,b){if(this.document.defaultView&&this.document.defaultView.frameElement){var c=this.document.defaultView.frameElement;c.width=a,c.height=b}},b.prototype.Write=function(a){this.document.write(a)},b.prototype.LoadScript=function(a){this.Write("<script type='text/javascript' src='"+a+"'></script>")},b}(BidEventTarget),__extends$7=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Custom=function(a){function b(c){var d=a.call(this,b.NAME)||this;return d.callback=c,d}return __extends$7(b,a),b.prototype.eval=function(a){this.callback&&this.callback.apply(this)},b.NAME="genericEvent",b}(AbstractEvent),BidResponseSlot=function(){function a(a,b,c,d,e){this.id=this.generateRandomId(),this.impressionId=a,this.cpm=b,this.width=c,this.height=d,this.zoneId=e}return a.prototype.generateRandomId=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6)},a}(),__extends$6=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DisplayUrlBidResponseSlot=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b,c,d,e,f)||this;return h.displayUrl=g,h}return __extends$6(b,a),b.prototype.GenerateEvent=function(a){var b=this;return a.ResizeFrame(this.width,this.height),new Custom(function(){return a.LoadScript(b.displayUrl)})},b.prototype.GenerateMessage=function(){return{displayUrl:this.displayUrl}},b}(BidResponseSlot),__extends$8=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),HtmlCreativeBidResponseSlot=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b,c,d,e,f)||this;return h.creative=g,h}return __extends$8(b,a),b.prototype.GenerateEvent=function(a){var b=this;return a.ResizeFrame(this.width,this.height),new Custom(function(){return a.Write(b.creative)})},b.prototype.GenerateMessage=function(){return{creative:this.creative}},b}(BidResponseSlot),LineItemRange=function(){function a(a,b,c){this.lowerBound=a,this.upperBound=b,this.increment=c}return a.createLineItemRangesFromString=function(b){for(var c=[],d=b.split(";"),e=0,f=d;e<f.length;e++){var g=f[e],h=g.split(".."),i=a.roundToDecimal(h[0],2),j=h[1].split(":"),k=a.roundToDecimal(j[0],2),l=a.roundToDecimal(j[1],2);if(isNaN(i)||isNaN(k)||isNaN(l)||0===l){Log.Warning("Could not parse range parameter: "+g);break}if(i<0||k<0||l<0){Log.Warning("Positive values must be set for range bounds: "+g);break}var m=k-i,n=m/l,o=n===Math.floor(n);i>k?Log.Warning("Lower bound ("+i+") greater than upper bound ("+k+")"):o?c.push(new a(i,k,l)):Log.Warning("Range ("+m+") is not divisible by increment ("+l+")")}return c.sort(function(a,b){return a.upperBound>b.upperBound?1:b.upperBound>a.upperBound?-1:0}),c},a.getDefaultDenseLineItemRanges=function(){var b=new a(0,3,.01),c=new a(3,8,.05),d=new a(8,20,.5);return[b,c,d]},a.computeLineItemPricebandValue=function(b,c){0===c.length&&(c=a.getDefaultDenseLineItemRanges());for(var d=0,e=c;d<e.length;d++){var f=e[d];if(b<=f.upperBound&&b>f.lowerBound){var g=Math.floor(b/f.increment+1e-4)*f.increment;return a.formatPriceBand(g)}}return b<c[0].lowerBound?void 0:b===c[0].lowerBound?a.formatPriceBand(c[0].lowerBound):a.formatPriceBand(c[c.length-1].upperBound)},a.formatPriceBand=function(a){return a.toFixed(2)},a.roundToDecimal=function(a,b){var c=parseFloat(a),d=Math.pow(10,b);return Math.round(c*d)/d},a}(),__extends$9=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),NativeBidResponseSlot=function(a){function b(b,c,d,e,f,g,h){var i=a.call(this,b,c,d,e,f)||this;return i.nativeCallback=g,i.nativePayload=h,i}return __extends$9(b,a),b.prototype.GenerateEvent=function(a){var b=this;return"function"!=typeof this.nativeCallback?(Log.Error("'nativeCallback' parameter is not a function in placements object"),new Custom(void 0)):"object"!=typeof this.nativePayload?(Log.Error("'nativePayload' parameter is not an object in placements object"),new Custom(void 0)):new Custom(function(){return b.nativeCallback(b.nativePayload)})},b.prototype.GenerateMessage=function(){return{nativePayload:this.nativePayload}},b}(BidResponseSlot),InputParameters=function(){function a(){var a=this;this.integrationMode=IntegrationMode.Unspecified,this.paramParser={},this.addParameter("integrationMode",function(b){a.integrationMode=parse(b)})}return a.prototype.addParameter=function(a,b){this.paramParser[a.toLowerCase()]=b},a.prototype.tryFillParameters=function(a){for(var b in a)if(void 0!==a[b]){var c=b.toLowerCase();this.paramParser[c]?this.paramParser[c](a[b]):Log.Warning("Unknown parameter: "+b)}},a}(),__extends$10=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),RenderAdInputParameters=function(a){function b(b){var c=a.call(this)||this;return c.document=window.document,c.containerId=void 0,c.addParameter("bidId",function(a){c.bidId=a}),c.addParameter("document",function(a){c.document=a}),c.addParameter("containerId",function(a){c.containerId=a}),a.prototype.tryFillParameters.call(c,b),c}return __extends$10(b,a),b}(InputParameters),DirectBiddingSlot=function(){function a(a,b,c,d,e,f){this.impId=a,this.zoneId=b,this.nativeCallback=c,this.transactionId=d,this.sizes=e,this.publisherSubId=f}return a}(),__extends$12=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),PlacementInputParameters=function(a){function b(b){var c=a.call(this)||this;return c.slotId=void 0,c.zoneId=void 0,c.sizes=[],c.nativeCallback=void 0,c.publisherSubId=void 0,c.addParameter("slotid",function(a){c.slotId=a}),c.addParameter("zoneid",function(a){c.zoneId=a}),c.addParameter("sizes",function(a){for(var b=0,d=a;b<d.length;b++){var e=d[b],f=e.split("x");c.sizes.push(new Size(parseInt(f[0],10),parseInt(f[1],10)))}}),c.addParameter("nativecallback",function(a){c.nativeCallback=a}),c.addParameter("publisherSubId",function(a){c.publisherSubId=a}),a.prototype.tryFillParameters.call(c,b),c}return __extends$12(b,a),b}(InputParameters),__extends$11=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),StandaloneInputParameters=function(a){function b(b){var c=a.call(this)||this;return c.placements=void 0,c.networkId=void 0,c.addParameter("networkId",function(a){c.networkId=a}),c.addParameter("placements",function(a){c.placements=c.deserializePlacementInput(a)}),a.prototype.tryFillParameters.call(c,b),c}return __extends$11(b,a),b.prototype.deserializePlacementInput=function(a){for(var b=[],c=0,d=a;c<d.length;c++){var e=d[c],f=new PlacementInputParameters(e);b.push(new DirectBiddingSlot(f.slotId,f.zoneId,f.nativeCallback,void 0,f.sizes,f.publisherSubId))}return b},b}(InputParameters),standaloneProfileId=184,AMP=function(){function a(){}return a.Standalone=function(b,c,d){var e={integrationmode:"amp",placements:[{slotid:b.slot,zoneid:b.zone,sizes:[b.width+"x"+b.height]}]};RequestBids(e,function(e){if("DFP"===b.adserver){a.listenForCreativeRequests(e);for(var f=0,g=e;f<g.length;f++){var h=g[f],i=ComputeStandaloneDFPTargeting(h,b.lineItemRanges);void 0!==i&&d(i)}0===e.length&&d({})}c(null)},b.timeout)},a.listenForCreativeRequests=function(a){window.addEventListener("message",function(b){var c=b.data instanceof Object?b.data:tryParseJson(b.data);if(c&&c.bidId)for(var d=0,e=a;d<e.length;d++){var f=e[d];if(f.id===c.bidId){var g=f.GenerateMessage();g.message="Criteo creative",b.source.postMessage(JSON.stringify(g),"*")}}},!1)},a}(),Prebid=function(){function a(a,b,c,d){this.timer=new DirectBiddingTimer(d.auctionStart,d.timeout),this.auctionId=d.auctionId,this.bidRequests=c;for(var e,f,g=[],h=0,i=c;h<i.length;h++){var j=i[h];g.push(new DirectBiddingSlot(j.adUnitCode,j.params.zoneId,j.params.nativeCallback,j.transactionId,j.sizes.map(function(a){return new Size(a[0],a[1])}),j.params.publisherSubId)),e=j.params.networkId||e,j.params.integrationMode&&(f=parse(j.params.integrationMode))}this.metricsManager=new DirectBiddingMetricsManager,this.requestBuilder=new DirectBiddingRequestBuilder(g,window.criteo_pubtag.context,this.metricsManager,new DirectBiddingUrlBuilder,a,f,e,b),this.url=this.requestBuilder.getUrl(),window.Criteo.prebid_adapters=window.Criteo.prebid_adapters||[],window.Criteo.prebid_adapters[this.auctionId]=this}return a.prototype.buildCdbUrl=function(){return this.url},a.prototype.buildCdbRequest=function(){return this.timer.sendRequest(this.url),this.requestBuilder.getRequest()},a.GetAdapter=function(a){var b=a.bidRequests[0].auctionId;if(window.Criteo.prebid_adapters&&b in window.Criteo.prebid_adapters)return window.Criteo.prebid_adapters[b]},a.prototype.createNativeAd=function(a,b,c){return window.criteo_prebid_native_slots=window.criteo_prebid_native_slots||{},window.criteo_prebid_native_slots[a]={callback:c,payload:b},'<script type="text/javascript">\n            var win = window;\n            for (var i = 0; i < 10; ++i) {\n                win = win.parent;\n                if (win.criteo_prebid_native_slots) {\n                    var responseSlot = win.criteo_prebid_native_slots["'+a+'"];\n                    responseSlot.callback(responseSlot.payload);\n                    break;\n                }\n            }\n        </script>'},a.prototype.getBidRequestById=function(a){for(var b=0,c=this.bidRequests;b<c.length;b++){var d=c[b];if(d.adUnitCode===a)return d}},a.prototype.interpretResponse=function(a,b){this.timer.requestReceived();var c=[];if(a.slots&&Array.isArray(a.slots))for(var d=0,e=a.slots;d<e.length;d++){var f=e[d],g=this.getBidRequestById(f.impid),h=g.bidId,i=void 0;i=f.native?this.createNativeAd(h,f.native,g.params.nativeCallback):f.creative,c.push({requestId:h,cpm:f.cpm,ad:i,currency:f.currency,netRevenue:!0,ttl:f.ttl||60,creativeId:h,width:f.width,height:f.height})}var j=extractExtraData(a),k=j.slots||j.genimpids;return this.timer.finish(this.metricsManager,k),c},a}(),__extends$13=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ConditionalEvent=function(a){function b(c,d,e){var f=a.call(this,b.NAME)||this;return f.condition=c,f.eventIfTrue=d,f.eventIfFalse=e,f}return __extends$13(b,a),b.prototype.eval=function(a){this.condition.apply(this)?this.eventIfTrue.eval(a):this.eventIfFalse.eval(a)},b.NAME="conditionalEvent",b}(AbstractEvent),AdFormatType;!function(a){a[a.Classic=0]="Classic",a[a.StickyFooter=1]="StickyFooter",a[a.ScrollingBanner=2]="ScrollingBanner"}(AdFormatType||(AdFormatType={}));var CookieHelper=function(){function a(){}return a.SetCookie=function(b,c,d,e,f){void 0===f&&(f=!1);var g=e||document,h=new Date;h.setTime(h.getTime()+60*d*60*1e3);var i="expires="+h.toUTCString();if(!f)return a.setCookieString(b,c,i,void 0,g),g.location.hostname;for(var j=g.location.hostname.split("."),k=0;k<j.length;++k){var l=j.slice(j.length-k-1,j.length).join(".");a.setCookieString(b,c,i,l,g);var m=a.GetCookie(b,e);if(m&&m===c)return l}return g.location.hostname},a.DeleteCookie=function(b,c,d){void 0===d&&(d=!1),a.SetCookie(b,"",0,c,d)},a.GetCookie=function(a,b){for(var c=b||document,d=c.cookie.split(";"),e=0,f=d;e<f.length;e++){var g=f[e],h=g.substr(0,g.indexOf("=")).replace(/^\s+|\s+$/g,""),i=g.substr(g.indexOf("=")+1);if(h===a)return decodeURIComponent(i)}},a.setCookieString=function(a,b,c,d,e){var f=a+"="+encodeURIComponent(b)+";"+c+";";d&&""!==d&&(f+="domain=."+d+";"),e.cookie=f+"path=/"},a}(),AdvancedAdFormats=function(){function a(a,b){this.adFormat=a,this.containerId=b}return a.prototype.CreateAdvancedAdFormatContainer=function(){return this.adFormat===AdFormatType.StickyFooter?this.CreateStickyFooterContainer(this.containerId):this.adFormat===AdFormatType.ScrollingBanner?this.CreateScrollingBannerContainer(this.containerId):void 0},a.prototype.IsUserOptout=function(){return this.adFormat===AdFormatType.StickyFooter&&"true"===CookieHelper.GetCookie("cto_sticky_closed")},a.prototype.CreateStickyFooterContainer=function(a){var b=document.createElement("div");b.style.position="fixed",b.style.zIndex="2147483646",b.style.bottom="0",b.style.left="0",b.style.padding="0",b.style.borderColor="rgb(196, 196, 196)",b.style.width="100%",b.style.backgroundColor="rgba(245, 245, 245, 0.54902)",b.style.borderStyle="solid",b.style.borderWidth="1px";var c=document.createElement("a");b.appendChild(c),c.style.backgroundColor="rgb(221, 221, 221)",c.style.backgroundImage="url('//static.criteo.net/images/criteo/publishertag/close.png')",c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="center",c.style.display="block",c.style.position="absolute",c.style.left="0",c.style.top="-24px",c.style.width="23px",c.style.height="24px",c.style.borderBottomColor="#6d6c71",c.style.cursor="pointer",c.onclick=function(){b.style.display="none",CookieHelper.SetCookie("cto_sticky_closed","true",24)};var d=document.createElement("div");if(b.appendChild(d),d.id="cto_sticky",d.style.margin="0 auto",d.style.display="table",void 0===a||""===a)document.body.appendChild(b);else{var e=document.getElementById(a);e.appendChild(b)}return d.id},a.prototype.CreateScrollingBannerContainer=function(a){var b=this;return void 0===a||""===a?(this.scrollingDiv=document.createElement("div"),this.scrollingDiv.id="cto_scrolling",document.body.appendChild(this.scrollingDiv)):this.scrollingDiv=document.getElementById(a),this.scrollingContainerOffsetTop=this.scrollingDiv.offsetTop,window.addEventListener?window.addEventListener("scroll",function(){b.SetScrollingContainerPosition()},!1):window.attachEvent("onscroll",function(){b.SetScrollingContainerPosition()}),this.SetScrollingContainerPosition(),this.scrollingDiv.id},a.prototype.SetScrollingContainerPosition=function(){var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;a>=this.scrollingContainerOffsetTop-10?(this.scrollingDiv.style.position="fixed",this.scrollingDiv.style.top="10px"):(this.scrollingDiv.style.position="static",this.scrollingDiv.style.top="auto")},a}(),DisplayContext;!function(a){a[a.InFriendlyIframe=1]="InFriendlyIframe",a[a.InUnfriendlyIframe=2]="InUnfriendlyIframe",a[a.DirectIntegration=3]="DirectIntegration"}(DisplayContext||(DisplayContext={}));var DomManipulationTools=function(){function a(){}return a.getHighestAccessibleWindow=function(a){var b=a,c=!1;try{for(;b.parent.document!==b.document;){if(!b.parent.document){c=!0;break}b=b.parent}}catch(a){c=!0}return{topFrame:b,err:c}},a.inIframe=function(){try{return window.self!==window.top}catch(a){return!0}},a}(),ViewabilityComputer=function(){function a(){}return a.GetAtfRatio=function(b,c){var d=document.getElementById(c);if(b.displayContext===DisplayContext.DirectIntegration){if(null!==d)return a.GetRatioAboveFold(d);document.write("<div id='compute_visibility_helper' width='0px' height='0px'></div>");var e=document.getElementById("compute_visibility_helper"),f=a.GetRatioAboveFold(e);return e.parentElement.removeChild(e),f}if(b.displayContext===DisplayContext.InFriendlyIframe)return a.GetRatioAboveFold(frameElement)},a.GetRatioAboveFold=function(a){var b=DomManipulationTools.getHighestAccessibleWindow(window).topFrame,c=b.document,d=b.innerHeight||c.documentElement.clientHeight||c.body.clientHeight,e=a.getBoundingClientRect(),f=c.documentElement.scrollTop||c.body.scrollTop;return d>=e.bottom+f?1:d<=e.top+f?0:(d-e.top-f)/a.offsetHeight},a}(),__extends$15=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DisplayEvent=function(a){function b(b,c,d){var e=a.call(this,b)||this;return e.displayParameters=d,e.urlBuilder=c,e}return __extends$15(b,a),b.prototype.eval=function(a){this.displayParameters.atfRatio=ViewabilityComputer.GetAtfRatio(a.context,this.displayParameters.containerid)},b.prototype.buildCasUrl=function(a,b,c,d){return this.urlBuilder.buildUrl(this.displayParameters,a,b,c,d)},b}(AbstractEvent),HandlerType;!function(a){a[a.AFR=0]="AFR",a[a.AJS=1]="AJS"}(HandlerType||(HandlerType={}));var __extends$14=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DisplayEventAFR=function(a){function b(c,d,e){var f=a.call(this,b.NAME,c,d)||this;return f.respectsEyeoDeal=e,f}return __extends$14(b,a),b.prototype.eval=function(b){a.prototype.eval.call(this,b);var c=this.displayParameters.containerid,d=this.displayParameters.callbackSuccess,e=this.displayParameters.callbackError,f=this.buildCasUrl(b.context,HandlerType.AFR);if(b.context.isAdBlocked){if(!this.respectsEyeoDeal)return;this.loadIframe(f,c,d,e)}else this.loadIframe(f,c,d,e)},b.prototype.loadIframe=function(a,b,c,d){var e=document.createElement("iframe");e.src=a,e.id=b+"_cto_iframe",e.frameBorder="0",e.hspace=0,e.vspace=0,e.marginWidth="0px",e.marginHeight="0px",e.width="100%",e.height="100%",e.scrolling="no",e.onload=c,e.onerror=d;var f=document.getElementById(b);f.appendChild(e)},b.NAME="displayAfr",b}(DisplayEvent),__extends$16=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DisplayEventAsync=function(_super){function DisplayEventAsync(a,b){return _super.call(this,DisplayEventAsync.NAME,a,b)||this}return __extends$16(DisplayEventAsync,_super),DisplayEventAsync.prototype.eval=function(a){var b=this;_super.prototype.eval.call(this,a);var c=this.displayParameters.containerid,d=this.displayParameters.width,e=this.displayParameters.height,f=this.displayParameters.layout,g=this.displayParameters.callbackSuccess,h=this.displayParameters.callbackError,i=this.displayParameters.passbackCode;if(""===c||void 0===c)Log.Error("No containerid provided");else if(void 0!==f){var j=DisplayEventAsync.CHAPI_NAME+"="+encodeURIComponent(JSON.stringify(f)),k=function(){var f=b.getContainerSize(c,d,e),k=b.buildCasUrl(a.context,void 0,f.width,f.height);b.loadScriptAsync(k,j,g,h,i)};void 0!==d&&void 0!==e?k():window.addEventListener?window.addEventListener("load",k,!1):window.attachEvent("onload",k)}else{var l=this.buildCasUrl(a.context);this.loadScriptAsync(l,void 0,g,h,i)}},DisplayEventAsync.prototype.loadScriptAsync=function(url,data,callBackSuccess,callbackFail,passbackCode){var request=new AsyncRequest(url,data);request.send(function(responseText){var pb=passbackCode?passbackCode:function(){};eval(responseText),void 0!==callBackSuccess&&callBackSuccess(responseText)},function(a,b){void 0!==passbackCode&&passbackCode(),void 0!==callbackFail&&callbackFail(a,b)},passbackCode)},DisplayEventAsync.prototype.getContainerSize=function(a,b,c){var d=document.getElementById(a),e=DomManipulationTools.inIframe(),f=b?b:e?document.body.offsetWidth:d.offsetWidth,g=c?c:e?document.body.offsetHeight:d.offsetHeight;return(0===f||0===g||f<80||g<40)&&(g=void 0,f=void 0),{width:f,height:g}},DisplayEventAsync.NAME="displayEventAsync",DisplayEventAsync.CHAPI_NAME="publisherCreativeConfiguration",DisplayEventAsync}(DisplayEvent),__extends$17=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DisplayEventSync=function(a){function b(c,d){return a.call(this,b.NAME,c,d)||this}return __extends$17(b,a),b.prototype.eval=function(b){a.prototype.eval.call(this,b);var c=this.buildCasUrl(b.context);this.loadScriptSync(c)},b.prototype.loadScriptSync=function(a){document.write("<script type='text/javascript' src='"+a+"'></script>")},b.NAME="displaySync",b}(DisplayEvent),__extends$18=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DisplayInputParameters=function(a){function b(b){var c=a.call(this)||this;return c.zoneid=void 0,c.async=void 0,c.containerid=void 0,c.width=void 0,c.height=void 0,c.callbackSuccess=void 0,c.callbackError=void 0,c.callIfNotAdblocked=void 0,c.passbackCode=void 0,c.publisherUrl=void 0,c.overridenWpdt0=void 0,c.overridenCt0=void 0,c.layout=void 0,c.atfRatio=void 0,c.adFormat=AdFormatType.Classic,c.overrideZoneFloor=!0,c.collapseContainerIfNotAdblocked=!0,c.extraData={},c.addParameter("zoneId",function(a){c.zoneid=a}),c.addParameter("async",function(a){c.async=a===!0}),c.addParameter("containerId",function(a){c.containerid=a}),c.addParameter("width",function(a){c.width=a}),c.addParameter("height",function(a){c.height=a}),c.addParameter("callbackSuccess",function(a){c.callbackSuccess=a}),c.addParameter("callbackError",function(a){c.callbackError=a}),c.addParameter("callIfNotAdblocked",function(a){c.callIfNotAdblocked=a}),c.addParameter("passbackCode",function(a){c.passbackCode=a}),c.addParameter("layout",function(a){c.layout=a}),c.addParameter("publisherCreativeConfiguration",function(a){c.layout=a}),c.addParameter("extraData",function(a){c.extraData=a}),c.addParameter("publisherUrl",function(a){c.publisherUrl=a}),c.addParameter("wpdt0",function(a){c.overridenWpdt0=a}),c.addParameter("ct0",function(a){c.overridenCt0=a}),c.addParameter("overrideZoneFloor",function(a){c.overrideZoneFloor=a}),c.addParameter("collapseContainerIfNotAdblocked",function(a){c.collapseContainerIfNotAdblocked=a}),c.addParameter("adFormat",function(a){c.adFormat=c.parseAdFormat(a)}),a.prototype.tryFillParameters.call(c,b),c}return __extends$18(b,a),b.prototype.parseAdFormat=function(a){switch(a.toLowerCase()){case"stickyfooter":return AdFormatType.StickyFooter;case"scrollingbanner":return AdFormatType.ScrollingBanner;default:return AdFormatType.Classic}},b}(InputParameters),DisplayUrlBuilder=function(){function a(){}return a.prototype.buildUrl=function(b,c,d,e,f){var g;g=d===HandlerType.AFR?a.CAS_URL_AFR:a.CAS_URL_AJS;var h="https:"===c.protocol?"https:":"http:",i=h+g+"?ptv="+PublisherTagVersion;if(c.isAdBlocked===!0){var j=this.getAbpParameter(b,c);i+="&abp="+String(j)}d!==HandlerType.AFR&&(i+=void 0!==b.containerid&&""!==b.containerid?"&containerid="+encodeURIComponent(b.containerid):""),i+="&zoneid="+String(b.zoneid),i+=e?"&width="+e:"",i+=f?"&height="+f:"",i+=c.ctoIdOnPublisherDomain?"&idcpy="+c.ctoIdOnPublisherDomain:"",i+=c.idfs?"&idfs="+c.idfs:"",i+=c.secureId?"&sid="+c.secureId:"",i+=c.isOptOut?"&optout=1":"",i+="&cb="+String(CacheBusterGenerator.generateCacheBuster()),i+="&nodis="+(c.dising?"0":"1"),i+=c.charset?"&charset="+c.charset:"",i+=b.overridenCt0?"&ct0="+encodeURIComponent(b.overridenCt0):c.ct0?"&ct0="+encodeURIComponent(c.ct0):"",i+=b.overridenWpdt0?"&wpdt0="+encodeURIComponent(b.overridenWpdt0):c.wpdt0?"&wpdt0="+encodeURIComponent(c.wpdt0):"",i+=b.publisherUrl?"&publisherurl="+encodeURIComponent(b.publisherUrl):"",i+=c.getContextFlags();for(var k in b.extraData)void 0!==b.extraData[k]&&(i+="&"+k+"="+encodeURIComponent(b.extraData[k]));i+=b.passbackCode?"&dlp=1":"",b.integrationMode!==IntegrationMode.Unspecified&&(i+="&im="+b.integrationMode),i+="&dc="+c.displayContext;var l=Math.round(100*b.atfRatio)/100;return i+=void 0!==b.atfRatio?"&atfr="+l:"",i+=c.highestAccessibleUrl?"&loc="+encodeURIComponent(c.highestAccessibleUrl).substring(0,1600):""},a.prototype.getAbpParameter=function(a,b){var c=b.isAdBlocked?1:0,d=a.overrideZoneFloor?0:2;return c|d},a.CAS_URL_AJS="//cas.criteo.com/delivery/ajs.php",a.CAS_URL_AFR="//cas.criteo.com/delivery/afr.php",a}(),EyeoDealValidator=function(){function a(){}return a.prototype.respectsEyeoDeal=function(b){var c=document.getElementById(b),d=this.respectsSizeConstraints(c);if(!d)return Log.Debug("The element "+b+"does not respect Eyeo acceptable ads size constraints"),!1;var e=this.getNewRatiosFeatures(c),f=e.respectsAdRatioConstraint;return f?(a.atfRatio=e.newAtfRatio,a.btfRatio=e.newBtfRatio):Log.Debug("The element "+b+"does not respect Eyeo acceptable ads ratio constraints"),f},a.prototype.respectsSizeConstraints=function(a){var b=this.getAdLocationAttribute(a);switch(b){case"above-content":return a.offsetHeight<=200;case"in-content":return!1;case"below-content":return a.offsetHeight<=400;case"side-content":return a.offsetWidth<=350;default:return void 0!==b&&Log.Error("Unknown data-ad-loc attribute : "+b),!0}},a.prototype.getAdLocationAttribute=function(a){return a.getAttribute("data-ad-loc")?a.getAttribute("data-ad-loc"):void 0},a.prototype.getNewRatiosFeatures=function(b){var c=ViewabilityComputer.GetRatioAboveFold(b),d=b.offsetHeight*b.offsetWidth,e=screen.width*screen.height,f=a.atfRatio+c*d/e,g=a.btfRatio+(1-c)*d/e,h=f<=.15&&g<=.25;return{respectsAdRatioConstraint:h,newAtfRatio:f,newBtfRatio:g}},a.atfRatio=0,a.btfRatio=0,a}(),Polyfills=function(){function a(){}return a.LoadPolyfills=function(){a.DefineIsArray(),a.DefineIndexOf(),a.DefineFilter()},a.DefineIsArray=function(){Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)})},a.DefineIndexOf=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===b&&(b=0),void 0===this)throw new TypeError("'this' is null or not defined");var c=this.length;if(0===c)return-1;if(b>=c)return-1;for(var d=Math.max(b>=0?b:c-Math.abs(b),0);d<c;){if(d in this&&this[d]===a)return d;d++}return-1})},a.DefineFilter=function(){Array.prototype.filter||(Array.prototype.filter=function(a){if(void 0===this||void 0===this)throw new TypeError;var b=this.length;if("function"!=typeof a)throw new TypeError;for(var c=[],d=arguments.length>=2?arguments[1]:void 0,e=0;e<b;e++)if(e in this){var f=this[e];a.call(d,f,e,this)&&c.push(f)}return c})},a}(),AdBlocker=function(){function a(){this.allowedPixelLoaded=!1,this.blockedPixelFailed=!1}return a.prototype.isAdBlocked=function(b,c){var d=this,e="https:"===b?"https:":"http:",f=e+a.allowedPixelUrl,g=e+a.blockedPixelUrl;this.createPixel(f,function(){d.allowedPixelLoaded=!0,d.blockedPixelFailed===!0&&c(!0)},function(){}),this.createPixel(g,function(){c(!1)},function(){d.blockedPixelFailed=!0,d.allowedPixelLoaded===!0&&c(!0)})},a.prototype.createPixel=function(a,b,c){var d=document.createElement("img");d.src=a,d.height=1,d.width=1,d.style.display="none",d.onload=b,d.onerror=c},a.allowedPixelUrl="//static.criteo.net/images/pixel.gif?ch=1",a.blockedPixelUrl="//static.criteo.net/images/pixel.gif?ch=2",a}(),CookieSynchronizer=function(){function a(a){this.topWin=a,this.topDoc=a.document,this.localStorageHelper=new LocalStorageHelper(this.topWin),this.localStorageEnabled=this.localStorageHelper.checkLocalStorage()}return a.isSafariBrowser=function(){return null!==navigator.userAgent.match(a.SAFARI_CHECK_REGEX)},a.prototype.synchronizeCriteoUid=function(b){var c=this;if((b||a.isSafariBrowser())&&this.topWin.addEventListener)if("complete"===this.topDoc.readyState)this.appendGumIframeIfDoesNotExist();else{var d=function(){c.topDoc.removeEventListener("DOMContentLoaded",d),c.topWin.removeEventListener("load",d),c.appendGumIframeIfDoesNotExist()};this.topWin.addEventListener("load",d,!1),this.topDoc.addEventListener("DOMContentLoaded",d,!1)}},a.prototype.appendGumIframeIfDoesNotExist=function(){var b=this,c=this.createGumIframe(),d=function(a){var c=a.data;c.isCriteoMessage&&(c.optout?(b.setClientSideOptOut(),b.deleteClientSideUid(),b.deleteClientSideIdfs(),b.deleteClientSideSecureId()):(c.uid&&b.setClientSideUid(c.uid),c.idfs&&b.setClientSideIdfs(c.idfs),c.removeSid?b.deleteClientSideSecureId():c.sid&&b.setClientSideSecureId(c.sid)))};this.topDoc.getElementById(a.SYNCFRAME_ID)||(this.topWin.addEventListener("message",d,!1),this.topDoc.body.appendChild(c))},a.prototype.getClientSideUid=function(){return this.getFromAllStorages(a.GUID_COOKIE_NAME)},a.prototype.setClientSideUid=function(b){this.writeOnAllStorages(a.GUID_COOKIE_NAME,b,a.GUID_RETENTION_TIME_HOUR)},a.prototype.deleteClientSideUid=function(){this.deleteFromAllStorage(a.GUID_COOKIE_NAME)},a.prototype.getClientSideOptOut=function(){var b=this.getFromAllStorages(a.OPTOUT_COOKIE_NAME);return Boolean(b)},a.prototype.setClientSideOptOut=function(){this.writeOnAllStorages(a.OPTOUT_COOKIE_NAME,"1",a.OPTOUT_RETENTION_TIME_HOUR)},a.prototype.deleteClientSideIdfs=function(){this.deleteFromAllStorage(a.IDFS_COOKIE_NAME)},a.prototype.getClientSideIdfs=function(){return this.getFromAllStorages(a.IDFS_COOKIE_NAME)},a.prototype.setClientSideIdfs=function(b){this.writeOnAllStorages(a.IDFS_COOKIE_NAME,b,a.GUID_RETENTION_TIME_HOUR)},a.prototype.getClientSideSecureId=function(){return this.getFromAllStorages(a.SECURE_ID_COOKIE_NAME)},a.prototype.setClientSideSecureId=function(b){this.writeOnAllStorages(a.SECURE_ID_COOKIE_NAME,b,a.GUID_RETENTION_TIME_HOUR)},a.prototype.deleteClientSideSecureId=function(){this.deleteFromAllStorage(a.SECURE_ID_COOKIE_NAME)},a.prototype.getLocalWebId=function(){var b=this.getFromAllStorages(a.LOCAL_WEB_ID_COOKIE_NAME);return b||(b=generateUuid(),this.writeOnAllStorages(a.LOCAL_WEB_ID_COOKIE_NAME,b,a.GUID_RETENTION_TIME_HOUR)),b},a.prototype.createGumIframe=function(){var b=this.topDoc.createElement("iframe"),c=this.buildSyncframeSrc();return b.src=c,b.id=a.SYNCFRAME_ID,b.style.display="none",b},a.prototype.writeOnAllStorages=function(a,b,c){this.localStorageEnabled&&this.localStorageHelper.setItem(a,b),CookieHelper.SetCookie(a,b,c,this.topDoc,!0)},a.prototype.getFromAllStorages=function(a){var b,c=CookieHelper.GetCookie(a,this.topWin.document);return this.localStorageEnabled&&(b=this.localStorageHelper.getItem(a)),c||b},a.prototype.deleteFromAllStorage=function(a){CookieHelper.DeleteCookie(a,this.topDoc,!0),this.localStorageEnabled&&this.localStorageHelper.removeItem(a)},a.prototype.getTld=function(){var b=CookieHelper.SetCookie(a.TLD_TEST_COOKIE_NAME,"test",1,this.topDoc,!0);return CookieHelper.DeleteCookie(a.TLD_TEST_COOKIE_NAME,this.topDoc,!0),b},a.prototype.buildSyncframeSrc=function(){var a="https://gum.criteo.com/syncframe",b=this.getClientSideUid(),c=this.getClientSideIdfs(),d=this.getClientSideOptOut(),e=this.getClientSideSecureId(),f=this.getLocalWebId(),g=this.getTld(),h="publishertag",i=PublisherTagVersion;return a+="#"+JSON.stringify({optout:d,uid:b,idfs:c,sid:e,origin:h,version:i,lwid:f,tld:g})},a.GUID_COOKIE_NAME="cto_idcpy",a.GUID_RETENTION_TIME_HOUR=9360,a.IDFS_COOKIE_NAME="cto_idfs",a.SECURE_ID_COOKIE_NAME="cto_sid",a.LOCAL_WEB_ID_COOKIE_NAME="cto_lwid",a.OPTOUT_COOKIE_NAME="cto_optout",a.OPTOUT_RETENTION_TIME_HOUR=43200,a.TLD_TEST_COOKIE_NAME="cto_pub_test_tld",a.SYNCFRAME_ID="criteo-syncframe",a.SAFARI_CHECK_REGEX=/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[^ ]+ \(KHTML, like Gecko\) Version\/([^ ]+)( Mobile\/[^ ]+)? Safari\/[^ ]+$/i,a}(),Context=function(){function a(a,b){this.charset=a.charset?a.charset:a.characterSet?a.characterSet:"";var c=DomManipulationTools.getHighestAccessibleWindow(b);this.synchronizeCriteoUid(c),this.displayContext=this.getDisplayContext(c),this.highestAccessibleUrl=this.getHighestAccessibleUrl(c);var d=this.getQueryStringParams(this.highestAccessibleUrl);this.debugMode="1"===d.pbt_debug||!1,this.noLog="1"===d.pbt_nolog||!1,this.debugMode&&SetLogLevel(LogLevel.Debug),this.location=b.location,this.protocol=b.location.protocol,this.dising=!1,this.ct0=void 0,this.wpdt0=void 0,this.isAdBlocked=void 0,this.rtaVarNames=[]}return a.prototype.getContextFlags=function(){var a="";return a+=this.debugMode?"&debug=1":"",a+=this.noLog?"&nolog=1":""},a.prototype.getHighestAccessibleUrl=function(a){var b=a.topFrame,c=a.err,d="";if(c)try{if(d=b.top.location.href,!d){var e=b.location.ancestorOrigins;d=e[e.length-1]}}catch(a){d=b.document.referrer}else d=b.location.href;return d},a.prototype.getDisplayContext=function(a){return DomManipulationTools.inIframe()?a.err?DisplayContext.InUnfriendlyIframe:DisplayContext.InFriendlyIframe:DisplayContext.DirectIntegration},a.prototype.getQueryStringParams=function(a){var b={},c=a.split("?");if(c.length>1)for(var d=c[1].split("&"),e=0,f=d;e<f.length;e++){var g=f[e],h=g.split("=");b[tryDecodeURIComponent(h[0])]=tryDecodeURIComponent(h[1])}return b},a.prototype.synchronizeCriteoUid=function(a){var b=a.topFrame,c=new CookieSynchronizer(b);this.ctoIdOnPublisherDomain=c.getClientSideUid(),this.isOptOut=c.getClientSideOptOut(),this.idfs=c.getClientSideIdfs(),this.secureId=c.getClientSideSecureId(),c.synchronizeCriteoUid()},a.prototype.getIdfs=function(){return this.idfs},a.prototype.setIdfs=function(a){this.idfs=a},a}(),StandaloneDirectBidder=function(){function a(){this.bids={},this.lineItemRanges=[]}return a}(),PublisherTag=function(){function a(){this.standaloneBidder=new StandaloneDirectBidder,this.canProcessConditionalEvents=void 0,this.events=[],this.context=new Context(document,window),Log.Debug("Publisher Tag loaded")}return a.prototype.push=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c=0,d=a;c<d.length;c++){var e=d[c];this.events.push(e)}this.evalEvents()},a.prototype.checkAdblocker=function(){var a=this;if(void 0===this.canProcessConditionalEvents){this.canProcessConditionalEvents=!1;var b=new AdBlocker;b.isAdBlocked(this.context.protocol,function(b){a.context.isAdBlocked=b,a.canProcessConditionalEvents=!0,a.evalEvents()})}},a.prototype.evalEvents=function(){for(var a=0;a<this.events.length;)if("conditionalEvent"===this.events[a].name&&this.canProcessConditionalEvents===!1)a++;else{var b=this.events.splice(a,1);b[0].eval(this)}},a.VERSION=PublisherTagVersion,a}(),__extends$20=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DefaultCrtgContentName="crtg_content",DefaultCrtgRtaCookieName="crtg_rta",RtaInputParameters=function(a){function b(b){var c=a.call(this)||this;return c.networkId=void 0,c.crtgContentName=void 0,c.crtgRtaCookieName=void 0,c.adserver=void 0,c.addParameter("networkId",function(a){c.networkId=a}),c.addParameter("varName",function(a){c.crtgContentName=a}),c.addParameter("cookieName",function(a){c.crtgRtaCookieName=a}),c.addParameter("adserver",function(a){c.adserver=a}),a.prototype.tryFillParameters.call(c,b),c}return __extends$20(b,a),b}(InputParameters),__extends$19=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),RtaEvent=function(_super){function RtaEvent(a,b){var c=_super.call(this,RtaEvent.NAME)||this;return c.urlBuilder=a,c.parameters=b,c}return __extends$19(RtaEvent,_super),RtaEvent.prototype.eval=function(a){_super.prototype.eval.call(this,a);var b=this.urlBuilder.buildUrl(this.parameters,a.context),c=new AsyncRequest(b),d=function(a,c){return Log.Error("An error occured while calling "+b)},e=this.parameters.crtgContentName?this.parameters.crtgContentName:DefaultCrtgContentName,f=a.context.rtaVarNames.indexOf(e,0);f===-1&&a.context.rtaVarNames.push(e),c.send(this.executeScript,d)},RtaEvent.prototype.executeScript=function(responseText){eval(responseText)},RtaEvent.NAME="rtaEvent",RtaEvent}(AbstractEvent),__extends$21=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),RtaTargetingEvent=function(a){function b(c,d){var e=a.call(this,b.NAME)||this;return e.adserver=c,e.targetingValues=d,e}return __extends$21(b,a),b.prototype.eval=function(a){if(void 0===this.adserver)return void Log.Error("undefined adserver");switch(this.adserver.toLowerCase()){case"dfp":this.setTargetingDFP(this.targetingValues);break;default:Log.Error("unknown adserver '"+this.adserver+"'")}},b.prototype.setTargetingDFP=function(a){var b=new DFPKeyValueTargeter;b.setKeyValuesForAllSlots(a)},b.NAME="rtaTargetingEvent",b}(AbstractEvent),RtaUrlBuilder=function(){function a(){}return a.prototype.buildUrl=function(b,c){var d="https:"===c.protocol?"https:":"http:",e=d+a.RTA_URL+"?ptv="+PublisherTagVersion;return c.isAdBlocked===!0&&(e+="&abp=1"),e+="&netid="+String(b.networkId),e+=c.ctoIdOnPublisherDomain?"&idcpy="+c.ctoIdOnPublisherDomain:"",e+=c.idfs?"&idfs="+c.idfs:"",e+=c.secureId?"&sid="+c.secureId:"",e+=c.isOptOut?"&optout=1":"",e+=b.crtgRtaCookieName?"&cookieName="+encodeURIComponent(b.crtgRtaCookieName):"",e+=b.crtgContentName?"&varName="+encodeURIComponent(b.crtgContentName):"",e+="&rnd="+String(CacheBusterGenerator.generateCacheBuster()),e+=c.getContextFlags(),b.integrationMode!==IntegrationMode.Unspecified&&(e+="&im="+b.integrationMode),e},a.RTA_URL="//rtax.criteo.com/delivery/rta/rta.js",a}(),passbackProfileId=206;window.criteo_pubtag||(Polyfills.LoadPolyfills(),window.criteo_pubtag=new PublisherTag),window.Criteo={CallRTA:CallRTA,ComputeDFPTargetingForAMP:ComputeDFPTargetingForAMP,SetTargeting:SetTargeting,DisplayAd:DisplayAd,DisplayAcceptableAdIfAdblocked:DisplayAcceptableAdIfAdblocked,ComputeStandaloneDFPTargeting:ComputeStandaloneDFPTargeting,GetBids:GetBids,GetBidsForAdUnit:GetBidsForAdUnit,RenderAd:RenderAd,RequestBids:RequestBids,SetDFPKeyValueTargeting:SetDFPKeyValueTargeting,SetLineItemRanges:SetLineItemRanges,Passback:{RequestBids:RequestBidsPassback,RenderAd:RenderAdPassback},PubTag:{Adapters:{AMP:AMP,Prebid:Prebid},Context:{SetIdfs:SetIdfs,GetIdfs:GetIdfs},DirectBidding:{DirectBiddingEvent:DirectBiddingEvent,DirectBiddingEventWithCaching:DirectBiddingEventWithCaching,DirectBiddingSlot:DirectBiddingSlot,DirectBiddingUrlBuilder:DirectBiddingUrlBuilder,Size:Size},RTA:{DefaultCrtgContentName:DefaultCrtgContentName,DefaultCrtgRtaCookieName:DefaultCrtgRtaCookieName}},events:window.Criteo?window.Criteo.events:[],usePrebidEvents:!window.Criteo||window.Criteo.usePrebidEvents},window.Criteo.events=createEventProcessor(window.Criteo.events)}();
var AufBid=window.AufBid||{};AufBid.CriteoAdapter=(function(){var PRICE_RANGE='0..5:0.05;5..20:0.25';return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);if(!window.Criteo){this.disable();return;}},requestBids:function(){if(this.disabled){return;}
var adUnits={placements:[]};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){if(this.name.indexOf('_adblock')<0){adUnits.placements.push({slotid:this.manager.callId+'-'+formatId+'-'+placement.tag,zoneid:placement.tag});}else{var placementTag=placement.tag;var placementFormatId=formatId;af_addEvent(window,'load',function(){Criteo.DisplayAcceptableAdIfAdblocked({'zoneid':placementTag,'containerid':'sas_'+placementFormatId});});}},this);}}
var that=this;var callback=function(response,httpStatus){that.getBidsFromResponse(response,httpStatus);};if(window.criteo_pubtag&&window.criteo_pubtag.standaloneBidder){window.criteo_pubtag.standaloneBidder.bids={};}
Criteo.SetLineItemRanges(PRICE_RANGE);Criteo.RequestBids(adUnits,callback,this.manager.timeout);},getBidsFromResponse:function(response,httpStatus){this.log('Get bids from response');if(httpStatus===204||!response||response.length===0){this.log('No bid');return;}
response.forEach(function(rawBid){var impressionId=rawBid.impressionId.split('-');var formatId=impressionId[1];var placementId=impressionId[2];this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:rawBid.width+'x'+rawBid.height,cpmRaw:rawBid.cpm},{bucket:rawBid.cpm_bucket,creativeHTML:'<html>\n'
+'<head><script src ="'+rawBid.displayUrl+'"></script></head>\n'
+'<body><!-- Criteo Ad Tag --></body>\n'
+'</html>',impressionId:rawBid.impressionId,placementHeight:rawBid.height,placementWidth:rawBid.width,zoneId:rawBid.zoneId});},this);}});})();
(function(window){var h="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function u(){u=function(){};n.Symbol||(n.Symbol=y)}var z=0;function y(a){return"jscomp_symbol_"+(a||"")+z++}
function B(){u();var a=n.Symbol.iterator;a||(a=n.Symbol.iterator=n.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&h(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return C(this)}});B=function(){}}function C(a){var b=0;return D(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function D(a){B();a={next:a};a[n.Symbol.iterator]=function(){return this};return a}function E(a){B();var b=a[Symbol.iterator];return b?b.call(a):C(a)}
function F(a,b){if(b){for(var c=n,d=a.split("."),e=0;e<d.length-1;e++){var g=d[e];g in c||(c[g]={});c=c[g]}d=d[d.length-1];e=c[d];g=b(e);g!=e&&null!=g&&h(c,d,{configurable:!0,writable:!0,value:g})}}F("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&(a[g]=e[g])}return a}});function H(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var g=a[e];if(b.call(c,g,e,a))return{u:e,G:g}}return{u:-1,G:void 0}}F("Array.prototype.find",function(a){return a?a:function(a,c){return H(this,a,c).G}});F("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});F("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));for(var e=b.length,g=c||0;g<e;g++)if(b[g]==a||Object.is(b[g],a))return!0;return!1}});F("Promise",function(a){function b(a){this.b=0;this.i=void 0;this.a=[];var b=this.g();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}}function c(){this.a=null}if(a)return a;c.prototype.b=function(a){this.a||(this.a=[],this.g());this.a.push(a)};c.prototype.g=function(){var a=this;this.f(function(){a.i()})};var d=n.setTimeout;c.prototype.f=function(a){d(a,0)};c.prototype.i=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(m){this.h(m)}}}this.a=null};c.prototype.h=function(a){this.f(function(){throw a;})};b.prototype.g=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.U),reject:a(this.h)}};b.prototype.U=function(a){if(a===this)this.h(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.V(a);else{var c;a:switch(typeof a){case"object":c=null!=a;break a;case"function":c=!0;break a;default:c=!1}c?this.P(a):this.w(a)}};b.prototype.P=function(a){var b=void 0;try{b=a.then}catch(l){this.h(l);return}"function"==typeof b?this.H(b,a):this.w(a)};b.prototype.h=function(a){this.A(2,a)};b.prototype.w=function(a){this.A(1,a)};b.prototype.A=function(a,b){if(0!=this.b)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.b);this.b=a;this.i=b;this.N()};b.prototype.N=function(){if(this.a){for(var a=this.a,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.a=null}};var e=new c;b.prototype.V=function(a){var b=this.g();a.f(b.resolve,b.reject)};b.prototype.H=function(a,b){var c=this.g();try{a.call(b,c.resolve,c.reject)}catch(m){c.reject(m)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(G){g(G)}}:b}var e,g,f=new b(function(a,b){e=a;g=b});this.f(d(a,e),d(c,g));return f};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.f=function(a,b){function c(){switch(d.b){case 1:a(d.i);break;case 2:b(d.i);break;default:throw Error("Unexpected state: "+d.b);}}var d=this;this.a?this.a.push(function(){e.b(c)}):e.b(c)};b.resolve=function(a){return a instanceof b?a:new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(c,d){for(var e=E(a),g=e.next();!g.done;g=e.next())b.resolve(g.value).f(c,d)})};b.all=function(a){var c=E(a),d=c.next();return d.done?b.resolve([]):new b(function(a,e){function g(b){return function(c){f[b]=c;l--;l||a(f)}}var f=[],l=0;do f.push(void 0),l++,b.resolve(d.value).f(g(f.length-1),e),d=c.next();while(!d.done)})};b.$jscomp$new$AsyncExecutor=function(){return new c};return b});F("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});F("Array.prototype.findIndex",function(a){return a?a:function(a,c){return H(this,a,c).u}});function J(a){a=K(a);return Object.keys(a).map(function(b){return b+"\x3d"+a[b]}).join("\x26")}function K(a){var b={},c={},d;for(d in a)c.key=d,a.hasOwnProperty(c.key)&&a[c.key]&&(Array.isArray(a[c.key])?b[c.key]=a[c.key].join(","):"object"===typeof a[c.key]?(c.j=K(a[c.key]),Object.keys(c.j).map(function(a){return function(c){b[a.key+"."+c]=a.j[c]}}(c))):b[c.key]=a[c.key]),c={key:c.key,j:c.j};return b}
function L(a){return a.substring(a.indexOf("?")+1).split("\x26").reduce(function(a,c){var b=c.split("\x3d");a[b[0]]=b[1];return a},{})};function M(){var a=0;return function(){a++;return a}};function N(a){var b=Math.pow(10,3);return Math.round(a*b)/b};function O(a,b){var c={method:"GET",withCredentials:!0},c=void 0===c?{}:c;try{var d,e=!1,g=c.method||"GET";window.XMLHttpRequest?(d=new window.XMLHttpRequest,void 0===d.responseType&&(e=!0)):e=!0;e?(d=new window.XDomainRequest,d.onload=function(){b(d.responseText,d)},d.onerror=function(){console.log("xhr onerror")},d.ontimeout=function(){console.log("xhr timeout")},d.onprogress=function(){console.log("xhr onprogress")}):d.onreadystatechange=function(){4===d.readyState&&b&&b(d.responseText,d)};if("GET"===g){var f=aa(a);a=ba(f)}d.open(g,a);e||(c.withCredentials&&(d.withCredentials=!0),c.Y&&d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-Type",c.contentType||"text/plain"));d.send(void 0);return!0}catch(l){return console.error("xhr construction",l),!1}}
function aa(a){var b=document.createElement("a");b.href=decodeURIComponent(a);return{protocol:(b.protocol||"").replace(/:$/,""),hostname:b.hostname,port:+b.port,pathname:b.pathname&&b.pathname.replace(/^(?!\/)/,"/"),search:ca(b.search||""),hash:(b.hash||"").replace(/^#/,""),host:b.host}}function ba(a){return(a.protocol||"http")+"://"+(a.host||a.hostname+(a.port?":"+a.port:""))+(a.pathname||"")+(a.search?"?"+da(a.search||""):"")+(a.hash?"#"+a.hash:"")}
function ca(a){return a?a.replace(/^\?/,"").split("\x26").reduce(function(a,c){var b=c.split("\x3d"),e=E([b.shift(),b.join("\x3d")]),b=e.next().value,e=e.next().value;/\[\]$/.test(b)?(b=b.replace("[]",""),a[b]=a[b]||[],a[b].push(e)):a[b]=e||"";return a},{}):{}}function da(a){return Object.keys(a).filter(function(a){return"callback"!==a&&"jsonp"!==a}).map(function(b){return Array.isArray(a[b])?a[b].map(function(a){return b+"[]\x3d"+a}).join("\x26"):b+"\x3d"+a[b]}).join("\x26")};function P(a){var b=document.createElement("script");b.async=!0;b.src=a;a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)};function ea(a,b){return a.map(function(a){return a.oxAdUnitId&&"display"===a.type||Q(a)?a:b.find(function(b){return a.getSlotElementId&&b.divId===a.getSlotElementId()})}).filter(function(a){return a})}function fa(a){return a.reduce(function(a,c){Q(c)?a[1].push(c):a[0].push(c);return a},[[],[]])}function Q(a){return a.oxAdUnitId&&"video"===a.type};function R(a){return a.reduce(function(a,c){return a.concat(Array.isArray(c)?R(c):c)},[])};var ga=M(),S=null;function U(a){a=a?a:{};this.id=ga();this.adMapping=a;this.a=this.f=1;Q(a)?this.type="video":(this.type="display",this.divId=a.divId,this.h=a.oxAdUnitId)}function V(a){var b;b=void 0===b?1:b;S?a=S(a,b):(a=1E3*a/(void 0===b?1:b),b=Math.min(a,2E4),0<b&&25>b&&(b=25),a=1E3>a?5*Math.round(b/50):5E3>a?10*Math.round(b/100):50*Math.round(b/500));return a}
U.prototype.fill=function(a){a=a?a:{};this.D();this.adUnit=a;"video"===this.type?(this.b=a.cache_key,this.pub_rev=a.pub_rev?1E3*parseFloat(a.pub_rev):0,this.cpm=a.pub_rev?N(parseFloat(a.pub_rev)):0,this.per_colo_domain=a.per_colo_domain,this.ph=a.ph):(this.b=a.ts,this.pub_rev=a.pub_rev?parseInt(a.pub_rev,10):0,this.cpm=a.pub_rev?N(parseInt(a.pub_rev,10)/1E3):0,this.ad=a.html,this.g=a.deal_id,this.i=1===a.auct_win_is_deal,a.creative&&0<a.creative.length?(this.width=parseInt(a.creative[0].width,10),this.height=parseInt(a.creative[0].height,10),this.tracking=a.creative[0].tracking):this.adMapping.sizes&&0<this.adMapping.sizes.length&&(this.width=this.adMapping.sizes[0][0],this.height=this.adMapping.sizes[0][1]));return this};U.prototype.fill=U.prototype.fill;U.prototype.m=function(){var a=[V(this.cpm)];this.g&&a.push(this.g);this.i&&a.push("pmp"+V(this.cpm));a=a.join(",");return[this.width+"x"+this.height,a].join("_")};U.prototype.getOxTargetingValue=U.prototype.m;U.prototype.o=function(){return[this.width+"x"+this.height,V(this.adUnit&&this.adUnit.tbd||0)].join("_")};U.prototype.getSmartFloorTargetingValue=U.prototype.o;U.prototype.s=function(){return!(!this.adUnit||!this.adUnit.tbd)};U.prototype.hasSmartFloor=U.prototype.s;U.prototype.L=function(a){return this.R<(a||(new Date).getTime())-27E4};U.prototype.isExpired=U.prototype.L;U.prototype.D=function(){this.a=2};U.prototype.setFilled=U.prototype.D;U.prototype.l=function(){return 2<=this.a};U.prototype.isFilled=U.prototype.l;U.prototype.F=function(){this.a=3};U.prototype.setTargeted=U.prototype.F;U.prototype.M=function(){return 3<=this.a};U.prototype.isTargeted=U.prototype.M;U.prototype.C=function(){this.a=4};U.prototype.setDisplayed=U.prototype.C;U.prototype.O=function(){this.a=1};U.prototype.resetBidState=U.prototype.O;U.prototype.v=function(){return 4<=this.a};U.prototype.isDisplayed=U.prototype.v;function ha(a){a=a.map(function(a){return a.customKeyValuePairs});return a.filter(function(a){return a}).length?a.map(function(a){var b=a?Object.keys(a).map(function(b){var c=a[b],c=Array.isArray(c)?a[b]:[a[b]],c=c.filter(function(a){return["string","number","boolean"].includes(typeof a)}).join(",");return b+"\x3d"+c}).join("\x26"):"";return btoa(b.replace(/\+|\//g,function(a){return"+"===a?".":"_"}))}).join(","):""}
function ia(a,b,c,d){var e={};e.url=b.location.href&&encodeURIComponent(b.location.href);e.be=!0;e.auid=a.oxAdUnitId;e.bc="hb_lite_0.2.5";c&&(e.jsonp=c);d&&(e.tid=d);return J(e)}function ja(a){return a.filter(function(a){return a.floor&&!!a.floor}).length?a.map(function(a){return a.floor?Math.round(1E3*a.floor):0}).join(","):""}function ka(a){return a.map(function(a){return a.oxAdUnitId}).join("%2C")}
function la(a){return a.map(function(a){return Array.isArray(a.sizes)?a.sizes.map(function(a){return Array.isArray(a)?a[0]+"x"+a[1]:String(a)}).join(","):String(a.sizes)}).join("|")};var ma=M();function na(a,b){var c=(b&&b.document||window.document).body;c&&c.appendChild(oa(a,b))}function W(a,b,c,d,e){var g=a.tracking&&a.tracking.impression.match(/([^?]+\/)ri\?/),f={};f.bd=+new Date-b;f.bp=a.pub_rev;f.bs=d;f.bsq=a.f;f.bt=c;f.ca=0;f.ts=a.b;f.br=e?"t":a.pub_rev?"p":"0";g&&((new Image).src=g[1]+"bo?"+J(f),a.f++)}
function oa(a,b){var c=(b&&b.document||window.document).createElement("iframe");c.id="openx-pd"+ma();c.width="0";c.height="0";c.border="0px";c.frameBorder="0";c.hspace="0";c.marginHeight="0";c.marginWidth="0";c.scrolling="no";c.src=a||"about:blank";c.style.border="0";c.style.display="none";c.vspace="0";return c};function Y(a,b){this.adMappings=[];this.a=[];this.b=M();this.g=M();this.deliveryDomain="";this.singleRequest=!1;this.namespace="oxhbjs";this.timeLimit=2500;this.window=b||window;this.f=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;this.B(a);this.cmds={push:function(a){return a()}};return this}
Y.prototype.B=function(a){a=void 0===a?{}:a;this.deliveryDomain=a.deliveryDomain;this.timeLimit=a.timeLimit||this.timeLimit;this.singleRequest=void 0!==a.singleRequest?a.singleRequest:this.singleRequest;this.namespace=a.namespace||this.namespace;this.window[this.namespace]=this.window[this.namespace]||{};this.adMappings=a.adMappings||this.adMappings;this.contentTopicId=void 0!==a.contentTopicId?a.contentTopicId:this.contentTopicId;this.customKeyValuePairs=void 0!==a.customKeyValuePairs?a.customKeyValuePairs:this.customKeyValuePairs;a.customPriceBucket&&typeof a.customPriceBucket===Z&&(S=a.customPriceBucket);return this};Y.prototype.setConfig=Y.prototype.B;Y.prototype.K=function(a,b){function c(a,b,c,d){return new Promise(function(f){if(a){var l=new U(a),pa=(new Date).valueOf(),m="videoAdResponseHandler"+g.g(),v=ia(a,d,"window."+b+"."+m,A);d[b][m]=function(a,b,c){var d=!1,e=setTimeout(function(){d||(d=!0,c(l))},a);return function(f){var m=f;if("string"===typeof f)try{m=JSON.parse(f)}catch(sa){m={pub_rev:"",cache_key:"",per_colo_domain:"",ph:""}}l.fill({pub_rev:m.pub_rev,cache_key:m.cache_key,per_colo_domain:m.per_colo_domain,ph:m.ph});d||(d=!0,clearTimeout(e),c(l));g.a.push(l);W(l,pa,a,b,d)}}(c,d.location.hostname,f);P("//"+e+"/v/1.0/avjp?"+v)}else f()})}a=a?a:{};var d=this,e=a.deliveryDomain||this.deliveryDomain;if(!e)return console.error("OX Header Bidder: getBids() Error: deliveryDomain not defined"),new Promise(function(a){a([])});var g=this,f=a.timeLimit||this.timeLimit,l=void 0!==a.singleRequest?a.singleRequest:this.singleRequest,m=[],A=a.contentTopicId||this.contentTopicId,X=a.customKeyValuePairs||this.customKeyValuePairs;a.customPriceBucket&&typeof a.customPriceBucket===Z&&(S=a.customPriceBucket);var p=[];Array.isArray(a.adMappings)?p=ea(a.adMappings,this.adMappings):p=this.adMappings;var r=E(fa(p)),p=r.next().value,r=r.next().value;m.push(function(a,b,c,d,f){return new Promise(function(l){function m(a,b,c){var d=!1,e=a.map(function(a){return r.find(function(b){return b.divId===a.divId})}).filter(function(a){return a}),l=setTimeout(function(){d||(d=!0,c(r))},b);return function(a){var k=a;if("string"===typeof a)try{k=JSON.parse(a)}catch(t){k={ads:{ad:[],count:0,pixels:"",version:-1}}}a={ads:{ad:k.ads&&k.ads.ad,count:k.ads&&k.ads.count,pixels:k.ads&&k.ads.pixels,version:k.ads&&k.ads.version}};var m=d,k=qa(e,a.ads.ad||[]);p--;d||p||(d=!0,clearTimeout(l),c(r));g.a=g.a.concat(k);a.ads&&a.ads.pixels&&na(a.ads.pixels,f);k.forEach(function(a){W(a,v,b,f.location.hostname,m)})}}if(b.length&&b.length){var v=(new Date).valueOf(),p=a?1:b.length,r=b.map(function(a){return new U(a)}),T;b=a?[b]:b;b.forEach(function(b){var v=g.b();T="window."+c+".displayAdResponseHandler"+v;b=a?b:[b];var q;q=b;var p=T,r=A;if(Array.isArray(q)){var G=ja(q),w=f.self!==f.top,k={};k.auid=ka(q);k.aus=la(q);k.bc="hb_lite_0.2.5";k.be=1;k.ch=f.document.a||f.document.characterSet;k.ifr=w;k.jr=f.document.referrer;k.ju=f.location.href&&encodeURIComponent(f.location.href);k.res=f.screen.width+"x"+f.screen.height+"x"+f.screen.colorDepth;var x,t;t=f;x=f.document;var I;w?(t=f.top,x=f.top.document,w=x.documentElement,I=x.body,x=t.innerWidth||w.clientWidth||I.clientWidth,t=t.innerHeight||w.clientHeight||I.clientHeight):(w=x.documentElement,x=t.innerWidth||w.clientWidth,t=t.innerHeight||w.clientHeight);k.tws=x+"x"+t;k.tz=(new Date).getTimezoneOffset();k.nocache=(new Date).getTime();k.callback=p;k.aumfs=G;k.tid=r;k.c=X;k.tps=ha(q);q=J(k)}else q="";q="//"+e+"/w/1.0/arj?"+q;b=m(b,d,l);v="displayAdResponseHandler"+v;p=!0;g.f&&(p=!O(q,b));p&&(f[c][v]=b,P(q))})}else l([])})}(l,p,this.namespace,f,this.window));l=r.map(function(a){return c(a,d.namespace,f,d.window)});return Promise.all(m.concat(l)).then(function(a){var c=(new Date).getTime();a=R(a).filter(function(a){return a}).map(function(a){a.R=c;return a});b&&b(a);return a})};Y.prototype.getBids=Y.prototype.K;Y.prototype.S=function(a,b){if(a){var c=function(a,b){var c=a.getSlotElementId();return b.find(function(a){return a.divId===c&&!a.J&&!a.v()})||null}(a,b),d=function(a,b){return b?a.getSizes().some(function(a){return a.getWidth()===b.width&&a.getHeight()===b.height}):!1}(a,c),e;e=a.getSizes()[0].getWidth()+"x"+a.getSizes()[0].getHeight();e=c?c.l()?d?c.m():e+"_0":e+"_t":e+"_0";try{a.setTargeting("oxb",e),c&&c.l()&&d&&(a.setTargeting("oxb_bid_id",c.id.toString()),a.setTargeting("oxb_bid_namespace",this.namespace),c.s()&&a.setTargeting("oxb1",c.o()),c.F())}catch(g){console.error("AuctionEvents.ERROR","Unexpected error in setOxTargeting",g)}}};Y.prototype.setOxTargetingForGoogletagSlot=Y.prototype.S;Y.prototype.T=function(a,b,c){var d=b.oxb_bid_id&&parseInt(b.oxb_bid_id[0],10);if((a=c.document)&&d)try{var e=this.a.find(function(a){return a.id===d});if(e){e.C();e.J=e.Z=!0;var g=e.height,f=e.width,l=e.W,m=e.ad;a===document||"video"===e.X?console.error("Error trying to write ad. Ad render call ad id "+d+" was prevented from writing to the main document."):m?(a.write(m),a.close(),a.defaultView&&a.defaultView.frameElement&&(a.defaultView.frameElement.width=f,a.defaultView.frameElement.height=g)):l?(a.write('\x3cIFRAME SRC\x3d"'+l+'" FRAMEBORDER\x3d"0" SCROLLING\x3d"no" MARGINHEIGHT\x3d"0" MARGINWIDTH\x3d"0" TOPMARGIN\x3d"0" LEFTMARGIN\x3d"0" ALLOWTRANSPARENCY\x3d"true" WIDTH\x3d"'+f+'" HEIGHT\x3d"'+g+'"\x3e\x3c/IFRAME\x3e'),a.close(),a.defaultView&&a.defaultView.frameElement&&(a.defaultView.frameElement.width=f,a.defaultView.frameElement.height=g)):console.error("Error trying to write ad. No ad for bid response id: "+d)}else console.error("Error trying to write ad. Cannot find ad by given id : "+
d)}catch(A){console.error("Error trying to write ad Id :"+d+" to the page:"+A.message)}else console.error("Error trying to write ad Id :"+d+" to the page. Missing document or adId")};Y.prototype.showAd=Y.prototype.T;Y.prototype.I=function(a,b){a=void 0===a?"":a;if(!b)return a;var c=a.substring(0,a.indexOf("?")+1),d=L(a),e=encodeURIComponent("ff\x3d"+b.b+"\x26oxcolo\x3d"+b.per_colo_domain+"\x26oxph\x3d"+b.ph+"\x26oxb\x3d"+d.sz+"v_"+V(b.cpm));d.url=window.location.href&&encodeURIComponent(window.location.href);d.description_url=window.location.hostname&&encodeURIComponent(window.location.hostname);d.cust_params=d.cust_params?d.cust_params+"%26"+e:e;return c+J(d)};Y.prototype.buildVastUrl=Y.prototype.I;function qa(a,b){var c=b.slice();return a.map(function(a){var b,d=c.findIndex(function(b){return String(a.h)===String(b.adunitid)&&ra(b,a.adMapping)});0<=d&&(b=c.splice(d,1)[0]);return a.fill(b)})}function ra(a,b){var c=a.creative&&a.creative[0];return b.sizes&&0!==b.sizes.length?c?b.sizes.some(function(a){if(!a)return!1;var b=E(a);a=b.next().value;b=b.next().value;return a==c.width&&b==c.height}):!1:!0}var Z="function";window.HeaderBidder=Y;})(window)
var AufBid=window.AufBid||{};AufBid.SmartrtbplusAdapter=(function(){var ENDPOINT='https://ww1.smartadserver.com/prebid';return extend(AufBid.AufAdapter,{requestBids:function(){for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var query={async:1,siteid:this.options.siteId,pgid:sas_pageId,fmtid:placement.tag,pbjscbk:this.createCallback(formatId,placement.tag,placement.size).name,ccy:this.options.currency,sizes:placement.size};var src=ENDPOINT+'?'+this.manager.utils.getQueryString(query);this.manager.utils.loadScript(src);},this);}}},getBidsFromResponse:function(response,formatId,placementId){if(!response){this.log('No bid');return;}
this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:response.width+'x'+response.height,cpmRaw:response.cpm},{creativeHTML:response.ad});}});})();
var AufBid=window.AufBid||{};AufBid.OpenxAdapter=(function(){var DEBUG_AD_UNIT_ID=539375251;return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);if(!window.HeaderBidder){this.disable();return;}
this.sdk=new HeaderBidder({timeLimit:this.manager.timeout,deliveryDomain:this.options.siteId+'-d.openx.net',singleRequest:true,adMappings:[]});},requestBids:function(){if(this.disabled){return;}
var pushUnits=[];for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var sizes=placement.size.split(',').map(function(size){return size.trim().split('x');});pushUnits.push({type:'display',oxAdUnitId:(this.debug?DEBUG_AD_UNIT_ID:placement.tag),sizes:sizes,divId:placement.tag,customKeyValuePairs:{formatId:formatId}});},this);}}
var callback=this.createCallback();var that=this;this.sdk.getBids({adMappings:pushUnits}).then(callback.func).catch(function(reason){that.logError('Bid request failed: '+reason);});},getBidsFromResponse:function(response){if(!response){this.logError('Empty response');return;}
if(response.count===0){this.log('No bid');return;}
response.forEach(function(rawBid){if(!rawBid.ad||!rawBid.cpm){return;}
this.manager.addBid({account:this,formatId:rawBid.adMapping.customKeyValuePairs.formatId,placementId:rawBid.adMapping.oxAdUnitId,placementSize:rawBid.width+'x'+rawBid.height,cpmRaw:rawBid.cpm},{creativeHTML:rawBid.ad,advertiserId:rawBid.adUnit.adv_id,brandId:rawBid.adUnit.brand_id,dealId:rawBid.dealId,type:rawBid.adUnit.type});},this);}});})();
var AufBid=window.AufBid||{};AufBid.OathAdapter=(function(){var ENDPOINT='https://adserver-eu.adtech.advertising.com';return extend(AufBid.AufAdapter,{requestBids:function(){for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var callback=this.createCallback(formatId,placement.tag,placement.size);var src=ENDPOINT+'/pubapi/3.0/'+this.options.accountId+'/'+placement.tag+'/0/0/;cmd=bid;v=2;callback='+callback.name;this.manager.utils.loadScript(src);},this);}}},getBidsFromResponse:function(response,formatId,placementId){if(!response){this.logError('Empty response');return;}
if(!response.seatbid||response.seatbid.length===0){this.log('No bid');return;}
response.seatbid.forEach(function(seatBid){if(!seatBid||!seatBid.bid||seatBid.bid.length===0){this.log('No bid');return;}
seatBid.bid.forEach(function(bid){this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:bid.w+'x'+bid.h,cpmRaw:bid.price},{creativeHTML:decodeURIComponent(bid.adm)});},this);},this);}});})();
var AufBid=window.AufBid||{};AufBid.IndexExchangeAdapter=(function(){var ENDPOINT='https://as-sec.casalemedia.com/cygnus';var ENDPOINT_DEBUG='https://sandbox.ht.indexexchange.com/cygnus';var VERSION=7;return extend(AufBid.AufAdapter,{bidTTL:30,requestBids:function(){for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var placements={id:formatId+'_'+placement.tag+'_'+placement.size,imp:[],site:{page:window.location.href}};var sizes=placement.size.split(',');sizes.forEach(function(size){var sp=size.split('x');placements.imp.push({id:formatId+'-'+placement.tag+'-'+size,banner:{w:sp[0],h:sp[1]},ext:{sid:placement.tag+'_'+size,siteID:placement.tag}});},this);var callback=this.createCallback(formatId,placement.tag,placement.size);var query={v:VERSION,s:this.options.siteId,pid:this.options.accountId,fn:callback.name,r:JSON.stringify(placements)};var src=(this.debug?ENDPOINT_DEBUG:ENDPOINT)+'?'+this.manager.utils.getQueryString(query);this.manager.utils.loadScript(src);},this);}}},getBidsFromResponse:function(response){if(!response){this.logError('Empty response');return;}
if(!response.seatbid||response.seatbid.length===0){this.log('No bid');return;}
response.seatbid.forEach(function(seatBid){if(!seatBid||!seatBid.bid||seatBid.bid.length===0){this.log('No bid');return;}
seatBid.bid.forEach(function(bid){var cpmRaw=Number(bid.ext.pricelevel.match(/\d+/g).pop())/100||0;var placement=bid.impid.split('-');var formatId=placement[0];var placementId=placement[1];var placementSize=placement[2];this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:placementSize,cpmRaw:cpmRaw},{advertiserId:bid.ext.advbrandid,advertiser:bid.ext.advbrand,campaign:bid.cid,creativeHTML:decodeURIComponent(bid.adm),creativeId:bid.crid});},this);},this);}});})();
var AufBid=window.AufBid||{};AufBid.AppnexusAdapter=(function(){var ENDPOINT='https://ib.adnxs.com/jpt';var ENDPOINT_V2='https://ib.adnxs.com/ut/v3/prebid';return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);this.useNewApi=this.manager.getConfig('hb_appnexusV2');this.log('AppNexus library V'+(this.useNewApi?'2':'1'),'warn');},requestBids:function(){var data={tags:[]};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){if(this.useNewApi){var sizes=placement.size.split(',').map(function(size){var sizeArr=size.trim().split('x');return{width:sizeArr[0],height:sizeArr[1]};});data.tags.push({ad_types:['banner'],allow_smaller_sizes:true,disable_psa:true,id:placement.tag,prebid:true,primary_size:sizes[0],sizes:sizes,use_pmt_rule:false,uuid:formatId+'-'+placement.tag+'-'+placement.size});}else{var callback=this.createCallback(formatId,placement.tag,placement.size);var query={id:placement.tag,psa:0,referrer:window.location.hostname,size:placement.size.split(',')[0],promo_sizes:placement.size.split(',').slice(1).join(','),callback:callback.name};var src=ENDPOINT+'?'+this.manager.utils.getQueryString(query);this.manager.utils.loadScript(src);}},this);}}
if(this.useNewApi){var callback=this.createCallback();this.manager.utils.ajax(ENDPOINT_V2,callback.func,JSON.stringify(data),{method:'POST',withCredentials:true});}},getBidsFromResponse:function(response,formatId,placementId){if(!response||response&&!response.result){this.logError('Empty response');return;}
if(response&&response.result.cpm===0){this.log('No bid'
+' - format '+this.manager.formats[formatId]
+' - placement '+placementId);return;}
this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:response.result.width+'x'+response.result.height,cpmRaw:response.result.cpm/10000},{creativeId:response.result.creative_id,creativeURL:response.result.ad,subtype:response.result.media_subtype_id,type:response.result.media_type_id});}});})();
/*! proxistore-frontend-tag-repo 2018-02-07 */
var $ps=function(a){function b(){return null!==navigator.userAgent.match(/Android|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|bolt|cldc|compal|doris|elaine|fennec|gobrowser|hiptop|htc|huawei|iemobile|ip(hone|od|ad)|iris|kindle|lge |lumia|nokia|maemo|mib|midp|minimo|mmp|model-orange|netfront|nexus \d+|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|playbook|plucker|pocket|psp|qnx|semc-browser|series(4|6)0|Silk|skyfire|symb(ian|ianos|os)|teashark|teleca|treo|up\.(browser|link)|uzard|wap|windows (ce|phone)|xda|xiino/i)}function c(){return(screen.height>screen.width?screen.width:screen.height)>504}function d(){return b()?c()?"TABLET":"PHONE":"DESKTOP"}return a.parameters=a.parameters||{},a.parameters.initParameters=function(a){if(a=a||{},a.version=window.localStorage&&localStorage.getItem("ps_version")||(new Date).getTime(),a.desactivateHtml5=a.desactivateHtml5||!1,a.publisherSpotParams){a.publisherSpotIds=[];for(var b=a.publisherSpotParams.length;b--;)a.publisherSpotIds.push(a.publisherSpotParams[b].publisherSpotId)}else a.adsIdx=0,a.boxId=a.boxId||"proxistore-"+a.publisherSpotId;a.deviceType=d()},a}($ps||{}),$ps=function(a){function b(a,b){var c=document.createAttribute(a);return c.value=b,c}function c(a,c){var d=document.getElementById(c),e=document.getElementById("ps-pixelCounter-"+a);if(null===e){e=document.createElement("div");var f=b("id","ps-pixelCounter-"+a);e.setAttributeNode(f);var g=b("class","ps-pixelCounter");e.setAttributeNode(g);var h=b("style","display:none");e.setAttributeNode(h),d.appendChild(e)}return e}function d(a,c){c=-1==c.search("\\?")?c+"?ps_v="+(new Date).getTime():c+"&ps_v="+(new Date).getTime();var d=document.createElement("img"),e=b("src",c);d.setAttributeNode(e),a.appendChild(d)}a.common=a.common||{};var e=0;return a.common.param=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&a[b]&&c.push(b+"="+a[b]);return c.join("&")},a.common.getCityName=function(a,b,c){var d="https://maps.googleapis.com/maps/api/geocode/json?latlng="+a+","+b+"&key=AIzaSyDIn8wAA-Qaj7-Oh_K04IOTpO6erB66Ruo",e=new XMLHttpRequest;e.open("GET",d,!0),e.onload=function(a){var b="",d=JSON.parse(e.responseText);if("OK"==d.status){for(i=0;i<d.results.length;i++)for(j=0;j<d.results[i].types.length;j++)"locality"==d.results[i].types[j]&&(b=d.results[i].address_components[j].long_name);c(b)}else c(b)},e.onerror=function(a){c("")},e.send()},a.common.jsonp=function(b,c,d){var f="ps_"+(new Date).getTime()+e,g=document.createElement("script"),h=document.getElementsByTagName("head")[0]||document.documentElement,i=!1,j=b.indexOf("?")>0?"&":"?";e++,"function"!=typeof c||d||(d=c,c=void 0),window[f]=function(a){d&&d(a)},g.onload=g.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,g.onload=g.onreadystatechange=null,h&&g.parentNode&&h.removeChild(g))},c&&("string"!=typeof c&&(c=a.common.param(c)),b+="?"+c),d&&(c&&(j="&"),b+=j+"callback="+f),g.src=b,h.insertBefore(g,h.firstChild)},a.common.unserialize=function(a){for(var b=[],c=a.split(/&/g),d=c.length;d--;)c[d].indexOf("+")>-1&&(b[decodeURIComponent(c[d].substring(0,c[d].indexOf("+")))]=decodeURIComponent(c[d].substring(c[d].indexOf("+")+1)));return b},a.common.recordstat=function(a){},a.common.getScript=a.getScript=function(a,b){var c=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("script");d.async=!0,d.src=a,b&&d.addEventListener&&d.addEventListener("load",function(){b()}),c.insertBefore(d,c.firstChild)},a.common.addPixelCounter=function(a,b,e){var f=c(a,b);if(e.constructor!==Array)d(f,e);else for(var g=e.length;g--;)d(f,e[g])},a}($ps||{}),$ps=function(a){function b(){for(var a,b={},c=0,d=arguments.length;c<d;c++)for(a in arguments[c])arguments[c].hasOwnProperty(a)&&(b[a]=arguments[c][a]);return b}function c(c,d,e,f,g,h){a.common.jsonp(c+"geolocation/ip?device="+g,function(i){a.common.jsonp(c+"cookie/create?device="+g+"&durationMode=SHORT&coord="+i.location.latitude+"*"+i.location.longitude+"&geoType="+i.cookie_gt,function(c){if(h)jsonp(h,function(b){if(b.value){var c=a.common.unserialize(b.value);"function"==typeof d&&d.call(this,c.CO.split("*")[0],c.CO.split("*")[1],c.GT)}});else{if(e)switch(i.cookie_gt){case"BADIP":a.common.recordstat(b(f,{key:"createCookieBasedOnFallBackToBadIp"}));break;case"IP_MOBILE":a.common.recordstat(b(f,{key:"fallBackIpMobile"}));break;default:a.common.recordstat(b(f,{key:"createCookieBasedOnFallBackToIp"}))}if(c.value){var g=a.common.unserialize(c.value);"function"==typeof d&&d.call(this,g.CO.split("*")[0],g.CO.split("*")[1],g.GT)}}})})}return a.geo=a.geo||{},a.geo.getPos=function(d,e,f,g,h,i,j){f&&a.common.recordstat(b(i,{key:"proxistoreRequest"})),a.common.jsonp(e+"cookie/read",function(k){if(k.value){f&&a.common.recordstat(b(i,{key:"cookieexists"}));var l=a.common.unserialize(k.value),m=l.GT,n=l.CO.split("*")[0],o=l.CO.split("*")[1];"function"==typeof j&&j.call(this,n,o,m)}else a.common.jsonp(e+"cookie/test",function(k){var l;"DESKTOP"==h&&"yes"!=k.accepted||g?(g?f&&a.common.recordstat(b(i,{key:"fallBackToIPHTML5Desactivated"})):f&&a.common.recordstat(b(i,{key:"fallBackToIPThirdPartyCookiesNonSupported"})),c(e,j,f,i,h,l)):navigator&&navigator.geolocation?(f&&a.common.recordstat(b(i,{key:"html5GeolocRequest"})),navigator.geolocation.getCurrentPosition(function(g){if(f&&a.common.recordstat(b(i,{key:"html5accepted"})),g.coords.accuracy>1e4)f&&a.common.recordstat(b(i,{key:"fallBackToIPHTML5notAccurate"})),c(e,j,f,i,h,l);else{if(isNaN(g.coords.latitude)||isNaN(g.coords.longitude))throw new Error("Coordinate is Not a Number");l=e+"cookie/create?device="+h+"&durationMode=LONG&coord="+g.coords.latitude+"*"+g.coords.longitude+"&geoType=HTML5",a.common.jsonp(l,function(c){if(c.value){var d=a.common.unserialize(c.value);f&&a.common.recordstat(b(i,{key:"createCookieBasedOnHTML5"})),"function"==typeof j&&j.call(this,d.CO.split("*")[0],d.CO.split("*")[1],d.GT)}})}a.common.jsonp(e+"geolocation/html5",{latitude:g.coords.latitude,longitude:g.coords.longitude,accuracy:g.coords.accuracy,adspot:d,deviceType:h})},function(){clearTimeout(window["geolocationRequestTimeoutHandler"+d]),f&&a.common.recordstat(b(i,{key:"fallBackToIPHTML5nonAcceptedOrError"})),c(e,j,f,i,h,l)})):(f&&a.common.recordstat(b(i,{key:"fallBackToIPHTML5nonSupported"})),c(e,j,f,i,h,l))})})},a}($ps||{}),$ps=function(a){function b(a,b,c){var d=JSON.parse(localStorage.getItem("ps_capping_"+a))||{frequency:"HOUR",view:2,expires:0};if(b&&(d.expires<=c.getTime()||d.view!=b.view||d.frequency!=b.frequency)){var e=c;switch(b.frequency){case"HOUR":e.setTime(c.getTime()+36e5);break;case"DAY":e.setTime(c.getTime()+864e5);break;case"MINUTE":e.setTime(c.getTime()+6e4)}d={frequency:b.frequency,view:b.view,expires:e.getTime()},localStorage.setItem("ps_capping_"+a,JSON.stringify(d)),localStorage.setItem("ps_exposure_"+a,0)}}function c(b,c){for(var d=!1,e=b.length;e--;){var f=b[e],g=JSON.parse(localStorage.getItem("ps_capping_"+f.publisherSpotId))||{frequency:"HOUR",view:2,expires:0},h=a.exposure||JSON.parse(localStorage.getItem("ps_exposure_"+f.publisherSpotId))||0;if(g.expires<=c.getTime()||h<=g.view){d=!0;break}}return d}function d(a,c){for(var d=a.length;d--;)a[d].hours?localStorage.setItem("ps_ads_"+a[d].publisherSpotReferenceId,JSON.stringify(a[d].hours)):localStorage.removeItem("ps_ads_"+a[d].publisherSpotReferenceId),localStorage.setItem("ps_cpm_"+a[d].publisherSpotReferenceId,a[d].pricePerViews),b(a[d].publisherSpotReferenceId,a[d].capping,c)}function e(a,c,d){for(var e=new Date,f=a.length;f--;){localStorage.setItem("ps_cpm_"+a[f].publisherSpotReferenceId,a[f].pricePerViews),b(a[f].publisherSpotReferenceId,a[f].capping,c);var g=localStorage.getItem("ps_exposure_"+a[f].publisherSpotReferenceId);if(a[f].hours&&g<a[f].capping.view){var h=e.getFullYear().toString()+(e.getMonth()<9?"0"+(e.getMonth()+1).toString():(e.getMonth()+1).toString())+(e.getDate()<10?"0"+e.getDate():e.getDate().toString());a[f].hours&&h in a[f].hours&&a[f].hours[h].indexOf(e.getHours())>=0&&d()}}}return a.start=function(b){var f=new Date;if(a.parameters.initParameters(b),b.publisherSpotIds&&b.baseUrl&&c(b.publisherSpotParams,f)){var g=!1;a.common.jsonp(b.baseUrl+b.langCtx+"cookie/uv?id="+b.publisherSpotParams[0].publisherSpotId,function(c){a.geo.getPos(b.publisherSpotParams[0].publisherSpotId,b.baseUrl+b.langCtx,g,b.desactivateHtml5,b.deviceType,{adSpot:b.publisherSpotParams[0].publisherSpotId},function(h,i,j){if(g){var k=j;"BADIP"===j&&(k=j+"_"+h+"_"+i),a.common.recordstat({key:"cookie_"+k,adSpot:b[0].publisherSpotId})}a.common.jsonp(b.baseUrl+b.langCtx+"tags/publisher-spot-one-week",{publisherSpotReferenceIds:b.publisherSpotIds,latitude:h,longitude:i,device:b.deviceType,badIp:"BADIP"===j||"IP_MOBILE"===j||"DISQUALIFIED"===j?"true":"false",uniqueVisitorId:c.ui},function(a){localStorage&&(localStorage.setItem("ps_version","2"),b.cb?e(a,f,b.cb):d(a,f))})})})}},a}($ps||{});
var AufBid=window.AufBid||{};AufBid.ProxistoreAdapter=(function(){var ENDPOINT_BASE='https://abs.proxistore.com/';var DEFAULT_LANG='fr';return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);if(!window.$ps){this.disable();return;}
if(!window.localStorage){this.logError('No localStorage');return;}
this.langCtx=(window.af_dataLayer?window.af_dataLayer[0].siteInfo.lang:DEFAULT_LANG)+'/';this.sdk=window.$ps;},requestBids:function(){if(this.disabled){return;}
this.version=localStorage.getItem('ps_version')||new Date().getTime();this.publisherSpots=[];this.placementsByPublisherSpot={};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){if(!this.placementsByPublisherSpot.hasOwnProperty(placement.tag)){this.publisherSpots.push({publisherSpotId:placement.tag});this.placementsByPublisherSpot[placement.tag]={formatId:formatId,size:placement.size};}},this);}}
var callback=this.createCallback();this.sdk.start({baseUrl:ENDPOINT_BASE,cb:callback.func,langCtx:this.langCtx,publisherSpotParams:this.publisherSpots});},getBidsFromResponse:function(){this.publisherSpots.forEach(function(publisherSpot){var placementId=publisherSpot.publisherSpotId;var bidData=this.placementsByPublisherSpot[placementId];var cpm=6.25;if(cpm>0){this.manager.addBid({account:this,formatId:bidData.formatId,placementId:placementId,placementSize:bidData.size,cpmRaw:cpm},{creativeHTML:'<html>\n'
+'<head></head>\n'
+'<body style="margin : 0; padding: 0;">\n'
+'<!-- Proxistore Ad Tag -->\n'
+'<div id="proxistore-'+placementId+'"></div>\n'
+'<script type="text/javascript">\n'
+'$ps_head = document.getElementsByTagName("head")[0] || document.documentElement,\n'
+'$ps_script = document.createElement("script");\n'
+'$ps_script.src = "'+ENDPOINT_BASE+'scripts/ps-ut-box.min.js?v='+this.version+'",\n'
+'$ps_script.async = true,\n'
+'$ps_script.addEventListener && $ps_script.addEventListener("load",function() {\n'
+'$ps.displayBox({\n'
+'baseUrl: "'+ENDPOINT_BASE+'",\n'
+'langCtx: "'+this.langCtx+'",\n'
+'publisherSpotId: '+placementId+'\n'
+'});\n'
+'}), $ps_head.insertBefore($ps_script, $ps_head.firstChild)\n'
+'</script>\n'
+'</body>\n'
+'</html>'});}else{this.logError('No cpm - placement '+placementId);}},this);}});})();
var AufBid=window.AufBid||{};AufBid.SovrnAdapter=(function(){var BEACON_ENDPOINT='https://ap.lijit.com/www/sovrn_beacon_standalone/sovrn_standalone_beacon.js';var ENDPOINT='https://ap.lijit.com/rtb/bid';return extend(AufBid.AufAdapter,{requestBids:function(){if(!this.beaconCalled){this.beaconCalled=true;this.manager.utils.loadScript(BEACON_ENDPOINT
+'?iid='+this.options.accountId
+'&uid='+this.options.siteId,null,{id:'aufbid_sovrn_'+this.manager.callId});}
var query={id:this.options.accountId,site:{domain:location.hostname,page:location.pathname},imp:[]};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var size=placement.size.split('x');var width=size[0];var height=size[1];query.imp.push({id:Date.now()+'-'+formatId+'-'+placement.tag,tagid:placement.tag,banner:{w:width,h:height}});});}}
var callback=this.createCallback();var src=ENDPOINT
+'?callback='+encodeURIComponent(callback.name)
+'&br='+encodeURIComponent(JSON.stringify(query));this.manager.utils.loadScript(src);},getBidsFromResponse:function(response){if(!response){this.logError('Empty response');return;}
if(!response.seatbid||response.seatbid.length===0){this.log('No bid');return;}
response.seatbid.forEach(function(seatBid){if(!seatBid||!seatBid.bid||seatBid.bid.length===0){this.log('No bid');return;}
seatBid.bid.forEach(function(bid){var placement=bid.impid.split('-');var callbackFormatId=placement[1];var callbackPlacementId=placement[2];this.manager.addBid({account:this,formatId:callbackFormatId,placementId:callbackPlacementId,placementSize:bid.w+'x'+bid.h,cpmRaw:bid.price},{creativeHTML:decodeURIComponent(bid.adm),trackingPixel:bid.nurl});},this);},this);}});})();
var AufBid=window.AufBid||{};AufBid.WidespaceAdapter=(function(){var VERSION='1.0.2';var ENDPOINT='https://engine.widespace.com/map/engine/hb/dynamic?hb.ver='+VERSION;var PLACEMENT_ID_DEBUG='7b6589bf-95c8-4656-90b9-af9737bb9ad3';return extend(AufBid.AufAdapter,{requestBids:function(){for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var callback=this.createCallback(formatId,placement.tag,placement.size);window[callback.name]=callback.func;var query={sid:(this.debug?PLACEMENT_ID_DEBUG:placement.tag),hb:1,'hb.callback':callback.name,'hb.callbackUid':formatId+'_'+placement.tag+'_'+placement.size,'hb.sizes':placement.size,'hb.currency':this.options.currency,'hb.name':'prebidjs',timestamp:this.manager.utils.getGuid()};var src=ENDPOINT+'#'+this.manager.utils.getQueryString(query);this.manager.utils.loadScript(src);},this);}}},getBidsFromResponse:function(response,formatId,placementId){if(!response){this.logError('Empty response');return;}
response.forEach(function(rawBid){if(rawBid.status==='noad'){return;}
this.manager.addBid({account:this,formatId:formatId,placementId:placementId,placementSize:rawBid.width+'x'+rawBid.height,cpmRaw:rawBid.cpm,currency:rawBid.currency},{creativeHTML:rawBid.code,type:rawBid.status});},this);}});})();
var AufBid=window.AufBid||{};AufBid.RubiconAdapter=(function(){var ENDPOINT='https://fastlane.rubiconproject.com/a/api/fastlane.json';var POS_MAP={12:'atf',19:'mtf',117:'atf',3243:'btf',9888:'btf',16863:'atf',};var SIZE_MAP={1:'468x60',2:'728x90',8:'120x600',9:'160x600',10:'300x600',14:'250x250',15:'300x250',16:'336x280',19:'300x100',31:'980x120',32:'250x360',33:'180x500',35:'980x150',37:'468x400',38:'930x180',43:'320x50',44:'300x50',48:'300x300',54:'300x1050',55:'970x90',57:'970x250',58:'1000x90',59:'320x80',60:'320x150',61:'1000x1000',65:'640x480',67:'320x480',68:'1800x1000',72:'320x320',73:'320x160',78:'980x240',79:'980x300',80:'980x400',83:'480x300',94:'970x310',96:'970x210',101:'480x320',102:'768x1024',103:'480x280',113:'1000x300',117:'320x100',125:'800x250',126:'200x600',146:'980x250'};var PSA_ERROR_CODES={NAD:{code:'10',reason:'No ads in the rules file that passed targeting or were eligible to serve'},NRF:{code:'15',reason:'No referrer match'},NRL:{code:'16',reason:'Rules file missing'},SUA:{code:'17',reason:'Bot IP address'},SIP:{code:'18',reason:'Bot user-agent'},BCR:{code:'21',reason:'Blocked - does not meet IQ standards'},SIZE:{code:'38',reason:'Invalid size id'},ROPT:{code:'48',reason:'User opt-out from RTB'}};var _getPlacementsByZone=function(placements,formatIds){var activePlacements={};formatIds.forEach(function(formatId){if(placements[formatId]){placements[formatId].forEach(function(placement){var tag=placement.tag.split('-'),zoneId=tag[0],sizeId=tag[1];if(!activePlacements.hasOwnProperty(zoneId)){activePlacements[zoneId]={};}
if(activePlacements[zoneId].hasOwnProperty(formatId)){activePlacements[zoneId][formatId].sizes.push(sizeId);}else{activePlacements[zoneId][formatId]={sizes:[sizeId]};}});}});return activePlacements;};return extend(AufBid.AufAdapter,{requestBids:function(){if(!this.options.accountId){this.logError('Empty account_id');}
this.placementsByZone=_getPlacementsByZone(this.options.placements,this.manager.formatIds);for(var zoneId in this.placementsByZone){if(this.placementsByZone.hasOwnProperty(zoneId)){for(var formatId in this.placementsByZone[zoneId]){if(this.placementsByZone[zoneId].hasOwnProperty(formatId)){var callback=this.createCallback(formatId,zoneId);var query={account_id:this.options.accountId,site_id:this.options.siteId,zone_id:zoneId,size_id:this.placementsByZone[zoneId][formatId].sizes[0],alt_size_ids:this.placementsByZone[zoneId][formatId].sizes.slice(1).join(',')||undefined,p_pos:(POS_MAP[formatId]||'btf'),rp_floor:'0.01',p_screen_res:window.screen.width+'x'+window.screen.height,rand:Math.random(),rf:location.hostname.substr(location.hostname.indexOf('.')+1)};var src=ENDPOINT+'?'+this.manager.utils.getQueryString(query);this.manager.utils.ajax(src,callback.func,'',{withCredentials:true});}}}}},getBidsFromResponse:function(response,formatId){if(!response){if(this.manager.adblock===false){this.logError('Empty response');}
return;}
var parsedResponse;try{parsedResponse=JSON.parse(response);}catch(e){if(this.manager.adblock===false){this.logError('Bad response parsing: '+response);}
return;}
if(!parsedResponse||parsedResponse.status!=='ok'){var logInfos,consoleOnly;switch(parsedResponse.error_code){case'3':logInfos='invalid request: missing parameter';break;case'15':logInfos='referrer not allowed';break;case'16':logInfos='identifiers not valid:'
+' site_id='+parsedResponse.site_id
+' account_id='+parsedResponse.account_id
+' zoneid-sizeid='+parsedResponse.zone_id+'-'+parsedResponse.size_id;break;case'17':logInfos='user-agent blocked: suspected spider';consoleOnly=true;break;case'18':logInfos='IP address blocked: suspected botnet';consoleOnly=true;break;case'21':logInfos='referrer blocked: suspected bad traffic';consoleOnly=true;break;case'35':logInfos='account_id is invalid or not a number:'
+' account_id='+parsedResponse.account_id;consoleOnly=true;break;}
this.logError('Bad response'
+' - status '+parsedResponse.status
+' - code '+parsedResponse.error_code
+' - reason '+parsedResponse.reason
+(logInfos?' ('+logInfos+')':''),consoleOnly);return;}
parsedResponse.ads.forEach(function(ad){if(ad.status!=='ok'){if(ad.error_code===PSA_ERROR_CODES.NAD.code||ad.error_code===PSA_ERROR_CODES.ROPT.code){this.log('No bids');}else{this.logError('Bad response: '+ad.reason+' ['+ad.error_code+']');}
return;}
this.manager.addBid({account:this,formatId:formatId,placementId:parsedResponse.zone_id+'-'+parsedResponse.size_id,placementSize:SIZE_MAP[ad.size_id],cpmRaw:ad.cpm},{advertiserId:ad.advertiser,campaign:ad.campaign_id,creativeId:ad.impression_id,creativeHTML:'<html>\n'
+'<head></head>\n'
+'<body style="margin : 0; padding: 0;">\n'
+'<!-- Rubicon Project Ad Tag -->\n'
+'<div data-rp-impression-id="'+ad.impression_id+'">\n'
+'<script type="text/javascript">'+ad.script+'</script>\n'
+'</div>\n'
+'</body>\n'
+'</html>',deal:ad.deal,type:ad.type});},this);}});})();
"use strict";function amzn_ads(a){try{amznads.updateAds(a)}catch(b){try{}catch(c){}}}function aax_write(a,b){a.write(b),a.close()}function amznMatchCookie(a){function b(a){if(!c){c=!0;var b=document.createElement("iframe");b.style.display="none",b.src=a,document.body.appendChild(b)}}var c=!1;document.readyState&&"loading"==document.readyState?document.addEventListener?document.addEventListener("DOMContentLoaded",function(){b(a)},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&b(a)}):b(a)}function aax_render_ad(a){var b,c,d,e,f,g,h,i;if(a&&a.cmp&&""!=a.cmp&&"undefined"!=a.cmp&&amznMatchCookie(a.cmp),a.passback)return void aax_write(document,a.html);if(b=a.slotSize,!b)return void aax_write(document,a.html);c=b.indexOf("x"),d=b.substring(0,c),e=b.substring(c+1),f="amznad"+Math.round(1e6*Math.random()),aax_write(document,'<iframe id="'+f+'" width="'+d+'" height="'+e+'" src="javascript:\'\'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"></iframe>');try{g=document.getElementById(f),h=g.contentWindow||g.contentDocument,h.document&&(h=h.document),aax_write(h,a.html);try{a.iid&&(document.write('<script type="text/javascript" src="'+amznpassback.CSM_JS+'"></script>'),document.write('<script type="text/javascript">'),i="aax.amazon-adsystem.com",document.write('  amzncsm.host="'+i+'";\n'),document.write('  amzncsm.rmC(document.getElementById("'+f+'"), "'+a.iid+'", window, document);'),document.write("</script>"),document.close())}catch(j){console&&console.log}}catch(k){g&&(g.style.display="none")}}var amznads,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},amznpassback=amznpassback||{};amznpassback.CPM_JS||(amznpassback.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz"),Date.now||(Date.now=function(){return(new Date).getTime()}),amznads=function(a,b,c){function d(b,c,e){this.startTime=null,this.stopTime=null,this.sourceId=c,this.sync=b,this.mode=e,this.latency=null,d.prototype.startTimer=function(){this.startTime=Date.now()},d.prototype.stopTimer=function(){this.stopTime=Date.now()},d.prototype.stopTimerAndReportLatency=function(){this.stopTimer(),this.calculateLatency(),this.isThrottled()||this.reportLatency()},d.prototype.calculateLatency=function(){this.latency=this.stopTime-this.startTime},d.prototype.isThrottled=function(){var b,c=parseInt(a.latencySamplingRate,10);if(!isNaN(c)){if(0==c)return!0;if(100==c)return!1;if(b=100*Math.random(),c>=b)return!1}return!0},d.prototype.reportLatency=function(){var b,c;null!=this.latency&&this.latency>0&&(b='/{"c":"dtb","src":"'+this.sourceId+'","'+(this.sync?"bls":"bla")+'":"'+this.latency+'","m":"'+this.mode+'"}',c=a.protocol+a.host+a.px_svc+"PH"+b,(new Image).src=c)}}function e(){this.metrics={},this.t0=Date.now(),this.i=0,this.addTimer=function(a,b){b||(b=Date.now()),this.metrics[a]=b-this.t0},this.set=function(a,b){this.metrics[a]=b},this.schedule=function(b,c){var d=this;b||(b=5e3),c||(c="PH"),c+="/",setTimeout(function(){var b,e;d.metrics.i=d.i,d.metrics.t0=d.t0,d.metrics.site=d.getTopDomain(a),b=JSON.stringify(d.metrics),e=a.protocol+a.host+a.px_svc+c+encodeURIComponent(b),(new Image).src=e,d.metrics={},d.t0=Date.now(),d.i++},b)},this.getTopDomain=function(a){var b,c=decodeURIComponent(a.getReferrerURL());return b=c.indexOf("://")>-1?c.split("/")[2]:c.split("/")[0],b=b.split(":")[0]}}var f,g,h,i="https:"===b.location.protocol;return a.latencyUtil=a.latencyUtil||null,a.protocol=i?"https://":"http://",a.DEFAULT_HOST="aax.amazon-adsystem.com",a.host=a.DEFAULT_HOST,a.dtb_svc="/e/dtb/bid",a.pb_svc="/x/getad",a.px_svc="/x/px/",a.debug_mode=a.debug_mode||!1,a.MIN_TIMEOUT=0,a.DEFAULT_TIMEOUT=1e3,a.targetingKey="amznslots",a.latencySamplingRate=1,a.vidKey="amzn_vid",a.tasks=a.tasks||[],a.VIEWABILITY_CUTOFF_AREA=a.VIEWABILITY_CUTOFF_AREA||.5,a.VIEWABILITY_CUTOFF_DURATION_SEC=a.VIEWABILITY_CUTOFF_DURATION_SEC||1,a.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz",a.vads={},f="_d",g=!1,h=new e,h.addTimer("tlt"),a.ads||(a.ads={}),a.updateAds=function(b){var c,d;if(b&&b.cmp&&""!=b.cmp&&"undefined"!=b.cmp&&amznMatchCookie(b.cmp),g=!0,a.ads=b.ads,a.ev=b.ev,b.vads){a.vads=b.vads,a.ads||(a.ads={}),d=!1;for(c in b.vads)b.vads.hasOwnProperty(c)&&-1!=c.indexOf(f)&&(a.ads[c]=b.vads[c],a.amzn_vid=b.vads[c],d=!0);if(!d)for(c in b.vads)b.vads.hasOwnProperty(c)&&(a.ads[c]=b.vads[c],a.amzn_vid=b.vads[c])}a.doAllTasks(),a.tasks.push=function(b){a.doTask(b)};try{b.lsr&&(a.latencySamplingRate=b.lsr),b.rm&&(h.addTimer("br"),h.set("brs","1"),h.schedule(b.to,b.id)),null!=a.latencyUtil&&a.latencyUtil.stopTimerAndReportLatency()}catch(e){}},a.aaxPunt=function(a){try{a&&a.cmp&&""!=a.cmp&&"undefined"!=a.cmp&&amznMatchCookie(a.cmp),g=!0,h.addTimer("br"),h.set("brs","0"),a&&a.rm&&h.schedule(a.to,a.id)}catch(b){}},a.saveAds=function(b){a.saved_ads=b.ads,a.updateAds(b)},a.getAdForSlot=function(c,d,e){var f,g,h,i;a.src_id=c,f=f||{},g=f.u,a.host=3e3==c?"aax-cpm.amazon-adsystem.com":a.host,g||(g=a.getReferrerURL()),g&&-1!==g.indexOf("amzn_debug_mode")&&(a.debug_mode=!0),h="src="+a.src_id+"&slot_uuid="+d+"&c=100&u="+g+"&cb="+Math.round(1e7*Math.random()),i=a.protocol+a.host+a.pb_svc+"?jsd=1&"+h,e?a.appendScriptTag(i):aax_write(b,"<script type='text/javascript' src='"+i+"'></script>")},a.getAdsCallback=function(b,c,d,e,f){var g=null;f=f||{};try{c&&"function"==typeof c&&(g=a.handleCallBack(c,d))}catch(h){}f.to||(f.to=d),a.doGetAdsAsync(b,e,f,g)},a.getVideoAdsCallback=function(b,c,d,e,f){var f=f||{};f.mt="V",a.getAdsCallback(b,c,d,e,f)},a.getDisplayAdsCallback=function(b,c,d,e,f){var f=f||{};f.mt="D",a.getAdsCallback(b,c,d,e,f)},a.getAdsAsync=function(b,c,d){a.doGetAdsAsync(b,c,d)},a.getVideoAdsAsync=function(b,c,d){var d=d||{};d.mt="V",a.getAdsAsync(b,c,d)},a.getDisplayAdsAsync=function(b,c,d){var d=d||{};d.mt="D",a.getAdsAsync(b,c,d)},a.handleCallBack=function(b,d){var e=!1,f=null,g=function(a){if(!e){try{b(a),f&&clearTimeout(f),a||h.set("to","1")}catch(c){}e=!0}},i=a.getValidMilliseconds(d);return f=i?c.setTimeout(g,i):c.setTimeout(g,a.DEFAULT_TIMEOUT),g},a.getValidMilliseconds=function(b){if(!b)return!1;try{var c=~~Number(b);if(c>a.MIN_TIMEOUT)return c}catch(d){return!1}return!1},a.getAds=function(c,e,f,i){if(g=!1,i)return void a.doGetAdsAsync(c,e,f);var j=a.getScriptSource(c,e,f);try{a.latencyUtil=new d(!0,c,f&&f.mt?f.mt:"DV"),a.latencyUtil.startTimer(),h.addTimer("sb"),h.set("src",c)}catch(k){}j&&aax_write(b,"<script type='text/javascript' src='"+j+"'></script>")},a.getVideoAds=function(b,c,d,e){var d=d||{};d.mt="V",a.getAds(b,c,d,e)},a.getDisplayAds=function(b,c,d,e){var d=d||{};d.mt="D",a.getAds(b,c,d,e)},a.doGetAdsAsync=function(b,c,e,f){g=!1;var i=a.getScriptSource(b,c,e);try{a.latencyUtil=new d(!1,b,e&&e.mt?e.mt:"DV"),a.latencyUtil.startTimer(),h.addTimer("ab"),h.set("src",b)}catch(j){}a.appendScriptTag(i,f)},a.getScriptSource=function(c,d,e){var f,g,i,j,k,l;if(!a.ssb){if(a.src_id=c,e=e||{},f=e.u,g=e.d,i=e.to,j=e.mt,f||(f=a.getReferrerURL()),f&&-1!==f.indexOf("amzn_debug_mode")&&(a.debug_mode=!0),e.mt&&"V"!=e.mt&&"DV"!=e.mt||a.vads&&(a.vads={},delete a.amzn_vid),a.ads&&(a.clearTargetingFromGPTAsync(),a.ads={}),a.startTime&&_typeof("number"==a.startTime)&&h.addTimer("st",a.startTime),a.saved_ads&&(a.ads=a.saved_ads),g)try{b.domain=g}catch(m){}return k="src="+c+"&u="+f+"&cb="+Math.round(1e7*Math.random()),d&&(k+="&sz="+d),i&&(k+="&t="+i),j&&(k+="&mt="+j),l=a.protocol+a.host+a.dtb_svc+"?"+k}a.ssb=!1},a.getReferrerURL=function(){var d=encodeURIComponent(b.documentURI);try{d=encodeURIComponent(c.top.location.href),d&&"undefined"!=d||(d=a.detectIframeAndGetURL())}catch(e){d=a.detectIframeAndGetURL()}return d},a.detectIframeAndGetURL=function(){try{if(c.top!==c.self)return encodeURIComponent(b.referrer)}catch(a){return encodeURIComponent(b.documentURI)}},a.appendScriptTag=function(a,c){var d,e;if(!a&&c&&"function"==typeof c)return void c.apply(this,[!0]);d=b.getElementsByTagName("script")[0],e=b.createElement("script"),e.type="text/javascript",e.async=!0,a&&(e.src=a);try{c&&"function"==typeof c&&(e.readyState?e.onreadystatechange=function(){("loaded"==e.readyState||"complete"==e.readyState)&&(e.onreadystatechange=null,c(!0))}:e.onload=function(){c(!0)})}catch(f){}d.parentNode.insertBefore(e,d)},a.renderAd=function(b,c){var d,e,f,g,i,j;if(a.ads[c])h.addTimer("imp"),d=a.ads[c],a.ev&&(e="amznad"+Math.round(1e6*Math.random()),d=d.replace("window.top.amznads.detectViewability","window.amzncsm.rmD"),d=d.replace(/id=[^ ]*/,'id="'+e+'"'),f="<script type='text/javascript' src='"+a.CSM_JS+"'></script>\n",a.host!=a.DEFAULT_HOST&&(f+="<script type='text/javascript'>try{amzncsm.host=window.top.amznads.host;}catch(e){amzncsm.host=amznads.host;}</script>\n"),d=f+d),aax_write(b,d);else{h.set("kvm","1"),g=new Object,g.c="dtb",g.src=a.src_id,g.kvmismatch=1,g.pubReturnedKey=c,g.aaxReturnedKeys=a.getTokens(),g.cb=Math.round(1e7*Math.random());try{g.u=encodeURIComponent(location.host+location.pathname),navigator&&(g.ua=encodeURIComponent(navigator.userAgent))}catch(k){}i=encodeURIComponent(JSON.stringify(g)),j=a.protocol+a.host+"/x/px/p/0/"+i,aax_write(b,"<img src='"+j+"'/>")}},a.hasAds=function(b){var c;if(!b)try{return Object.keys(a.ads).length>0}catch(d){for(c in a.ads)if(a.ads.hasOwnProperty(c))return!0}for(c in a.ads)if(a.ads.hasOwnProperty(c)&&c.indexOf(b)>0)return!0;return!1},a.getTargeting=function(b){var c={},d=0;a.getTokens()&&a.getTokens().length>0?(d=1,c[a.targetingKey]=a.getTokens(),a.amzn_vid&&(c[a.vidKey]=a.amzn_vid)):g||(d=2);try{h.addTimer("gk"),h.set("gks",d)}catch(e){}return c},a.setTargeting=function(b,c){var d;for(d in a.ads)if(a.ads.hasOwnProperty(d)){if(c&&d.indexOf(c)<0)continue;b(d,"1")}},a.setTargetingForGPTAsync=function(b){var c,d;try{if(b)a.targetingKey=b,c=a.getTokens(),"undefined"!=typeof c&&c.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(b,c),a.amzn_vid&&googletag.pubads().setTargeting(a.vidKey,a.amzn_vid)});else for(d in a.ads)a.ads.hasOwnProperty(d)&&!function(){var b=d;googletag.cmd.push(function(){amznads.debug_mode,googletag.pubads().setTargeting(b,"1"),a.amzn_vid&&googletag.pubads().setTargeting(a.vidKey,a.amzn_vid)})}()}catch(e){}},a.setTargetingForGPTSync=function(b){var c,d;try{if(b)a.targetingKey=b,c=a.getTokens(),"undefined"!=typeof c&&c.length>0&&(googletag.pubads().setTargeting(b,c),a.amzn_vid&&googletag.pubads().setTargeting(a.vidKey,a.amzn_vid));else for(d in a.ads)a.ads.hasOwnProperty(d)&&(googletag.pubads().setTargeting(d,"1"),a.amzn_vid&&googletag.pubads().setTargeting(a.vidKey,a.amzn_vid))}catch(e){}},a.clearTargetingFromGPTAsync=function(){try{googletag&&googletag.pubads()&&googletag.pubads().clearTargeting(a.targetingKey),googletag.pubads().clearTargeting(a.vidKey)}catch(b){}},a.appendTargetingToAdServerUrl=function(b){var c;try{-1===b.indexOf("?")&&(b+="?");for(c in a.ads)a.ads.hasOwnProperty(c)&&(b+="&"+c+"=1")}catch(d){}return b},a.appendTargetingToQueryString=function(b){var c;try{for(c in a.ads)a.ads.hasOwnProperty(c)&&(b+="&"+c+"=1")}catch(d){}return b},a.getTokens=function(b){var c,d=[];try{for(c in a.ads)if(a.ads.hasOwnProperty(c)){if(b&&c.indexOf(b)<0)continue;d.push(c)}}catch(e){}return d},a.getKeys=a.getTokens,a.getVid=function(){return a.amzn_vid},a.doAllTasks=function(){for(;a.tasks.length>0;){var b=a.tasks.shift();a.doTask(b)}},a.doTask=function(a){try{a.call()}catch(b){}},a.tryGetAdsAsync=function(){a.ssb&&a.__ads&&a.updateAds(a.__ads),a.asyncParams&&(a.startTime=a.asyncParams.startTime,a.getAdsCallback(a.asyncParams.id,a.asyncParams.callbackFn,a.asyncParams.timeout,a.asyncParams.size,a.asyncParams.data))},a}(amznads||{},document,window),amznads.tryGetAdsAsync(),window.amzn_ads=amzn_ads,window.amznads=amznads;
var AufBid=window.AufBid||{};AufBid.AmazonAdapter=(function(){var CALLBACK_TIMEOUT=800;function _g(token){var c=token.split('p').pop();return(0xE-Number(c)+0x1)*0x1/0x2;}
return extend(AufBid.AufAdapter,{constructor:function(manager,params){this.super.constructor.call(this,manager,params);this.useNewApi=this.manager.getConfig('hb_amazonV2');this.log('Amazon library V'+(this.useNewApi?'2':'1'),'warn');if(this.useNewApi&&!window.apstag||!this.useNewApi&&!window.amznads){this.disabled=true;return;}
if(this.useNewApi){apstag.init({pubID:this.options.accountId,adServer:'smart'});}else{if(this.debug&&location.hash.indexOf('amzn_debug_mode=1')<0){location.hash=(location.hash?location.hash+'&':'#')+'amzn_debug_mode=1';}
var callback=this.createCallback();PubSub.subscribe('ads.hb.amazon.callback.ready',callback.func);}},requestBids:function(){if(this.disabled){return;}
if(this.useNewApi){var config={slots:[],timeout:this.manager.callId?this.manager.timeout:CALLBACK_TIMEOUT};for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var sizes=placement.size.split(',').map(function(size){return size.trim().split('x');});config.slots.push({slotID:formatId+'_'+placement.tag,sizes:sizes});},this);}}
var callback=this.createCallback();apstag.fetchBids(config,callback.func);}else{amznads.getAdsCallback(this.options.accountId,function(){PubSub.publish('ads.hb.amazon.callback.ready');});}},getBidsFromResponse:function(response){if(this.useNewApi){console.log(response);if(!response){this.logError('Empty response');return;}
if(response.count===0){this.log('No bid');return;}
response.forEach(function(rawBid){this.log(rawBid);},this);}else{for(var formatId in this.placements){if(this.placements.hasOwnProperty(formatId)){this.placements[formatId].forEach(function(placement){var tokens=amznads.getTokens(placement.tag);if(!tokens){this.logError('Empty response');return;}
if(tokens.length===0){this.log('No bid - format '+formatId+' - placement '+placement.tag);return;}
tokens.forEach(function(token){this.manager.addBid({account:this,formatId:formatId,placementId:placement.tag,placementSize:placement.size,cpmRaw:_g(token)},{creativeHTML:'<html>\n'
+'<head></head>\n'
+'<body style="margin : 0; padding: 0;">\n'
+'<script type="text/javascript">top.amznads.renderAd(document, "'+token+'")</script>\n'
+'</div>\n'
+'</body>\n'
+'</html>',});},this);},this);}}}}});})();
var AufBid=window.AufBid||{};AufBid.Debug=(function(){var debug=function(manager,params){this.manager=manager;this.options=params||{};this.placeToggleButton();};debug.prototype={constructor:debug,tableOfContents:[],slots:[],getRenderedBid:function(id){var ret;var pid=id.split('_')[1];for(var bidder in this.bids){for(var formatId in this.bids[bidder]){for(var i=0,l=this.bids[bidder][formatId].length;i<l;++i){var bid=this.bids[bidder][formatId][i];if(bid.ad_server_pid.toString()===pid.toString()&&bid.rendered===1){ret=bid;break;}}}}
return ret;},parse:function(){var els=document.querySelectorAll('div[id^=sas_]');els.forEach(function(el){var sp=el.id.split('_');var classname='.'+sp[0]+'_FormatID_'+sp[1];if(window.getComputedStyle(document.querySelectorAll(classname)[0]).display!=='none'){this.slots.push({el:el,bid:this.getRenderedBid(el.id)});}},this);this.parsed=true;},placeLabels:function(){this.slots.forEach(function(slot){slot.el.style.position='relative';slot.el.style.minHeight='20px';slot.el.style.minWidth='20px';var label=this.getLabel(slot);slot.el.appendChild(label);},this);this.createTableOfContents();},getLabel:function(slot){var label=document.createElement('div');label.style.position='absolute';label.textContent=slot.el.id;label.style.top='0px';label.style.left='0px';label.style.background='red';label.style.padding='5px';label.style.color='white';label.style.display='block';label.id='label_for_'+slot.el.id;label.className='label_hb_placement';if(slot.bid){label.textContent+=' '+slot.bid.accountName+' ('+slot.bid.cpmFloored+')';label.style.background='#4CAF50';}else{label.textContent+=' other';}
return label;},createTableOfContents:function(){var table=document.createElement('div');table.id='hb-table-of-content';table.style.cursor='move';var liste=document.createElement('ul');table.appendChild(liste);this.slots.forEach(function(slot){var li=document.createElement('li');li.textContent=slot.el.id;li.style.cursor='pointer';if(slot.bid){li.textContent+=' '+slot.bid.accountName+' ('+slot.bid.bidderName+')';}else{li.textContent+=' direct';}
slot.el.style.transition='all 0.4s';li.onclick=function(){AufBid.Debug.Utils.scrollTo(document.body,document.getElementById(slot.el.id).offsetTop,600);};li.onmouseover=function(){slot.el.style.transform='scale(1.3)';};li.onmouseout=function(){slot.el.style.transform='scale(1)';};liste.appendChild(li);});table.style.position='fixed';table.style.top='100px';table.style.right='30px';table.style.zIndex='9999999';table.style.background='#607D8B';table.style.color='white';table.style.boxShadow='2px 2px 8px #666';table.style.borderRadius='2px';table.style.padding='10px';liste.style.color='inherit';liste.style.margin='0';liste.style.padding='0';document.body.appendChild(table);AufBid.Debug.Utils.makeDraggable('#'+table.id);},getToggleButton:function(){var button=document.createElement('button');button.textContent='toggle placements';button.style.position='fixed';button.style.top='65px';button.style.right='30px';button.style.zIndex=10000000;return button;},placeToggleButton:function(){var button=this.getToggleButton();var that=this;button.onclick=function(){that.parse();var labels=document.getElementsByClassName('label_hb_placement');if(labels.length===0){that.placeLabels();return;}
var display=labels[0].style.display==='block'?'none':'block';for(var i=0,l=labels.length;i<l;i++){labels[i].style.display=display;}};document.body.appendChild(button);},debug:function(){console.group('debug header bidding');console.group('bids');var allBids=[];for(var bidder in this.manager.bids){for(var formatId in this.manager.bids[bidder]){for(var i=0,l=this.manager.bids[bidder][formatId].length;i<l;i++){allBids.push(this.manager.bids[bidder][formatId][i]);}}}
console.group('available ('+allBids.length+')');console.table(allBids);console.groupEnd();var bookedBids=allBids.filter(function(bid){return bid.booked;});console.group('booked ('+bookedBids.length+')');console.table(bookedBids);console.groupEnd();var renderedBids=allBids.filter(function(bid){return bid.rendered;});console.group('rendered ('+renderedBids.length+')');console.table(renderedBids);console.groupEnd();console.groupEnd();console.groupEnd();}};return debug;})();AufBid.Debug.Utils={scrollTo:function(element,to,duration){if(duration<=0)return;var difference=to-element.scrollTop;var perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;if(element.scrollTop===to)return;window.scrollTo(element,to,duration-10);},10);},makeDraggable:function(elementSelector){var dragStartX,dragStartY;var objInitLeft,objInitTop;var inDrag=false;var dragTarget=document.querySelector(elementSelector);dragTarget.addEventListener('mousedown',function(e){inDrag=true;objInitLeft=dragTarget.offsetLeft;objInitTop=dragTarget.offsetTop;dragStartX=e.pageX;dragStartY=e.pageY;});document.addEventListener('mousemove',function(e){if(!inDrag){return;}
dragTarget.style.left=(objInitLeft+e.pageX-dragStartX)+'px';dragTarget.style.top=(objInitTop+e.pageY-dragStartY)+'px';});document.addEventListener('mouseup',function(){inDrag=false;});},domReady:function(callback){document.readyState==='interactive'||document.readyState==='complete'?callback():document.addEventListener('DOMContentLoaded',callback);}};
var AufBid=window.AufBid||{};AufBid.Utils=(function(){var utils=function(){};utils.prototype={constructor:utils,ajax:function(url,callback,data,options){var XDomainRequest=false,x;var method=options.method||(data?'POST':'GET');if(!window.XMLHttpRequest){XDomainRequest=true;}else{x=new window.XMLHttpRequest();if(x.responseType===undefined){XDomainRequest=true;}}
if(XDomainRequest){x=new window.XDomainRequest();x.onload=function(){callback(x.responseText,x,options);};x.onerror=function(){};x.ontimeout=function(){};x.onprogress=function(){};}else{x.onreadystatechange=handler;}
if(method==='GET'&&data){var urlInfo=this.parseURL(url);Object.assign(urlInfo.search,data);url=this.formatURL(urlInfo);}
x.open(method,url);if(!XDomainRequest){if(options.withCredentials){x.withCredentials=true;}
if(options.preflight){x.setRequestHeader('X-Requested-With','XMLHttpRequest');}
x.setRequestHeader('Content-Type',options.contentType||'text/plain');}
x.send(method==='POST'&&data);function handler(){if(x.readyState===4&&callback){callback(x.responseText,x,options);}}},parseURL:function(url){var parsed=document.createElement('a');parsed.href=decodeURIComponent(url);return{protocol:(parsed.protocol||'').replace(/:$/,''),hostname:parsed.hostname,port:+parsed.port,pathname:parsed.pathname,search:this.parseQS(parsed.search||''),hash:(parsed.hash||'').replace(/^#/,''),host:parsed.host};},formatURL:function(obj){return(obj.protocol||'http')+'://'+
(obj.host||obj.hostname+(obj.port?':'+obj.port:''))+
(obj.pathname||'')+(obj.search?'?'+this.formatQS(obj.search||''):'')+
(obj.hash?'#'+obj.hash:'');},formatQS:function(query){return Object.keys(query).map(function(k){return Array.isArray(query[k])?query[k].map(function(v){return k+'[]='+v;}).join('&'):k+'='+query[k];}).join('&');},getQueryString:function(query){return Object.keys(query).map(function(k){return k+'='+encodeURIComponent(query[k]);}).join('&');},parseQS:function(query){return!query?{}:query.replace(/^\?/,'').split('&').reduce(function(acc,criteria){var k=criteria.split('=')[0];var v=criteria.split('=')[1];if(/\[\]$/.test(k)){k=k.replace('[]','');acc[k]=acc[k]||[];acc[k].push(v);}else{acc[k]=v||'';}
return acc;});},getLocationHash:function(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;},getGuid:function(){return Date.now()+''+Math.floor(Math.random()*1000);},loadIframe:function(container,width,height,params){if(!container||!width||!height||!params||params&&!params.src&&!params.html&&!params.empty){return;}
var iframe=document.createElement('iframe');iframe.setAttribute('scrolling','no');iframe.setAttribute('frameborder',0);iframe.setAttribute('width',width);iframe.setAttribute('height',height);iframe.style.border='none';iframe.marginWidth=0;iframe.topMargin=0;iframe.leftMargin=0;iframe.marginHeight=0;iframe.allowTransparency='true';iframe.sandbox='allow-forms allow-pointer-lock allow-same-origin allow-popups allow-modals allow-scripts';container.appendChild(iframe);if(params.src){iframe.src=params.src;}else if(params.html){if(!iframe.contentWindow){return;}
iframe.contentWindow.document.open();iframe.contentWindow.document.write(params.html);iframe.contentWindow.document.close();}else if(!params.empty){return;}
return iframe;},loadScript:function(url,callback,attributes){var script=document.createElement('script');script.type='text/javascript';script.async=true;script.src=url;if(typeof callback==='function'){script.onload=callback;}
for(var name in attributes){script.setAttribute(name,attributes[name]);}
var elt=document.getElementsByTagName('script')[0];elt.parentNode.insertBefore(script,elt);},loadPixel:function(url){if(!/^https:\/\//.test(url)){return false;}
var pixel=new Image();pixel.src=url;return true;},capitalizeFirstLetter:function(string){return string.charAt(0).toUpperCase()+string.slice(1);}};return utils;})();
var AufBid=window.AufBid||{};AufBid.Bid=(function(){var bid=function(params,extraInfos){if(!params.formatId){this.errorMsg='No format id';}
if(!params.formatName){this.errorMsg='No format name';}
if(!params.currency&&!params.account.currency){this.errorMsg='No currency';}
if(!params.placementId){this.errorMsg='No placement id';}
if(!params.placementSize){this.errorMsg='No placement size';}
if(!params.cpmRaw){this.errorMsg='No cpm';}
this.id=params.id;this.formatId=params.formatId;this.formatName=params.formatName;this.accountName=params.account.name;this.bidderName=params.account.bidder;this.currency=params.currency||params.account.currency;this.TTL=params.account.bidTTL;this.expirationDate=(new Date()).getTime()+this.TTL*1000;this.placementId=params.placementId;this.placementSize=params.placementSize;this.cpmRaw=params.cpmRaw;this.late=params.late;this.rendered=false;this.booked=false;this.expired=false;this.setExtraInfos(extraInfos);this.setCPMs(params.account.options.adjustment,params.account.options.discount);if(!this.parseSize()){this.errorMsg='Failed retrieving placement width & height';}
if(this.errorMsg){this.errorMsg='Invalid bid - '+this.errorMsg;if(params.accountName){this.errorMsg='['+params.accountName+'] '+this.errorMsg;}
this.invalid=true;return;}};bid.prototype={constructor:bid,parseSize:function(){if(this.placementWidth&&this.placementHeight){return true;}
if(!this.placementSize){return false;}
var sizes=this.placementSize.split('x');if(sizes.length===2){this.placementWidth=parseInt(sizes[0]);this.placementHeight=parseInt(sizes[1]);return true;}
return false;},isExpired:function(){return this.expirationDate<(new Date()).getTime();},isAlmostExpired:function(){return(this.expirationDate-(new Date()).getTime())/1000<this.TTL/3;},setExtraInfos:function(data){for(var key in data){this[key]=data[key];}},setCPMs:function(adjustment,discount){this.cpmRawNet=this.applyRate(this.cpmRaw,discount);this.cpmEuros=this.convertInEuros(this.cpmRaw,this.currency),this.cpmNet=this.applyRate(this.cpmEuros,discount);this.cpmAdjusted=this.applyRate(this.cpmNet,adjustment);this.cpmFloored=this.floorCpm(this.cpmAdjusted);this.cpmFormatted=this.format4Digits(this.cpmFloored);},convertInEuros:function(cpm,currency){var cpmEuros;switch(currency.toUpperCase()){case'USD':cpmEuros=cpm*0.814;break;case'GBP':cpmEuros=cpm*1.143;break;default:cpmEuros=cpm;}
return cpmEuros;},applyRate:function(cpm,rate){return cpm*(1-rate/100);},floorCpm:function(cpm){var cpmRounded=Math.round(cpm*100)/100;if(cpmRounded>0&&cpmRounded<=0.15){return cpmRounded;}else if(cpmRounded<=5){return Math.floor(cpmRounded*20)/20;}else if(cpmRounded<=20){return Math.floor(cpmRounded*4)/4;}else if(cpmRounded<=50){return Math.floor(cpmRounded);}else if(cpmRounded<=100){return Math.floor(cpmRounded/5)*5;}else if(cpmRounded<=500){return Math.floor(cpmRounded/50)*50;}else if(cpmRounded<=1000){return Math.floor(cpmRounded/100)*100;}else if(cpmRounded>1000){return 1000;}else{return 0;}},format4Digits:function(cpm){return('000'+cpm.toFixed(2).replace('.','')).slice(-4);}};return bid;})();
var AufBid=window.AufBid||{};AufBid.Manager=(function(){var LOAD_TIMEOUT=1000;var MAX_HEIGHT_TOP_BANNER=250;var manager=function(params){this.callback=params.callback||window.afAd&&(afAd.newOnecall?afAd.onecall:afAd.load)||function(){};if(!params.data||params.data.accounts.length===0){this.disabled=true;this.callback();}
this.options=params.data;this.timeout=params.timeout||LOAD_TIMEOUT;this.bidsBackHandler=params.bidsBackHandler||window.afAd&&afAd.setHeaderBiddingWinner||window.sas&&sas.setHeaderBiddingWinner||function(){};this.init();};manager.prototype={constructor:manager,accounts:{},bids:{},formats:{},formatIds:[],disabled:false,late:false,callId:0,init:function(){this.utils=new AufBid.Utils();this.hashs=this.utils.getLocationHash();this.logger=new AufBid.Logger({verbose:this.getConfig('hb_verbose')});this.formats=this.options.formats;this.initFormats();this.forced=this.isForced();this.adjustAdTagging();this.loadAccounts();this.requestBids();var that=this;if(this.accounts&&this.formatIds){setTimeout(function(){that.callback();},this.timeout);}else{this.callback();}
PubSub.subscribe('ad.call',function(message,data){var formatIds=data.formatIds.toString().split(',');if(that.callId===1){for(var format in that.formats){if(that.formats.hasOwnProperty(format)&&that.formats[format].asyncOnly){formatIds.push(format);}}}
that.postAdServerCall(formatIds);});},logError:function(message,category){this.logger.logError(message,(category?category:'manager'));},isForced:function(){return this.getConfig('hb_forced')||afSession.isPaid()&&!(document.domain.indexOf('aufeminin.com')>=0||document.domain.indexOf('alfemminile.com')>=0&&new Date()>new Date('2018-01-29 00:00:00'));},initFormats:function(formatIds){this.formatIds=formatIds||window.sas_formatIds&&sas_formatIds.split(',')||Object.keys(this.formats);this.formatIds=this.formatIds.filter(function(formatId){return(typeof this.formats[formatId]!=='undefined');},this);this.logger.logConsole('Init formats '+this.formatIds.toString());},adjustAdTagging:function(){if(!this.forced)return;window.sas_formatIds=this.formatIds.toString();if(window.af_addEvent){af_addEvent(window,'load',function(){var precontent=document.getElementById('precontent');if(precontent)precontent.style.maxHeight=MAX_HEIGHT_TOP_BANNER+'px';},false);}},loadAccounts:function(){var accountsTest=this.getConfig('hb_accountsTest');var accountsDisabled=this.getConfig('hb_accountsDisabled');var biddersTest=this.getConfig('hb_biddersTest');var biddersDisabled=this.getConfig('hb_biddersDisabled');this.options.accounts.forEach(function(params){if(accountsTest&&accountsTest.indexOf(params.name)<0||accountsDisabled.indexOf(params.name)>=0||biddersTest&&biddersTest.indexOf(params.bidder)<0||biddersDisabled.indexOf(params.bidder)>=0){return;}
var account=this.createAccount(params);if(account){this.accounts[params.name]=account;}},this);},createAccount:function(params){var bidderName=this.utils.capitalizeFirstLetter(params.bidder);if(!window.AufBid[bidderName+'Adapter']){this.logError('Failed loading account','account '+bidderName);return;}
return new AufBid[bidderName+'Adapter'](this,params);},getAccount:function(name){if(!this.accounts[name]){this.logError('Failed retrieving account ','account '+name);return;}
return this.accounts[name];},requestBids:function(){for(var accountName in this.accounts){if(this.accounts.hasOwnProperty(accountName)){var account=this.accounts[accountName];account.setPlacements(this.formatIds);if(account.hasPlacements()){this.logger.logConsole('['+accountName+'] Request bids for formats '+this.formatIds.toString());account.requestBids();}else{}}}
this.callId++;},render:function(params){var logInfos='';try{this.logger.logConsole('Render bid format '+params.formatId);if(params.target.indexOf('%')>=0){params.target=decodeURIComponent(params.target);}
logInfos=' - format '+params.formatId;var bidIdKey='bid_'+this.formats[params.formatId].name+'_id';var bidId=this.getAdTargetingKeywordValue(params.target,bidIdKey,'i');if(!bidId){this.logError('No render: missing bid ID'+logInfos,'HB108');return;}
var bid=this.getBid(bidId);if(!bid){this.logError('No render: bid does not exist anymore'+logInfos,'HB101');return;}
logInfos+=' - account '+bid.accountName
+' - format '+bid.formatId
+' - placement '+bid.placementId;if(bid.formatId!==params.formatId.toString()){this.logError('No render: format mismatch - expected format '+params.formatId+logInfos,'HB112');return;}else if(bid.rendered){this.logError('No render: bid already rendered'+logInfos,'HB105');return;}else if(!bid.booked){this.logError('No render: bid not booked'+logInfos,'HB107');return;}else if(bid.isExpired()){this.logError('Render expired bid'+logInfos,'HB106');}else if(bid.cpmFloored!==params.cpmFloored){logInfos+=' - Insertion ID '+params.insertionId
+' - CPM '+params.cpmFloored;this.logError('CPM mismatch'+logInfos,'HB109');}
bid.rendered=true;var containerIdKey='tagid';var containerId=this.getAdTargetingKeywordValue(params.target,containerIdKey,'t');bid.containerId=(containerId?containerId:'sas_'+bid.formatId);bid.renderParams=params;this.logger.logRenderedBid(bid);var account=this.getAccount(bid.accountName);if(!account){this.logError('Account not found'+logInfos+' - expected account '+bid.accountName,'HB110');return;}
if(!account.render(bid)){this.logError('No render: error while rendering','HB111');}}catch(e){this.logError('Fatal error while rendering : '+e.message+' - '+logInfos,'HB100');}},addBid:function(params,extraInfos){var bid=new AufBid.Bid({account:params.account,id:this.utils.getGuid().toString(),formatId:params.formatId,formatName:this.formats[params.formatId].name,currency:params.currency,placementId:params.placementId,placementSize:params.placementSize,cpmRaw:params.cpmRaw,late:this.late},extraInfos);if(bid.invalid){this.logError(bid.errorMsg,'account '+bid.accountName);this.logger.logConsole(params,'table');return;}
if(bid.late){this.logger.logLateBid(bid);}
this.storeBid(bid);},storeBid:function(bid){this.logger.logConsole('['+bid.accountName+'] New bid received'
+' - format '+bid.formatName
+' - CPM '+bid.cpmAdjusted,'info');this.bids[bid.accountName]=this.bids[bid.accountName]||{};this.bids[bid.accountName][bid.formatId]=this.bids[bid.accountName][bid.formatId]||[];this.bids[bid.accountName][bid.formatId].push(bid);},getBid:function(bidId){if(!bidId){return;}
for(var accountName in this.bids){if(this.bids.hasOwnProperty(accountName)){for(var formatId in this.bids[accountName]){if(this.bids[accountName].hasOwnProperty(formatId)){for(var i=0,l=this.bids[accountName][formatId].length;i<l;i++){var bid=this.bids[accountName][formatId][i];if(bid.id===bidId){return bid;}}}}}}
return null;},getBestAvailableBid:function(formatId){var maxBid;for(var accountName in this.bids){if(this.bids.hasOwnProperty(accountName)&&this.bids[accountName][formatId]){this.bids[accountName][formatId].forEach(function(bid){if(!bid.rendered&&!bid.booked&&!bid.isAlmostExpired()&&(!maxBid||bid.cpmAdjusted>maxBid.cpmAdjusted)){maxBid=bid;}});}}
return maxBid;},cleanExpiredBids:function(){this.logger.logConsole('Clean expired bids');for(var accountName in this.bids){if(this.bids.hasOwnProperty(accountName)){for(var formatId in this.bids[accountName]){if(this.bids[accountName].hasOwnProperty(formatId)){var formatBucket=this.bids[accountName][formatId];if(formatBucket&&formatBucket.length>0){for(var i=formatBucket.length-1;i>=0;i--){var bid=formatBucket[i];if(bid.isExpired()&&!bid.booked&&!bid.rendered){this.logger.logConsole('['+bid.accountName+'] Clean expired bid'
+' - format '+bid.formatName
+' - CPM '+bid.cpmAdjusted,'info');this.bids[accountName][formatId].splice(i,1);}}}}}}}},getAdTargetingKeywordsFormatted:function(){var keywords=this.getAdTargetingKeywords();var arr=[];for(var key in keywords){if(keywords.hasOwnProperty(key)){arr.push(key+(keywords[key]?'='+keywords[key]:''));}}
return';'+arr.join(';')+';';},getAdTargetingKeywords:function(){var keywords={};this.logger.logConsole('Book bids for formats '+this.formatIds.toString());this.formatIds.forEach(function(formatId){var bid=this.getBestAvailableBid(formatId);if(bid){this.logger.logConsole('['+bid.accountName+'] Book bid'
+' - format '+bid.formatName
+' - CPM '+bid.cpmAdjusted);bid.booked=true;var cpmAdjusted=(Math.round(bid.cpmAdjusted*100)/100).toString().replace('.',',');keywords['bid_'+bid.formatName+'_id']=bid.id+'i';keywords['bid_'+bid.formatName+'_cpm']=bid.cpmFormatted+'c';keywords['bidlog_'+bid.accountName+'_'+bid.formatName]=cpmAdjusted;}else{this.logger.logConsole('No bid available for '+this.formats[formatId].name+' format');}},this);if(Object.keys(keywords).length===0){this.logger.logConsole('No bid booked for this ad call','warn');}
if(this.forced){keywords['hb']='forced';}
return keywords;},cleanAdTargetingKeywords:function(target){target=target.replace(/bid_[a-z0-9_]+_id=[0-9]+i;?/gi,'');target=target.replace(/bid_[a-z0-9_]+_cpm=[0-9]+c;?/gi,'');target=target.replace(/bidlog_[a-z0-9_]+=[0-9]+(,[0-9]+)?;?/gi,'');target=target.replace(/hb=forced;?/gi,'');return target;},preAdServerCall:function(target,formatIds){if(this.disabled){return target;}
this.logger.logConsole('Pre ad server call');this.initFormats(formatIds);this.cleanExpiredBids();this.late=true;this.logger.logAvailableBids(this.bids);if(window.afAd&&afAd.newOnecall){this.logger.logConsole('Book bids for formats '+this.formatIds.toString());var bidsBooked=false;this.formatIds.forEach(function(formatId){var bid=this.getBestAvailableBid(formatId);if(bid){this.logger.logConsole('['+bid.accountName+'] Book bid'
+' - format '+bid.formatName
+' - CPM '+bid.cpmAdjusted);bid.booked=true;bidsBooked=true;this.bidsBackHandler(bid.formatId,bid.account,bid.cpmRawNet,bid.currency);}else{this.logger.logConsole('No bid available for '+this.formats[formatId].name+' format','warn');}},this);if(!bidsBooked){this.logger.logConsole('No bid booked for this ad call','warn');}}else{target=target||window.sas_target;target=this.cleanAdTargetingKeywords(target);target+=this.getAdTargetingKeywordsFormatted();return target;}},postAdServerCall:function(formatIds){this.logger.logConsole('Post ad server call');this.initFormats(formatIds);this.cleanExpiredBids();this.late=false;this.logger.logAvailableBids(this.bids);this.requestBids();},getAdTargetingKeywordValue:function(target,key,suffix){var regex=new RegExp(';'+key+'=([^;]*)'+(suffix?suffix:'')+';','gi');var matches=regex.exec(target);return(matches&&matches.length>0?matches[1]:'');},getConfig:function(key){return this.hashs[key]||window.localStorage&&localStorage.getItem(key)||'';},debug:function(){if(!AufBid.Debug){this.logger.logConsole('debug not available','warn');return;}
if(!this.debugger){this.debugger=new AufBid.Debug(this);}
this.debugger.debug();},setVerbose:function(enabled){this.logger.setVerbose(enabled);}};return manager;})();
if(!top.aufSkin){top.aufSkin={done:false,hasStaticHeight:false,initialized:false,w:window,d:top.document,conf:{position:'absolute',duration:0,clickTarget:'_blank',contentWidth:1020,contentWidthDefault:1020,contentVerticalOffset:280,contentVerticalOffsetMobile:100,creativeHTML:'',creativeURL:'',creativeWidth:1660,creativeHeight:1500,isHTML5:false},init:function(){this.initialized=true;this.header=this.d.getElementById('header')||this.d.body.firstChild;this.topBox=this.d.getElementById('precontent');if(this.topBox){this.hasStaticHeight=true;}
this.createContainer();this.initEventListeners();},initEventListeners:function(){var that=this;PubSub.subscribe('ad.clean.skin',function(){that.close();});},render:function(conf){if(!this.initialized){this.init();}
if(conf){if(this.hasStaticHeight){conf.contentVerticalOffset=(af_isMobile()?this.conf.contentVerticalOffsetMobile:this.conf.contentVerticalOffset);}
for(var attr in conf){this.conf[attr]=conf[attr];}}
this.isHTML5=(this.conf.creativeHTML!=='')||(this.conf.creativeURL&&this.conf.creativeURL.substr(this.conf.creativeURL.length-5)==='.html')||this.conf.isHTML5;this.showContainer();this.addHtml();this.addCreatives();this.resize();this.setTimer();this.skinCallback();this.done=true;PubSub.publish('ad.load.skin');return this.creative;},createContainer:function(){this.container=this.d.createElement('div');this.container.className='auf-skin';if(af_isMobile()||af_isTablet()){this.container.style.overflow='hidden';}
this.header.parentNode.insertBefore(this.container,this.header.nextSibling);},showContainer:function(){this.container.style.display='';if((!af_isMobile()&&!af_isTablet())||this.hasStaticHeight){this.container.style.height=this.conf.contentVerticalOffset+'px';}
if(this.topBox){this.topBox.style.display='none';}},close:function(){if(this.timer){this.w.clearTimeout(this.timer);}
this.container.innerHTML='';this.container.style.display='none';if(this.topBox){this.topBox.style.display='';}
this.d.body.style.background='';},addHtml:function(){if(!this.conf.htmlUrl||!this.conf.htmlWidth||!this.conf.htmlHeight)return;var html=this.d.createElement('iframe');html.setAttribute('scrolling','no');html.setAttribute('frameborder',0);html.setAttribute('width',this.conf.htmlWidth);html.setAttribute('height',this.conf.htmlHeight);html.setAttribute('src',this.conf.htmlUrl);html.style.zIndex=1;html.style.position='relative';html.style.left=this.conf.htmlHorizontalOffset+'px';html.style.top=this.conf.htmlVerticalOffset+'px';var htmlDiv=this.d.createElement('div');htmlDiv.className='skin-html';htmlDiv.style.height=this.conf.contentVerticalOffset+'px';htmlDiv.style.width=this.conf.contentWidth+'px';htmlDiv.appendChild(html);this.container.appendChild(htmlDiv);},addCreatives:function(){if(this.conf.creatives&&(this.conf.creatives.video_mp4||this.conf.creatives.video_webm)){this.creative=this.d.createElement('video');this.creative.className='skin-video';this.creative.loop=true;this.creative.autoplay=true;this.creative.muted=true;var videoSources='';if(this.conf.creatives.video_mp4){videoSources+='<source type="video/mp4" src="'+this.conf.creatives.video_mp4+'"></source>';}
if(this.conf.creatives.video_webm){videoSources+='<source type="video/webm" src="'+this.conf.creatives.video_webm+'"></source>';}
this.creative.innerHTML=videoSources;}else if(this.isHTML5){this.creative=this.d.createElement('iframe');this.creative.className='skin-iframe';this.creative.setAttribute('frameborder',0);this.creative.scrolling='no';this.creative.width=this.conf.creativeWidth+'px';this.creative.height=this.conf.creativeHeight+'px';this.creative.sandbox='allow-forms allow-pointer-lock allow-same-origin allow-popups allow-modals allow-scripts';if(this.conf.creativeHTML){this.creative.src='data:text/html;charset=utf-8,'+encodeURI(this.conf.creativeHTML);}
if(this.conf.clickURL){this.conf.creativeURL+=(this.conf.creativeURL.indexOf('?')<0?'?':'&')+'clickurl='+this.conf.clickURL;}
if(this.conf.creativeURL){this.creative.src=this.conf.creativeURL;}}else if((af_isMobile()||af_isTablet())&&!this.hasStaticHeight){this.creative=this.d.createElement('img');this.creative.className='skin-img';this.creative.src=this.conf.creativeURL;}else{this.creative=this.d.createElement('div');this.creative.className='skin-div';this.creative.style.height=this.conf.creativeHeight+'px';if(this.conf.creativeURL){this.creative.style.backgroundImage='url(\''+this.conf.creativeURL+'\')';}
if(af_isMobile()||af_isTablet()){this.creative.style.backgroundSize='contain';}}
if(this.conf.clickURL&&!this.isHTML5){this.link=this.d.createElement('a');this.link.className='skin-link';this.link.href=this.conf.clickURL;this.link.target=this.conf.clickTarget;this.link.appendChild(this.creative);this.container.appendChild(this.link);}else{this.container.appendChild(this.creative);}
if(this.conf.color){this.d.body.style.background='#'+this.conf.color;}
if(this.conf.position==='fixed'){this.onScroll();af_addEvent(this.w.top,'scroll',(function(){this.onScroll();}).bind(this),false);}},onScroll:function(){var skinPos=af_findPos(this.container);var winPos=af_windowSize();if(skinPos.t<winPos.t&&this.linkPreviousState!=='fixed'){this.linkPreviousState='fixed';this.creative.style.position='fixed';var header=document.getElementsByTagName('header')[0];if(this.link&&header&&header.offsetHeight){this.link.style.top=header.offsetHeight+'px';}}else if(skinPos.t>winPos.t&&this.linkPreviousState!=='absolute'){this.linkPreviousState='absolute';this.creative.style.position='absolute';this.creative.style.top='0px';}},resize:function(){if(this.conf.contentWidth<this.conf.contentWidthDefault){var content=this.d.getElementById('content');if(content&&content.className.indexOf('habillage')<0)content.className+=' habillage';}},setTimer:function(){if(this.conf.duration){this.timer=setTimeout((function(){this.close();}).bind(this),this.conf.duration*1000);}},skinCallback:function(){if(this.conf.callback){this.conf.callback(this.creative);}}};}
